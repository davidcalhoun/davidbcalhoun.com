<!doctype html>
<html lang="en-US">
<head>
	<meta charset="utf-8">
	<title>More fun with WebKit pseudoelements: -webkit-search-cancel-button (or: Pseudoclass Inception)  | David Calhoun</title>

	<meta name="author" content="David Calhoun">

<meta name="description" content="Introduction UPDATE 2016: this appears to have even less support than before, and it's not recommended to be used on a production site. Use a helper &hellip;"> <meta name="keywords" content="">

	<meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="/atom.xml" rel="alternate" title="David Calhoun" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="/javascripts/html5.js"></script><![endif]-->
	

</head>



<body>
	<header id="header" class="inner" role="banner" aria-labelledby="header_title"><h1><a href="/" id="header_title">David Calhoun</a></h1>
<span class="tagline"></span>

</header>
	<div id="content" class="inner" role="main"><article class="post" role="main">
	<header>
		<h2 class="title">More Fun With WebKit Pseudoelements: -webkit-search-cancel-button (or: Pseudoclass Inception)</h2>
		<div class="meta date">








  


<time datetime="2012-08-10T00:00:00-07:00" pubdate data-updated="true"></time></div>
	</header>
	<div class="entry-content"><h3 id="introduction">Introduction</h3>

<p><em>UPDATE</em> 2016: this appears to have even less support than before, and it's not recommended to be used on a production site.  Use a helper JS library instead.</p>

<p>(check out the <strong><a href="http://davidbcalhoun.com/a/webkit-search-cancel-button.html">Demo</a></strong>)</p>

<p>A while back I had a bit of a field day <a href="http://davidbcalhoun.com/2011/implementing-iphone-slider-unlock-with-input-type-range">messing around with input type=”range”</a>, trying to replicate the “unlock slider” on iOS using CSS, targeting special WebKit-only CSS pseudoelements such as webkit-slider-thumb.</p>

<p>Well, now I’m at it again, this time with a much simpler use case, trying to implement a custom “clear” button on search field inputs (note that this only works on input type=”search”):</p>

<p><a href="http://davidbcalhoun.com/a/webkit-search-cancel-button.html"><img src="http://davidbcalhoun.com/wp-content/uploads/2012/08/custom-webkit-search-cancel-button.png" alt="Custom webkit-search-cancel-button" title="Custom webkit-search-cancel-button" width="239" height="145" class="aligncenter size-full wp-image-914" /></a></p>

<h3 id="details-about-the-implementation">Details about the implementation</h3>

<p>It turns out this is relatively easy to do, and is somewhat supported, at least in the latest Chrome and Safari 6. Note that it does work on iOS6, but not on iOS5, but the positioning is slightly different from the other implementations. No idea about Android, so I’ll leave that for someone else to find out. <img src="http://davidbcalhoun.com/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /></p>

<p>So how do we do it? First, we need the special WebKit CSS pseudoselector (<code>-webkit-search-cancel-button</code>), and secondly, we need to use that to wipe out the default WebKit styling (with -webkit-appearance: none;):</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="css"><span class="line"><span class="o">:</span><span class="nd">:-webkit-search-cancel-button</span> <span class="p">{</span>   <span class="o">//</span> <span class="n">select</span> <span class="n">all</span> <span class="s2">&quot;X&quot;</span> <span class="n">buttons</span> <span class="n">in</span> <span class="n">search</span> <span class="n">inputs</span>
</span><span class="line">    <span class="o">-</span><span class="n">webkit</span><span class="o">-</span><span class="n">appearance</span><span class="o">:</span> <span class="k">none</span><span class="p">;</span>      <span class="o">//</span> <span class="k">hide</span> <span class="n">the</span> <span class="k">default</span> <span class="s2">&quot;X&quot;</span> <span class="n">button</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>You would think that the next step might be adding our own custom background-image to this element, but unfortunately it won’t work that easily (of course).</p>

<p>What we need now is a little bit of trickery, using an <code>:after</code> pseudoclass on the pseduoclass (!?). The result is a bit of “pseudoclass Inception”:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
</pre></td><td class="code"><pre><code class="css"><span class="line"><span class="o">:</span><span class="nd">:-webkit-search-cancel-button</span> <span class="p">{</span>   <span class="c">/* select all &quot;X&quot; buttons in search inputs */</span>
</span><span class="line">    <span class="o">-</span><span class="n">webkit</span><span class="o">-</span><span class="n">appearance</span><span class="o">:</span> <span class="k">none</span><span class="p">;</span>      <span class="c">/* hide the default &quot;X&quot; button */</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line">
</span><span class="line"><span class="o">:</span><span class="nd">:-webkit-search-cancel-button:after</span> <span class="p">{</span>  <span class="c">/* generate content after all &quot;X&quot; buttons */</span>
</span><span class="line">    <span class="k">content</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>    <span class="c">/* required for :after content to show */</span>
</span><span class="line">    <span class="k">display</span><span class="o">:</span> <span class="k">block</span><span class="p">;</span>
</span><span class="line">
</span><span class="line">    <span class="c">/*</span>
</span><span class="line"><span class="c">     * Setup dimensions for the custom icon.  Note that these dimensions seem to</span>
</span><span class="line"><span class="c">     * affect positioning.</span>
</span><span class="line"><span class="c">     */</span>
</span><span class="line">    <span class="k">width</span><span class="o">:</span> <span class="m">14px</span><span class="p">;</span>
</span><span class="line">    <span class="k">height</span><span class="o">:</span> <span class="m">10px</span><span class="p">;</span>
</span><span class="line">
</span><span class="line">    <span class="c">/*</span>
</span><span class="line"><span class="c">     * Base64 encoded custom &quot;X&quot; icon</span>
</span><span class="line"><span class="c">     * Natively 30x30, but downscaled for highres screens</span>
</span><span class="line"><span class="c">     */</span>
</span><span class="line">    <span class="k">background-image</span><span class="o">:</span> <span class="sx">url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAn0lEQVR42u3UMQrDMBBEUZ9WfQqDmm22EaTyjRMHAlM5K+Y7lb0wnUZPIKHlnutOa+25Z4D++MRBX98MD1V/trSppLKHqj9TTBWKcoUqffbUcbBBEhTjBOV4ja4l4OIAZThEOV6jHO8ARXD+gPPvKMABinGOrnu6gTNUawrcQKNCAQ7QeTxORzle3+sDfjJpPCqhJh7GixZq4rHcc9l5A9qZ+WeBhgEuAAAAAElFTkSuQmCC)</span><span class="p">;</span>
</span><span class="line">
</span><span class="line">    <span class="c">/* setup all the background tweaks for our custom icon */</span>
</span><span class="line">    <span class="k">background-repeat</span><span class="o">:</span> <span class="k">no-repeat</span><span class="p">;</span>
</span><span class="line">
</span><span class="line">    <span class="c">/* icon size */</span>
</span><span class="line">    <span class="k">background</span><span class="o">-</span><span class="k">size</span><span class="o">:</span> <span class="m">10px</span><span class="p">;</span>
</span><span class="line">
</span><span class="line">    <span class="c">/* note: this positioning will need to be tweaked for iOS */</span>
</span><span class="line">    <span class="k">background-position</span><span class="o">:</span> <span class="k">top</span> <span class="k">left</span><span class="p">;</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>So it turns out you can still whatever you like in there really, even text content (see the last text input in the <a href="http://davidbcalhoun.com/a/webkit-search-cancel-button.html">demo</a>). You may even need to tweak the positioning a bit, in which case you can learn from the same example (you will need to set position:relative on the cancel button itself to anchor the position:absolute <code>:after</code> content - check out the code).</p>

<h3 id="final-notes">Final notes</h3>

<p>Note that this is just an experiment, not a robust use case that I’m recommending as a cross-browser solution (obviously, since it’s WebKit-only).</p>

<p>In the case of wanting to implement something similar cross-browser, I recommend absolutely-positioning a button element over an input element, then adding the appropriate right-padding to the input as necessary, then hooking up the “clear all text” behavior with the help of JavaScript.</p>

<h3 id="video">Video</h3>

<p>Here’s a video if you’re not in the mood to read (view in HD so you can read the text!):</p>

<iframe width="480" height="360" src="https://www.youtube.com/embed/3wyWJKJuo4o" frameborder="0" allowfullscreen=""></iframe>

</div>

</article>

	
	<div class="share">
	  <!-- <ul> -->
	  <!--   <li>
  <a href="https://twitter.com/intent/tweet?text=More fun with WebKit pseudoelements: -webkit-search-cancel-button (or: Pseudoclass Inception) by @&url=http://davidbcalhoun.com/2012/more-fun-with-webkit-pseudoelements-webkit-search-cancel-button-or-pseudoclass-inception" title="Share More fun with WebKit pseudoelements: -webkit-search-cancel-button (or: Pseudoclass Inception) on Twitter">
    <img src="/images/social/twitter.png" />
  </a>
</li>
 -->
	  <!--   <li>
  <a href="https://www.facebook.com/sharer.php?u=http://davidbcalhoun.com/2012/more-fun-with-webkit-pseudoelements-webkit-search-cancel-button-or-pseudoclass-inception" title="Share More fun with WebKit pseudoelements: -webkit-search-cancel-button (or: Pseudoclass Inception) on Facebook">
    <img src="/images/social/facebook.png" />
  </a>
</li>
 -->
	  <!--   <li>
  <a href="https://plus.google.com/share?url=http://davidbcalhoun.com/2012/more-fun-with-webkit-pseudoelements-webkit-search-cancel-button-or-pseudoclass-inception" title="Share More fun with WebKit pseudoelements: -webkit-search-cancel-button (or: Pseudoclass Inception) on Google Plus">
    <img src="/images/social/google.png" />
  </a>
</li>
 -->
	  <!-- </ul> -->
	</div>




<section id="comment">
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</section>
</div>
	<footer id="footer" class="inner" role="contentinfo"><br>
<br>
<br>
<br>
&copy; 2016
<a href="mailto:david.b.calhoun@gmail.com">David Calhoun</a> (<a href="https://twitter.com/franksvalli">@franksvalli</a>) - <a href="https://www.linkedin.com/in/davidcalhoun">LinkedIn</a> - <a href="http://themaingate.net/resume/">Resume</a></footer>
	<!-- <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script src="/javascripts/slash.js"></script> -->
<!-- <script src="/javascripts/hyphenator.js"></script> -->


<script type="text/javascript">
      var disqus_shortname = 'davidbcalhoun';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://davidbcalhoun.com/2012/more-fun-with-webkit-pseudoelements-webkit-search-cancel-button-or-pseudoclass-inception';
        var disqus_url = 'http://davidbcalhoun.com/2012/more-fun-with-webkit-pseudoelements-webkit-search-cancel-button-or-pseudoclass-inception';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>




<script src="/javascripts/main.js" defer></script>
<!-- <script src="/javascripts/negative-scroll-blur.js"></script> -->

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-5530615-3', 'davidbcalhoun.com');
  ga('send', 'pageview');

</script>

</body>
</html>
