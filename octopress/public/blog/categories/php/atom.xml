<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: php | David Calhoun]]></title>
  <link href="http://davidbcalhoun.com/blog/categories/php/atom.xml" rel="self"/>
  <link href="http://davidbcalhoun.com/"/>
  <updated>2017-01-01T00:48:27-08:00</updated>
  <id>http://davidbcalhoun.com/</id>
  <author>
    <name><![CDATA[David Calhoun]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[PHP: dealing with stuff that doesn&#8217;t exist]]></title>
    <link href="http://davidbcalhoun.com/2009/php-dealing-with-stuff-that-doesnt-exist"/>
    <updated>2009-12-01T00:00:00-08:00</updated>
    <id>http://davidbcalhoun.com/2009/php-dealing-with-stuff-that-doesnt-exist</id>
    <content type="html"><![CDATA[<h3 id="introduction">Introduction</h3>

<p>As the application you’re coding becomes more and more complex, there’s more of an opportunity for things to go wrong in all sorts of unforseen ways.  One of these problems is variables or functions that don’t exist.  The problem is when you code in such a way that you presuppose their existence. But their existence isn’t guaranteed!</p>

<p>A simple case of this happening is when you’re dealing with user input.  As it turns out, the user didn’t fill out a text field, but the variable for that text field still gets passed around as if it did exist.  More specifically, the variable gets set, but it gets set to an empty string (”).</p>

<h3 id="check-that-the-variable-isn8217t-empty">Check that the variable isn’t empty</h3>

<p>A common way of dealing with this is to check that the variable isn’t empty before using it:</p>

<pre name="code" class="PHP">$name = 'Joe';
if($name != '') {
	echo 'Hello ' . $name;
}</pre>

<p>This turns out to be ALMOST equivalent to the following, which uses <a href="http://www.php.net/manual/en/function.empty.php">empty()</a>:</p>

<pre name="code" class="PHP">$name = 'Joe';
if(!empty($name)) {  // make sure $name isn't empty
    echo 'Hello ' . $name;
}
</pre>

<p>However, as <a href="http://www.zachstronaut.com/posts/2009/02/09/careful-with-php-empty.html">Zachary Johnson</a> points out, empty($variable) evaluates to true when $variable=’0′, so you may want to avoid using this.</p>

<h3 id="check-that-the-variable-is-defined">Check that the variable is defined</h3>

<p>There’s another case we haven’t tried yet: what happens if we haven’t defined the variable?</p>

<pre name="code" class="PHP">error_reporting(E_ALL);
if($name != '') {
	echo 'Hello' . $name;
}</pre>

<p>Nothing catastrophic happens, but if we turn on error reporting, we can see that PHP is a bit upset. We get a notice that the variable $name is undefined, yet we’re trying to evaluate it. The value hasn’t been set yet. And there’s a function to check for that:</p>

<pre name="code" class="PHP">$name = 'Joe';
if(isset($name)) {
	echo 'Variable is set';
}</pre>

<p>We can combine what we’ve learned into the following:</p>

<pre name="code" class="PHP">$name = 'Joe';
if(isset($name) &#038;&#038; $name != '') {
	echo 'Hello ' . $name;
}</pre>

<p>There’s one neat thing here – if $name isn’t set, it evaluates the first part of the If condition as false (isset($name)) and doesn’t even look at the second part of the If condition ($name != ”). This is because it doesn’t matter what comes after, it will still evaluate to false (false &#038;&#038; true evaluates to false, and false &#038;&#038; false evaluates to false). Looking at the rest of the If condition is a waste of CPU cycles, so PHP doesn’t do it!</p>

<p>We can confirm this with the following code, which evaluates to false on the first If condition, then doesn’t even try to evaluate the call to a nonexisting function, and thus gives no errors:</p>

<pre name="code" class="PHP">if(false &#038;&#038; function_that_doesnt_exist()) {
	// do stuff here
}</pre>

<h3 id="check-if-a-function-exists">Check if a function exists</h3>

<p>For functions there’s a similar helper called <a href="http://us3.php.net/manual/en/function.function-exists.php">function_exists()</a>:</p>

<pre name="code" class="PHP">function my_function() { }
if(function_exists('my_function')) {
	my_function();
}</pre>

<p>And it doesn’t matter if your function is declared before or after you call it! Check it out – this works fine:</p>

<pre name="code" class="PHP">if(function_exists('my_function')) {
	my_function();
}
function my_function() { }</pre>

<h3 id="check-if-an-object8217s-method-exists">Check if an object’s method exists</h3>

<p>Similarly to checking if functions exist, we can check for the existence of functions belonging to an object (we call these the object’s methods) with <a href="http://php.net/manual/en/function.method-exists.php">method_exists()</a>:</p>

<pre name="code" class="PHP">// Create a test class
class myClass {
	// Create a test function
	public function my_function() {}
}

// Instantiate the class
$myObject = new myClass();

// Check to see if the test function exists
if(method_exists($myObject, 'my_function')) {
	// Do stuff here
}</pre>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[PHP Tidbit: Dead simple singleton]]></title>
    <link href="http://davidbcalhoun.com/2009/php-tidbit-dead-simple-singleton"/>
    <updated>2009-09-14T00:00:00-07:00</updated>
    <id>http://davidbcalhoun.com/2009/php-tidbit-dead-simple-singleton</id>
    <content type="html"><![CDATA[<pre name="code" class="php">class Singleton {
    private static $instance;
    public static function getInstance() {
        if(!isset(self::$instance)) {
            $c = __CLASS__;
            self::$instance = new $c();
        }
        return self::$instance;
    }
}</pre>

<p>And the explanation…</p>

<pre name="code" class="php">class Singleton {
    private static $instance;               // static variable to hold our 1 instance

    public static function getInstance() {  // function to get the 1 instance
        if(!isset(self::$instance)) {       // this will only run once (and instantiate once)
            $c = __CLASS__;                 // get the class (Singleton)
            self::$instance = new $c();     // instantiate the class and store it in our variable
        }
        return self::$instance;             // return the instance
    }

    public static function myFunction() {   // we can get to this through Singleton::getInstance()-&gt;myFunction()
        // ...
    }
}</pre>
]]></content>
  </entry>
  
</feed>
