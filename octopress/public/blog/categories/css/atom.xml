<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: css | David Calhoun]]></title>
  <link href="http://davidbcalhoun.com/blog/categories/css/atom.xml" rel="self"/>
  <link href="http://davidbcalhoun.com/"/>
  <updated>2017-03-11T11:38:47-08:00</updated>
  <id>http://davidbcalhoun.com/</id>
  <author>
    <name><![CDATA[David Calhoun]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[More fun with WebKit pseudoelements: -webkit-search-cancel-button (or: Pseudoclass Inception)]]></title>
    <link href="http://davidbcalhoun.com/2012/more-fun-with-webkit-pseudoelements-webkit-search-cancel-button-or-pseudoclass-inception"/>
    <updated>2012-08-10T00:00:00-07:00</updated>
    <id>http://davidbcalhoun.com/2012/more-fun-with-webkit-pseudoelements-webkit-search-cancel-button-or-pseudoclass-inception</id>
    <content type="html"><![CDATA[<h3 id="introduction">Introduction</h3>

<p><em>UPDATE</em> 2016: this appears to have even less support than before, and it's not recommended to be used on a production site.  Use a helper JS library instead.</p>

<p>(check out the <strong><a href="http://davidbcalhoun.com/a/webkit-search-cancel-button.html">Demo</a></strong>)</p>

<p>A while back I had a bit of a field day <a href="http://davidbcalhoun.com/2011/implementing-iphone-slider-unlock-with-input-type-range">messing around with input type=”range”</a>, trying to replicate the “unlock slider” on iOS using CSS, targeting special WebKit-only CSS pseudoelements such as webkit-slider-thumb.</p>

<p>Well, now I’m at it again, this time with a much simpler use case, trying to implement a custom “clear” button on search field inputs (note that this only works on input type=”search”):</p>

<p><a href="http://davidbcalhoun.com/a/webkit-search-cancel-button.html"><img src="http://davidbcalhoun.com/wp-content/uploads/2012/08/custom-webkit-search-cancel-button.png" alt="Custom webkit-search-cancel-button" title="Custom webkit-search-cancel-button" width="239" height="145" class="aligncenter size-full wp-image-914" /></a></p>

<h3 id="details-about-the-implementation">Details about the implementation</h3>

<p>It turns out this is relatively easy to do, and is somewhat supported, at least in the latest Chrome and Safari 6. Note that it does work on iOS6, but not on iOS5, but the positioning is slightly different from the other implementations. No idea about Android, so I’ll leave that for someone else to find out. <img src="http://davidbcalhoun.com/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /></p>

<p>So how do we do it? First, we need the special WebKit CSS pseudoselector (<code>-webkit-search-cancel-button</code>), and secondly, we need to use that to wipe out the default WebKit styling (with -webkit-appearance: none;):</p>

<pre><code class="language-css">    ::-webkit-search-cancel-button {   // select all "X" buttons in search inputs
        -webkit-appearance: none;      // hide the default "X" button
    }
</code></pre>

<p>You would think that the next step might be adding our own custom background-image to this element, but unfortunately it won’t work that easily (of course).</p>

<p>What we need now is a little bit of trickery, using an <code>:after</code> pseudoclass on the pseduoclass (!?). The result is a bit of “pseudoclass Inception”:</p>

<pre><code class="language-css">    ::-webkit-search-cancel-button {   /* select all "X" buttons in search inputs */
        -webkit-appearance: none;      /* hide the default "X" button */
    }

    ::-webkit-search-cancel-button:after {  /* generate content after all "X" buttons */
        content: '';    /* required for :after content to show */
        display: block;

        /*
         * Setup dimensions for the custom icon.  Note that these dimensions seem to
         * affect positioning.
         */
        width: 14px;
        height: 10px;
        
        /*
         * Base64 encoded custom "X" icon
         * Natively 30x30, but downscaled for highres screens
         */
        background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAn0lEQVR42u3UMQrDMBBEUZ9WfQqDmm22EaTyjRMHAlM5K+Y7lb0wnUZPIKHlnutOa+25Z4D++MRBX98MD1V/trSppLKHqj9TTBWKcoUqffbUcbBBEhTjBOV4ja4l4OIAZThEOV6jHO8ARXD+gPPvKMABinGOrnu6gTNUawrcQKNCAQ7QeTxORzle3+sDfjJpPCqhJh7GixZq4rHcc9l5A9qZ+WeBhgEuAAAAAElFTkSuQmCC);

        /* setup all the background tweaks for our custom icon */
        background-repeat: no-repeat;

        /* icon size */
        background-size: 10px;

        /* note: this positioning will need to be tweaked for iOS */
        background-position: top left;
    }
</code></pre>

<p>So it turns out you can still whatever you like in there really, even text content (see the last text input in the <a href="http://davidbcalhoun.com/a/webkit-search-cancel-button.html">demo</a>). You may even need to tweak the positioning a bit, in which case you can learn from the same example (you will need to set position:relative on the cancel button itself to anchor the position:absolute <code>:after</code> content - check out the code).</p>

<h3 id="final-notes">Final notes</h3>

<p>Note that this is just an experiment, not a robust use case that I’m recommending as a cross-browser solution (obviously, since it’s WebKit-only).</p>

<p>In the case of wanting to implement something similar cross-browser, I recommend absolutely-positioning a button element over an input element, then adding the appropriate right-padding to the input as necessary, then hooking up the “clear all text” behavior with the help of JavaScript.</p>

<h3 id="video">Video</h3>

<p>Here’s a video if you’re not in the mood to read (view in HD so you can read the text!):</p>

<iframe width="480" height="360" src="https://www.youtube.com/embed/3wyWJKJuo4o" frameborder="0" allowfullscreen=""></iframe>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Implementing iPhone's slider unlock with input type='range']]></title>
    <link href="http://davidbcalhoun.com/2011/implementing-iphone-slider-unlock-with-input-type-range"/>
    <updated>2011-01-16T00:00:00-08:00</updated>
    <id>http://davidbcalhoun.com/2011/implementing-iphone-slider-unlock-with-input-type-range</id>
    <content type="html"><![CDATA[<p>(check out the live <a href="http://davidbcalhoun.com/a/iphone-slider.html">demo</a>)</p>

<h3 id="introduction">Introduction</h3>

<p>After reading <a href="http://glazkov.com/2011/01/14/what-the-heck-is-shadow-dom/">“What the Heck is Shadow DOM?”</a> I was inspired to see how far I could style the <code>&lt;input type="range"&gt;</code> element. Pretty far, as it turns out!</p>

<p>My goal was to change the input’s default appearance:</p>

<p><img src="http://davidbcalhoun.com/wp-content/uploads/2011/01/input-range.png" alt="The default appearance for input type=range" title="The default appearance for input type=range" width="144" height="25" class="aligncenter size-full wp-image-567" /></p>

<p>To the visual appearance of the iPhone’s unlock slider:</p>

<p><img src="http://davidbcalhoun.com/wp-content/uploads/2011/01/iphone-slider-native.png" alt="The iPhone's unlock slider" title="The iPhone's unlock slider" width="300" height="69" class="aligncenter size-full wp-image-566" /></p>

<p>As far as I can tell, only WebKit-based browsers and Opera have implemented <code>input type=range</code>. Mobile Safari hasn’t yet implemented it as of iOS 4.2 and Android also hasn’t fully implemented it as of Android 2.3 (although curiously the elements are styleable but not yet interactive). Surprisingly, the only mobile OS to implement this input type seems to be BlackBerry OS 6.</p>

<p>However, the focus here will be to get this working on just Chrome and WebKit. This will make it a bit easier to do this proof of concept. So we’ll be using lots of `-webkit’ vendor prefixed CSS.</p>

<h3 id="what-we-have-to-work-with">What we have to work with</h3>

<p>Of course we have our simple range input:</p>

<pre><code class="language-html">&lt;input type="range"&gt;
</code></pre>

<p>Which looks like this:</p>

<p><img src="http://davidbcalhoun.com/wp-content/uploads/2011/01/input-range.png" alt="The default appearance for input type=range" title="The default appearance for input type=range" width="144" height="25" class="aligncenter size-full wp-image-567" /></p>

<p>We can target the input itself with a CSS attribute selector:</p>

<pre><code class="language-css">input[type='range'] {}
</code></pre>

<p>And if we want, we can transform it into a vertical slider by changing the <code>-webkit-appearance</code> property:</p>

<pre><code class="language-css">input[type='range'] {
    -webkit-appearance: slider-vertical;
}
</code></pre>

<p>Which looks like this:</p>

<p><img src="http://davidbcalhoun.com/wp-content/uploads/2011/01/input-range-vertical.png" alt="Input range in a vertical orientation" title="Input range in a vertical orientation" width="25" height="119" class="aligncenter size-full wp-image-579" /></p>

<p>If we want to style it as if it was any other element, there’s a slight catch, as we first have to set “-webkit-appearance” to “none” and then add our customizations (this appears to mean that we can’t actually style vertical sliders…). Here we’ll set the background color as a simple demo:</p>

<pre><code class="language-css">input[type='range'] {
    -webkit-appearance: none;
    background-color: gray;
}
</code></pre>

<p>This outputs the following:</p>

<p><img src="http://davidbcalhoun.com/wp-content/uploads/2011/01/input-range-gray-background.png" alt="Input range with a gray background" title="Input range with a gray background" width="129" height="15" class="aligncenter size-full wp-image-577" /></p>

<p>Most interestingly, we can target and style the slider button itself with CSS, although we can’t get access to it with JavaScript (for the time being anyhow). Here we’ll style it a slightly darker shade of gray:</p>

<pre><code class="language-css">input[type='range'] {
    -webkit-appearance: none;
    background-color: gray;
}

input[type='range']::-webkit-slider-thumb {
    -webkit-appearance: none;
    background-color: #444;
    width: 15px;
    height: 20px;
}
</code></pre>

<p>Which results in this:  <br />
<img src="http://davidbcalhoun.com/wp-content/uploads/2011/01/input-range-styled.png" alt="Input range with a gray background and a slightly darker slider control" title="Input range with a gray background and a slightly darker slider control" width="129" height="20" class="aligncenter size-full wp-image-583" /></p>

<p>Now all the pieces are in place to fully style the input!</p>

<h3 id="styling-the-background">Styling the background</h3>

<p>This part’s no big deal. We just want to set up the width/height, slap on some handy rounded corners, and add a very slight background gradient:</p>

<pre><code class="language-css">input[type='range'] {
    -webkit-appearance: none;
    width: 280px;
    height: 46px;
    padding: 3px;
    -webkit-border-radius: 15px;
    border-radius: 15px;
    border: 1px solid #525252;
    background-image: -webkit-gradient(
        linear,
        left top,
        left bottom,
        color-stop(0, #000000),
        color-stop(1, #222222)
    );
}
</code></pre>

<p>Now we have the backdrop in place:</p>

<p><img src="http://davidbcalhoun.com/wp-content/uploads/2011/01/iphone-slider-background.png" alt="iPhone slider background" title="iPhone slider background" width="288" height="54" class="aligncenter size-full wp-image-585" /></p>

<h3 id="styling-the-button">Styling the button</h3>

<p>To get the button, we’ll add some width/height and rounded corners. Here we’ll also need a more complicated background gradient as well as an arrow icon. Your first instinct might be to add more markup to hook the arrow icon to, but remember that this is impossible. We’re working in the “shadow DOM” of elements created and maintained by the browser itself. We can style the existing elements but we can’t create any new ones.</p>

<p>So what do we do? Take advantage of multiple backgrounds! We can specify the background as both the arrow image and the gradient we need. In this case we’ll also base64 encode the small image to avoid an extra HTTP request.</p>

<p>The CSS for the button looks like this:</p>

<pre><code class="language-css">input[type='range']::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 68px;
    height: 44px;
    -webkit-border-radius: 10px;
    border-radius: 10px;
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAYCAYAAAB0kZQKAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAASJJREFUeNpi7OnpYaAC0AXiF0D8mhzNTAzUASBHnAdim4F0BAhIA/EBIC4aSEeAADMQ9wLxRiDmHyhHwIAfNHqMiXZEcXExGJMCiNCjCMTHgDiTkFmM////p4rXe3t78Rm0DIjTgfgLNkkWoGZQij7MQFsQBY2aICC+Rq80gQ2oA/EZIE4YSEeAACcQzwfimVD2gDgCBtKgiVZlIB0BAgbQbBwykI5A5I4BtPsaNLfcHKiQWADEJiAHDERIfAfiLKgjBiQ67kCD/zK2NAFqjMyi0AJQVnPCI78GiBNxFttQF6ZToVjG5ohfoLoOiKcMVO54BA3+swPVntgKxIbEOIAWjvgLxJVA7APE7waisHoKxBFAfGSgSszL0MLnBTmaAQIMAKg/OsrT7JG8AAAAAElFTkSuQmCC'),
    -webkit-gradient(
        linear,
        left top,
        left bottom,
        color-stop(0, #fefefe),
        color-stop(0.49, #dddddd),
        color-stop(0.51, #d1d1d1),
        color-stop(1, #a1a1a1)
    );
    background-repeat: no-repeat;
    background-position: 50%;
}
</code></pre>

<p>Which outputs this:  <br />
<img src="http://davidbcalhoun.com/wp-content/uploads/2011/01/iphone-slider-button.png" alt="" title="iPhone slider button styled" width="288" height="54" class="aligncenter size-full wp-image-587" /></p>

<h3 id="slide-to-unlock-text">“Slide to unlock” text</h3>

<p>Now we’re getting somewhere! And now we’re approaching the limits of what we can do without getting pretty creative. We need some “slide to unlock” text in the background.</p>

<p>The first thing to do is to move the slider all the way to the left, to the default position. We do this through HTML by setting the value to 0:</p>

<pre><code class="language-html">&lt;input type="range" value="0"&gt;
</code></pre>

<p>Ok, that wasn’t too hard. But what about the text? We can’t modify anything in the input itself, because it doesn’t contain any element to display text. And we can’t dynamically add text with JavaScript, because again, it’s the shadow DOM! What we can do is create a separate text element outside of the input and position it on top of the slider using absolute positioning.</p>

<p>But this would be no good, since the text would appear over the button itself. What we want is for the text to show up in-between the button and the background. Since we can style both of these with CSS, we can control the stacking order with good old z-index!</p>

<p>And while we’re at it, we might as well animate the “spotlight” effect on the text. We can do this with a combination of a semitransparent -webkit-mask and animations (see below).</p>

<p>First we have the HTML, which has changed a bit. For positioning and grouping, we need a wrapped element for the input and the span of text:</p>

<pre><code class="language-html">&lt;div class="iphone-slider"&gt;
    &lt;input type="range" value="0"&gt;&lt;/input&gt;
    &lt;span&gt;slide to unlock&lt;/span&gt;
&lt;/div&gt;
</code></pre>

<p>The final complete CSS is as follows:</p>

<pre><code class="language-css">.iphone-slider {
    width: 280px;
    height: 46px;
    
    /* set the wrapper as the anchor element for positioning */
    position: relative;
}

.iphone-slider input {
    -webkit-appearance: none;
    width: 100%;
    background: #ddd;
    padding: 3px;
    border: 1px solid #525252;
    -webkit-border-radius: 15px;
    border-radius: 15px;
    background-image: -webkit-gradient(
        linear,
        left top,
        left bottom,
        color-stop(0, #000000),
        color-stop(1, #222222)
    );
}

.iphone-slider input::-webkit-slider-thumb {
    -webkit-appearance: none;
    
    /* position the button on top of everything */
    z-index: 100;
    position: relative;
    
    width: 68px;
    height: 44px;
    -webkit-border-radius: 10px;
    border-radius: 10px;
    
    /* arrow and button gradient */
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAYCAYAAAB0kZQKAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAASJJREFUeNpi7OnpYaAC0AXiF0D8mhzNTAzUASBHnAdim4F0BAhIA/EBIC4aSEeAADMQ9wLxRiDmHyhHwIAfNHqMiXZEcXExGJMCiNCjCMTHgDiTkFmM////p4rXe3t78Rm0DIjTgfgLNkkWoGZQij7MQFsQBY2aICC+Rq80gQ2oA/EZIE4YSEeAACcQzwfimVD2gDgCBtKgiVZlIB0BAgbQbBwykI5A5I4BtPsaNLfcHKiQWADEJiAHDERIfAfiLKgjBiQ67kCD/zK2NAFqjMyi0AJQVnPCI78GiBNxFttQF6ZToVjG5ohfoLoOiKcMVO54BA3+swPVntgKxIbEOIAWjvgLxJVA7APE7waisHoKxBFAfGSgSszL0MLnBTmaAQIMAKg/OsrT7JG8AAAAAElFTkSuQmCC'),
    -webkit-gradient(
        linear,
        left top,
        left bottom,
        color-stop(0, #fefefe),
        color-stop(0.49, #dddddd),
        color-stop(0.51, #d1d1d1),
        color-stop(1, #a1a1a1)
    );
    background-repeat: no-repeat;
    background-position: 50%;
}

.iphone-slider span {
    /* position the text just under the button in the stacking order */
    position: absolute;
    z-index: 99;
    top: 30%;
    left: 37%;
    
    font-family: "Helvetica Neue", Helvetica, sans;
    font-size: 24px;
    color: white;
    cursor: default;
    -webkit-user-select: none;
    
    /* semitransparent gradient mask to animate over the text */
    -webkit-mask-image: -webkit-gradient(
        linear,
        left top,
        right top,
        color-stop(0, rgba(0,0,0,0.3)),
        color-stop(0.45, rgba(0,0,0,0.3)),
        color-stop(0.5, rgba(0,0,0,1)),
        color-stop(0.55, rgba(0,0,0,0.3)),
        color-stop(1, rgba(0,0,0,0.3))
    );
    -webkit-mask-size: 1000px;
    -webkit-mask-repeat: no-repeat;
    -webkit-animation-timing-function: ease-in-out;
    -webkit-animation: text-spotlight 4s infinite;
}

/* animate the webkit-mark over the text */
@-webkit-keyframes text-spotlight {
  0% {
    -webkit-mask-position: -800px;
  }
  
  100% {
    -webkit-mask-position: 0px;
  }
}
</code></pre>

<p>This renders as the following:</p>

<p><img src="http://davidbcalhoun.com/wp-content/uploads/2011/01/iphone-slider-mask.png" alt="" title="The final result" width="288" height="52" class="aligncenter size-full wp-image-589" /></p>

<p>Which looks pretty dang close the the native iPhone slider if I do say so myself! (perhaps the arrow could use some box-shadow to make it pop a bit more however).</p>

<h3 id="just-a-bit-of-javascript">Just a bit of JavaScript</h3>

<p>Since we’ve come this far, we might as well make the experience as authentic as possible. Here I’ve thrown in some JavaScript to check if the slider has been fully moved to the right, giving the user notification that the phone is unlocked.</p>

<p>Also, you’ll notice the opacity of the text slowly fade as the slider is moved farther to the right. This mimics the actual experience on the iPhone.</p>

<p>Here’s the JavaScript to make this work:</p>

<pre><code class="language-javascript">(function() {
  // variable declarations
  var slider, sliderInput, sliderButton, sliderText, sliderTimeout, sliderOnchange, unlockCheck;
  
  // cache our DOM elements in variables
  slider = document.querySelector('.iphone-slider');
  sliderInput = slider.querySelector('input');
  sliderButton = sliderInput.querySelector('::-webkit-slider-thumb');
  sliderText = slider.querySelector('span');
  
  /*
      Check if it's been unlocked, else return the
      button back to the left side (default position).
  */
  unlockCheck = function() {
    if(sliderInput.value == 100) {
      sliderText.innerHTML = 'Unlocked!';
      sliderInput.value = 0;
      sliderText.style.opacity = 1;
    } else {
      setTimeout(function(){
        sliderInput.value = 0;
        sliderText.style.opacity = 1;
      }, 1000);
    }
  };
  
  sliderOnchange = function() {
    /*
        Set the opacity of the text relative to the value
        on the input range.
    */
    sliderText.style.opacity = ((100 - sliderInput.value) / 200);
    
    /*
        Add a timeout to prevent the function from being called
        on EVERY onchange event.
    */
    clearTimeout(sliderTimeout);
    sliderTimeout = setTimeout(unlockCheck, 300);
  }
  
  slider.onchange = sliderOnchange;
})();
</code></pre>

<h3 id="live-example">Live example</h3>

<p>Here’s a <a href="http://www.youtube.com/watch?v=lC_pcRZgNm0">video</a> of the slider in action:</p>

<p>If you’re running Safari or Chrome, you should be able to see and interact with the <a href="http://davidbcalhoun.com/a/iphone-slider.html">standalone demo</a>.</p>

<p>Sweet! Well, that was fun! This was some good practice of using a ton of good stuff: border radius, gradients, multiple backgrounds, data URI images, webkit-mask-image, webkit-animation, and of course styleable input ranges via webkit-slider-thumb.</p>

<p>UPDATE: <a href="http://peter.sh/2011/05/inspectable-shadow-dom-the-file-browser-and-new-default-avatars/">Chrome has now made the shadow DOM inspectable</a>.</p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Does it still make sense to use em rather than px?]]></title>
    <link href="http://davidbcalhoun.com/2010/does-it-still-make-sense-to-use-em-rather-than-px"/>
    <updated>2010-10-05T00:00:00-07:00</updated>
    <id>http://davidbcalhoun.com/2010/does-it-still-make-sense-to-use-em-rather-than-px</id>
    <content type="html"><![CDATA[<p>Alex Kessinger <a href="http://twitter.com/voidfiles/status/26470129747">tweeted</a> asking if there was a reason to still use EMs instead of PX measurements in mobile. This is an interesting question, but 140 characters isn’t quite enough to explain my thoughts. So here’s an old-fashioned blog post!</p>

<p>Just a quick review: em and percentage (%) units in CSS are relative measurements, whereas px and other measurements are not. What this means is that the resulting size of relative measurements depends on the size of the parent.</p>

<h3 id="the-original-reason-to-use-ems-instead-of-px-measurements">The original reason to use EMs instead of PX measurements</h3>

<p>As far as I can tell, the original reason why it became a good practice to use EMs was because of page scaling and accessibility reasons. When developers used PX measurements, they found that when the page was scaled (using Ctrl + Scroll Wheel), the parts of the page with fixed PX measurements didn’t scale.</p>

<p>Oh no! So when a user with poor eyesight tried to scale a page to read the text better, it turns out that the text they were interesting in making bigger actually didn’t change size at all!</p>

<p>So is this still the case today? By and large, no. All modern browsers except IE6 will now scale pages correctly, regardless of the type of CSS units used.</p>

<p>From what I’ve heard, there are still many users with disabilities using IE6, but the reason is because they don’t want to upgrade their copy of the screen reader JAWS, which is quite expensive. However, these users obviously aren’t affected by page scaling issues because they are blind.</p>

<h3 id="maintainability-concerns">Maintainability concerns</h3>

<p>Even if the original reason to use EMs (above) is no longer valid, I still believe there are good reasons to use them.</p>

<p>One of the main reasons is maintainability. If a page is designed to have one base font size (applied to the Body) and all other font sizes on the page use relative units (EMs or percentages), changing the font sizes later becomes almost trivial. If someone wants to later increase the size of the fonts on their entire page, all they need to do is increase the one base font size.</p>

<p>This might be a bit of an edge case, but the elegance of the solution is too enticing!</p>

<h3 id="media-queries-and-mobile">Media queries and mobile</h3>

<p>Very closely related to the above point is the subject of media queries. Recently media queries have been somewhat hailed as a <a href="http://www.quirksmode.org/blog/archives/2010/09/rethinking_the.html">panacea for all mobile development</a>. I slightly disagree, but that’s a topic for another post!</p>

<p>The main point here is that people are now using media queries to quickly make mobile-friendly versions of their desktop websites. That’s awesome, there’s no doubt about that.</p>

<p>So what about EMs and PX measurements? Here’s the problem: if a developer coded their webpage in such a way that they used fixed pixel measurements, the amount of CSS required in the mobile media query could be obscenely large. This is because each individual element with pixel measurement was <em>designed with the desktop in mind</em>! This makes the task of adapting to different content very painful.</p>

<p>On the other hand, think about a page designed with relative units such as EMs or percentages. This page was designed so that each element was proportional to its parent element, so that ideally changing the size of the entire page occurs in only a few places, at the Body level of the document. Suddenly the CSS required for the mobile media query is much more manageable, since it’s now (ideally) only changing a few values on the Body element, not on <em>every</em> element on the page.</p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Targeting Internet Explorer (IE): the age-old struggle]]></title>
    <link href="http://davidbcalhoun.com/2010/targeting-ie-the-age-old-struggle"/>
    <updated>2010-07-07T00:00:00-07:00</updated>
    <id>http://davidbcalhoun.com/2010/targeting-ie-the-age-old-struggle</id>
    <content type="html"><![CDATA[<p>As long as I can remember, developers have always been trying to target IE one way or another. Thanks to the wonders of modern technology, there have been multiple ways to pull this off.</p>

<p>I guess I really haven’t been keeping up with the latest frontend trends (doh!), as I’ve just recently discovered this very elegant solution circa 2008 offered by <a href="http://paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/">Paul Irish</a>, which sticks a class on the body tag using proprietary conditional IE tags (no JavaScript magic needed here!):</p>

<pre name="code" class="html">&lt;!--[if lt IE 7 ]&gt; &lt;body class="ie6"&gt; &lt;![endif]--&gt;
&lt;!--[if IE 7 ]&gt;    &lt;body class="ie7"&gt; &lt;![endif]--&gt;
&lt;!--[if IE 8 ]&gt;    &lt;body class="ie8"&gt; &lt;![endif]--&gt;
&lt;!--[if IE 9 ]&gt;    &lt;body class="ie9"&gt; &lt;![endif]--&gt;
&lt;!--[if gt IE 9]&gt;  &lt;body&gt;             &lt;![endif]--&gt;
&lt;!--[if !IE]&gt;&lt;!--&gt; &lt;body&gt;         &lt;!--&lt;![endif]--&gt;
</pre>

<p>No need for creating multiple stylesheets for each version of IE (that makes extra network requests… boo)! Now you can add adjustments to your main stylesheet just as you would with CSS hacks, except now you’re doing it in a not-so-hacky way.</p>

<p>For instance, if you have some peculiar CSS quirk in IE6, you simply apply a fix like this:</p>

<pre name="code" class="css">.some-element { width: 200px; }         /* standards-based browsers */
.ie6 .some-element { width: 160px; }  /* elegant ie6 fix! */
</pre>

<h3 id="the-old-way-css-hacks">The old way: CSS hacks</h3>

<p>Previously I considered some CSS hacks the most elegant solution, but that was in the days when IE6/7 ruled. You can see that the following CSS hack gets really unruly for IE8 (that hack thanks to <a href="http://my.opera.com/dbloom/blog/2009/03/11/css-hack-for-ie8-standards-mode">David Bloom</a>):</p>

<pre name="code" class="css">.some-element {
    width: 200px;                /* standards-based browsers */
    /* some yet-to-be-determined IE9 hack goes here */
    width /*\**/: 180px\9        /* targets IE8 standards mode */
    *width: 170px;               /* targets IE7/IE6 */
    _width: 160px;               /* targets IE6 */
}
</pre>

<p>This works, but becomes quite difficult to maintain and understand. And it just creates a need for someone to find yet another hack for each new version of IE that’s released. By using the IE conditional comments to add a class to the body tag, we can accomplish the same result in a way that is easier to read and maintain and is dead simple to update when a new version of IE is released:</p>

<pre name="code" class="css">.some-element { width: 200px; }
.ie9 .some-element { width: 190px; }
.ie8 .some-element { width: 180px; }
.ie7 .some-element { width: 170px; }
.ie6 .some-element { width: 160px; }
</pre>

<p>Woohoo!</p>

<h3 id="related-links">Related links</h3>

<p><a href="http://www.phpied.com/conditional-comments-block-downloads/">Conditional comments block downloads</a>: Stoyan Stefanov’s concerns over using this pattern</p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Using mobile-specific HTML, CSS, and JavaScript (Mobile web part 5)]]></title>
    <link href="http://davidbcalhoun.com/2010/using-mobile-specific-html-css-javascript"/>
    <updated>2010-06-29T00:00:00-07:00</updated>
    <id>http://davidbcalhoun.com/2010/using-mobile-specific-html-css-javascript</id>
    <content type="html"><![CDATA[<p><em>(updated June 27, 2011)</em></p>

<h3 id="mobile-specific-html">Mobile-specific HTML</h3>

<h4 id="viewport-tag">Viewport tag</h4>

<p>Use the <a href="http://davidbcalhoun.com/2010/viewport-metatag">viewport tag</a> to properly fit the content to the screen:</p>

<pre><code class="language-html">    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"/&gt;
</code></pre>

<h4 id="tel-scheme2-to-initiate-phone-calls"><a href="http://www.rfc-editor.org/rfc/rfc3966.txt">Tel scheme</a> (to initiate phone calls)</h4>

<pre><code class="language-html">    &lt;a href="tel:18005555555"&gt;Call us at 1-800-555-5555&lt;/a&gt;
</code></pre>

<h4 id="sms-scheme3-to-initiate-text-messages"><a href="http://www.rfc-editor.org/rfc/rfc5724.txt">Sms scheme</a> (to initiate text messages)</h4>

<pre><code class="language-html">    &lt;a href="sms:18005555555"&gt;
    &lt;a href="sms:18005555555,18005555556"&gt;                &lt;!-- multiple recipients --&gt;
    &lt;a href="sms:18005555555?body=Text%20goes%20here"&gt;    &lt;!-- predefined message body --&gt;
</code></pre>

<h4 id="disable-automatic-telephone-number-linking">Disable automatic telephone number linking</h4>

<pre><code class="language-html">    &lt;meta name="format-detection" content="telephone=no"&gt;
</code></pre>

<h4 id="ios-specific-html-some-work-on-android-as-well">iOS-specific HTML (some work on Android as well)</h4>

<p>You also have access to several <a href="http://developer.apple.com/library/safari/#documentation/appleapplications/reference/safariwebcontent/configuringwebapplications/configuringwebapplications.html">Apple-specific tags to use in your iOS applications (iPhone, iPad, and don’t forget the iPod Touch!)</a>.</p>

<pre><code class="language-html">    &lt;!-- iOS 1.1.3+: this is the icon that's used when the user adds your app to the home screen --&gt;

    &lt;!-- also works on Android! --&gt;
    &lt;link rel="apple-touch-icon" href="icon.png" /&gt;

    &lt;!-- iOS 2.0+: tell iOS not to apply any glare effects to the icon --&gt;
    &lt;link rel="apple-touch-icon-precomposed" href="icon.png" /&gt;

    &lt;!-- iOS 4.2+ icons for different resolutions --&gt;
    &lt;link rel="apple-touch-icon" sizes="72x72" href="touch-icon-ipad.png" /&gt;
    &lt;link rel="apple-touch-icon" sizes="114x114" href="touch-icon-iphone4.png" /&gt;

    &lt;!-- iOS 3+: full-screen startup splash screen image (must be 320x460) --&gt;
    &lt;link rel="apple-touch-startup-image" href="startup.png" /&gt;

    &lt;!-- enable full-screen mode (only when launched from home screen) --&gt;
    &lt;meta name="apple-mobile-web-app-capable" content="yes" /&gt;

    &lt;!-- controls the appearance of the status bar in full-screen mode --&gt;
    &lt;meta name="apple-mobile-web-app-status-bar-style" content="black" /&gt;
</code></pre>

<h4 id="turn-off-autocorrect-autocomplete-and-autocapitalize">Turn off autocorrect, autocomplete, and autocapitalize</h4>

<p>And also some handy attributes to turn off annoying autocorrect features:</p>

<pre><code class="language-html">    &lt;input autocorrect="off" autocomplete="off" autocapitalize="off"&gt;
</code></pre>

<h3 id="mobile-specific-css">Mobile-specific CSS</h3>

<h4 id="positionfixed-and-overflowscroll">position:fixed and overflow:scroll</h4>

<p>Mobile browsers are now starting to support these basic CSS properties better. Position:fixed will work on Android 2.2+ and iOS 5+. Overflow:scroll works with one finger on iOS 5+.</p>

<p>Also, iOS 5 has additional CSS to give the native scrollbar and momentum/intertia to elements with overflow:scroll:</p>

<pre><code class="language-css">    div {
      -webkit-overflow-scrolling: touch;
    }
</code></pre>

<h4 id="media-queries">Media queries</h4>

<p><a href="http://www.w3.org/TR/css3-mediaqueries/">Media queries</a> enable you to target specific features (screen width, orientation, resolution) within CSS itself. Media queries themselves are actually quite old and are not mobile specific (they used to be popular for making a print-friendly version of webpages).</p>

<p>You can use them two ways: 1) inline in a CSS stylesheet or 2) as the “media” attribute in the link tag, which loads an external stylesheet. The following is an example of inline CSS that’s applied only when the device is in portrait mode:</p>

<pre><code class="language-css">    @media all and (orientation: portrait) {
      body { }
      div { }
    }
</code></pre>

<p>Here’s the same media query using the other method, which points to an external stylesheet (not recommended):</p>

<pre><code class="language-html">    &lt;link rel="stylesheet" media="all and (orientation: portrait)" href="portrait.css" /&gt;
</code></pre>

<p>This is not recommended because it creates an additional HTTP request (bad for performance). Also, in the case of screen orientation, the separate CSS stylesheet is NOT downloaded when the screen is rotated.</p>

<p>Here’s a few examples of using inline CSS:</p>

<pre><code class="language-css">    // target small screens (mobile devices or small desktop windows)
    @media only screen and (max-width: 480px) {
      /* CSS goes here */
    }

    /* high resolution screens */
    @media (-webkit-min-device-pixel-ratio: 2),
                 (min--moz-device-pixel-ratio: 2),
                 (min-resolution: 300dpi) {
      header { background-image: url(header-highres.png); }
    }

    /* low resolution screens */
    @media (-webkit-max-device-pixel-ratio: 1.5),
                 (max--moz-device-pixel-ratio: 1.5),
                 (max-resolution: 299dpi) {
      header { background-image: url(header-lowres.png); }
    }
</code></pre>

<p>Read more: <a href="https://developer.mozilla.org/en/css/media_queries">Media queries (Mozilla Developer Center)</a></p>

<h4 id="miscellaneous-css">Miscellaneous CSS</h4>

<ul>
  <li>
    <p><code>-webkit-tap-highlight-color</code> (iOS): override the semitransparent color overlay when a user clicks a link or clickable element. To completely disable it, set the value to ‘transparent’ or ‘rgba(0,0,0,0)’</p>
  </li>
  <li>
    <p><code>-webkit-user-select: none;</code> - prevent the user from selecting text (also works on desktop WebKit)</p>
  </li>
  <li>
    <p><code>-webkit-touch-callout: none;</code> - prevent the callout toolbar from appearing when a user touches and holds an element such as an anchor tag.</p>
  </li>
</ul>

<h3 id="mobile-specific-javascript">Mobile-specific JavaScript</h3>

<h4 id="windowscrollto00"><code>window.scrollTo(0,0);</code></h4>

<p>This hides the address bar and takes advantage of the entire device screen. You’ll have to set this in a timeout and make sure to get the timing right. See <a href="http://remysharp.com/2010/08/05/doing-it-right-skipping-the-iphone-url-bar/">Remy Sharp’s post</a> for more details.</p>

<h4 id="windowmatchmedia"><code>window.matchMedia()</code></h4>

<p>(iOS 5+) Again, just as CSS media queries aren’t specific to mobile, they do come in especially useful for mobile, so it’s worth mentioning their JavaScript counterpart. window.matchMedia() is a JavaScript-based version of media queries. You can use <a href="https://github.com/scottjehl/Respond">respond.js</a> as a polyfill for devices that don’t support this functionality natively.</p>

<h4 id="navigatorconnection"><code>navigator.connection</code></h4>

<p>(Android 2.2+) Determine if the phone is running on WiFi, 3G, etc. Example:</p>

<pre><code class="language-javascript">    if (navigator.connection.type==navigator.connection.WIFI) {
      // code for WiFi connections (high-bandwidth)
    }
</code></pre>

<h4 id="windowdevicepixelratio"><code>window.devicePixelRatio</code></h4>

<p>Determine screen resolution (analogue to the CSS media query). (iPhone 4 has the value 2, while Nexus One has the value 1.5).</p>

<h4 id="windownavigatoronline"><code>window.navigator.onLine</code></h4>

<p>Not strictly mobile, but helpful for apps to determine if they’re being run offline.</p>

<h4 id="windownavigatorstandalone"><code>window.navigator.standalone</code></h4>

<p>(iOS 2.1+): determine if it’s running in full-screen mode</p>

<h4 id="touch-and-gesture-events">Touch and gesture events</h4>

<ul>
  <li>
    <p><a href="http://developer.apple.com/safari/library/documentation/appleapplications/reference/safariwebcontent/handlingevents/handlingevents.html">touch events (iOS, Android 2.2+)</a>: touchstart, touchmove, touchend, touchcancel</p>
  </li>
  <li>
    <p><a href="http://developer.apple.com/safari/library/documentation/internetweb/conceptual/safarivisualeffectsprogguide/InteractiveVisualEffects/InteractiveVisualEffects.html">gesture events (Apple only, iOS 2+)</a>: gesturestart, gesturechange, gesturend give access to predefined gestures (rotation, scale, position)</p>
  </li>
</ul>

<h4 id="screen-orientation-every-90-degrees">Screen orientation (every 90 degrees)</h4>

<ul>
  <li><a href="http://ajaxian.com/archives/iphone-windowonorientationchange-code">orientationchange event</a>: triggered every 90 degrees of rotation (portrait and landscape modes). The current orientation is available through window.orientation</li>
</ul>

<h4 id="device-orientation-more-fine-grained">Device orientation (more fine-grained)</h4>

<p>The <a href="http://frontendstuff.com/javascript/examples/deviceorientation.html">deviceorientation event</a> will fire very frequently, and gives more fine-grained information about the device’s orientation in three dimensions.  <br />
<a href="https://developer.mozilla.org/en/Detecting_device_orientation">MozOrientation</a> (or onmozorientation?) (Fennec/Firefox Mobile, Firefox 3.5+): also not strictly mobile. Gives access to the device’s accelerometer (x-y-z orientation data), updated periodically. Works on Android phones running Mobile Firefox. On the desktop this works with laptops such as Thinkpads and MacBooks.</p>

<h4 id="devicemotion-shake-gestures-etc">devicemotion (shake gestures, etc.)</h4>

<ul>
  <li><a href="http://frontendstuff.com/javascript/examples/devicemotion.html">devicemotion</a> fires when the user shakes or moves their device. Devicemotion taps into the accelerometer, which is fires off when the device accelerates. Contrast this with the deviceorientation event, which taps into the device’s gyroscope (if it has one), which only measures the 3D angle orientation, even when the device is at rest.</li>
</ul>

<h4 id="media-capture-api">Media capture API</h4>

<p>While iOS is still lacking basic file inputs, Android is forging ahead, giving developers fine-grained control over content users can upload.</p>

<pre><code class="language-html">    &lt;!-- regular file upload (Android 2.2+, NO iOS) --&gt;
    &lt;input type="file"&gt;&lt;/input&gt;

    &lt;!-- opens directly to the camera (Android 3.0+) --&gt;
    &lt;input type="file" accept="image/*;capture=camera"&gt;&lt;/input&gt;

    &lt;!-- opens directly to the camera in video mode (Android 3.0+) --&gt;
    &lt;input type="file" accept="video/*;capture=camcorder"&gt;&lt;/input&gt;

    &lt;!-- opens directly to the audio recorder (Android 3.0+) --&gt;
    &lt;input type="file" accept="audio/*;capture=microphone"&gt;&lt;/input&gt;
</code></pre>

<h4 id="blackberry-specific">BlackBerry specific</h4>

<p>If you’re developing for a BlackBerry Widget, you have access to proprietary information through the <a href="http://www.blackberry.com/developers/docs/widgetapi/Summary_system.html">blackberry object</a> (which gives access to useful information such as blackberry.network [returns values such as CDMA and Wi-Fi] and blackberry.system).</p>

<p>You also have the option to use <a href="http://phonegap.com/">PhoneGap</a>, which augments JavaScript and gives you access to more phone features that native apps would have access to.</p>

<h3 id="use-a-mobile-optimized-javascript-library">Use a mobile-optimized JavaScript library</h3>

<p>I’ve created <a href="http://davidbcalhoun.com/2010/mobile-javascript-libraries-and-frameworks">a separate entry for the available mobile libraries and frameworks</a>.</p>

<p>Because smartphone browsers are standards-based, the aim of a JavaScript library on mobile is less towards API normalization and more towards providing an actual UI framework, usually to emulate the feel of native apps (and to provide easier workarounds to <a href="http://doctyper.com/archives/200808/fixed-positioning-on-mobile-safari/">lack of access to position:fixed</a>). We’ve seen a few libraries released that emulate the iPhone UI, and in the future we might see libraries emulating the Android UI, as well as entirely new UIs.</p>

<p>There’s also a bit to be said about simply loading full desktop JavaScript libraries into mobile clients. In my opinion this doesn’t particularly make sense, especially in a world where latency and bandwidth are so much more of a concern. It doesn’t make sense to force the user wait longer and download code that’s ultimately useless to them (hacks for desktop browsers such as IE 6, etc).</p>

<h3 id="take-advantage-of-new-stuff">Take advantage of new stuff!</h3>

<p>While not specific to mobile, there’s a lot of new stuff in general that you can use. If you limit yourself to the top smartphones (iPhone, Android, and maybe webOS), compared to the desktop you immediately have access to an even wider array of new stuff, especially many Webkit proprietary features, since most of these top smartphones have browsers based on Webkit.</p>

<p>-HTML: new tags (<a href="http://diveintohtml5.org/">HTML5</a> (I’m sure you’ve heard of it by now…))  <br />
-CSS: <a href="http://webkit.org/blog/130/css-transforms/">2d transforms</a>, <a href="http://webkit.org/blog/386/3d-transforms/">3d transforms</a>, animation, <a href="http://border-radius.com/">border radius</a>, <a href="https://developer.mozilla.org/en/css/@font-face">custom fonts with @font-face</a>, etc.  <br />
-JavaScript: <a href="http://ejohn.org/blog/ecmascript-5-strict-mode-json-and-more/">strict mode</a>, <a href="https://developer.mozilla.org/en/Core_JavaScript_1.5_Guide/Core_Language_Features#Constants">constants</a>, <a href="http://davidbcalhoun.com/2009/javascript-tidbit-block-scope-with-let">block scope</a>, <a href="https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Objects/Date">Date.now()</a>, etc.</p>

<h3 id="slides">Slides</h3>

<iframe src="http://www.slideshare.net/franksvalli/slideshelf" width="615px" height="470px" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" style="border:none;" allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen=""></iframe>

<div style="width:425px" id="__ss_7424222">
    <strong style="display:block;margin:12px 0 4px"><a href="http://www.slideshare.net/franksvalli/mobile-html-css-and-javascript" title="Mobile HTML, CSS, and JavaScript">Mobile HTML, CSS, and JavaScript</a></strong> <div style="padding:5px 0 12px">
    View more <a href="http://www.slideshare.net/">presentations</a> from <a href="http://www.slideshare.net/franksvalli">franksvalli</a>
    </div>
</div>

<h3 id="more-from-the-mobile-web-series">More from the Mobile Web series:</h3>

<p><a href="http://davidbcalhoun.com/2010/viewport-metatag">Part 1: The viewport metatag</a>  <br />
<a href="http://davidbcalhoun.com/2010/the-mobile-developers-toolkit-mobile-web-part-2">Part 2: The mobile developer’s toolkit</a>  <br />
<a href="http://davidbcalhoun.com/2010/designing-buttons-that-dont-suck">Part 3: Designing buttons that don’t suck</a>  <br />
<a href="http://davidbcalhoun.com/2010/on-designing-a-mobile-webpage">Part 4: On designing a mobile webpage</a>  <br />
<a href="http://davidbcalhoun.com/2010/using-mobile-specific-html-css-javascript">Part 5: Using mobile-specific HTML, CSS, and JavaScript</a>  <br />
<a href="http://davidbcalhoun.com/2010/dealing-with-device-orientation">Part 6: Dealing with device orientation</a>  <br />
<a href="http://davidbcalhoun.com/2010/mobile-javascript-libraries-and-frameworks">Part 7: Mobile JavaScript libraries and frameworks</a></p>

]]></content>
  </entry>
  
</feed>
