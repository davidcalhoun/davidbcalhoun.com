
<!DOCTYPE HTML>
<html lang="en-GB">
<head>
	<meta charset="utf-8">
	<title>  | David Calhoun's blog</title>

	<meta name="author" content="David Calhoun">

<meta name="description" content="(note: this is based on the first iOS5 beta [9A5220p] and is subject to change on final release) It looks like there’s finally some major &hellip;"> <meta name="keywords" content="">

	<meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="/atom.xml" rel="alternate" title="David Calhoun's blog" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="/javascripts/html5.js"></script><![endif]-->
	

</head>



<body>
	<header id="header" class="inner"><h1><a href="/">David Calhoun's blog</a></h1>
<span class="tagline"></span>
<!-- <nav id="main-nav"><ul>
	<li><a href="/about">About</a></li>
	<li><a href="/archives">Archives</a></li>
	<li><a href="/contact">Contact</a></li>
</ul>
</nav> -->
<!-- <nav id="mobile-nav"> -->
<!-- 	<div class="alignleft menu"> -->
<!-- 		<a class="button">Menu</a> -->
<!-- 		<div class="container"><ul>
	<li><a href="/about">About</a></li>
	<li><a href="/archives">Archives</a></li>
	<li><a href="/contact">Contact</a></li>
</ul>
</div> -->
<!-- 	</div> -->
<!-- </nav> -->


</header>

	<div id="content" class="inner">


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/2011/new-mobile-safari-stuff-in-ios5-position-fixed-overflow-scroll-new-input-type-support-web-workers-ecmascript-5">
			
				New Mobile Safari Stuff in iOS5: Position:fixed, Overflow:scroll, New Input Type Support, Web Workers, ECMAScript 5</a>
		</h2>
		<div class="meta date">








  


<time datetime="2011-06-07T00:00:00-07:00" pubdate data-updated="true">Jun 7<span>th</span>, 2011</time></div>
	</header>
	<div class="entry-content">
		<p>(note: this is based on the first iOS5 beta [9A5220p] and is subject to change on final release)</p>

<p>It looks like there’s finally some major improvements in mobile Safari, some of which I’ve found below on my “first glance” after downloading the SDK. Chime in if you find anything yourself!</p>

<h3 id="bad-news-first">Bad news first</h3>

<p>Much to my disappointment, browser-based file uploads are still not supported (<a href="http://frontendstuff.com/html/examples/input-type-file.html">input type=”file”</a>), even though they have been supported on Android since version 2.2 (which they have <a href="http://davidbcalhoun.com/2011/android-3-0-honeycomb-is-first-to-implement-the-device-api">continued to improve and refine</a>). The best use case for this is uploading pictures and videos straight from the browser, but Apple seems more interested in making those functions possible directly from the operating system itself, supporting only big names like Twitter and YouTube. So much for the little guys.</p>

<p>There’s other stuff on my wishlist that hasn’t yet been implemented, such as <s>WebGL and</s> indexedDB, along with some HTML5 input types, but regardless it’s good to see some real progress in iOS 5. (update: it appears that some WebGL features are starting to be supported, although the demos I tried didn’t seem to work).</p>

<p>Now let’s move on to the awesome new stuff that IS implemented!</p>

<h3 id="positionfixed">position:fixed</h3>

<p>A point of contention since the original iPhone was released in 2007, position:fixed now works on iOS5! What this means to developers: it’s now very easy to create top and bottom toolbars for your web apps. (there’s a long history of hacks and workarounds which will still need to be implemented as a fallback for the time being, but I’ll save that for another post. I should also mention that position:fixed has worked on Android since version 2.2, and webOS seems to support a somewhat hacky implementation).</p>

<p>Here’s a <a href="http://www.youtube.com/watch?v=JFzv3ETwfms">video demo of position:fixed on iOS5</a>:</p>

<p>(check out the <a href="http://frontendstuff.com/css/examples/position-fixed.html">demo</a> for yourself)</p>

<h3 id="overflowscroll">overflow:scroll</h3>

<p>This is a similar problem to position:fixed, but now it works on iOS5! For content that doesn’t fit in its container element, previously the content was completely cut off (similarly with iframes). On the desktop we have the option to show scrollbars instead, allowing the user to scroll to see the content, but iOS made this difficult by requiring two fingers to scroll. Now overflow:scroll works and the user can scroll through the container’s content with a single finger. Developers can use new CSS to enable native scrolling (with scrollbars and momentum):</p>

<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;">
  <table cellspacing="0" cellpadding="0">
    <tr>
      <td class="line-numbers">
        <div>
          1<br />
        </div>
      </td>
      
      <td>
        <div class="text codecolorer">
          -webkit-overflow-scrolling: touch;
        </div>
      </td>
    </tr>
  </table>
</div>

<p>(via <a href="http://johanbrook.com/browsers/native-momentum-scrolling-ios-5/">Johan Brook</a>).</p>

<p>It’s assumed that it’s up to the developer to implement some sort of visual indicator to let the user know they can interact with the element.</p>

<p>One criticism so far: there’s no inertia scroll on this element, so it doesn’t quite feel the same as scrolling the page.</p>

<p>Here’s a quick <a href="http://www.youtube.com/watch?v=KwpZ1F6dW5U">video demo of overflow:scroll on iOS 5</a>.</p>

<p>(check out the <a href="http://frontendstuff.com/css/examples/overflow-scroll.html">demo</a> for yourself)</p>

<h3 id="new-input-types">New Input Types</h3>

<p>HTML5 defined many new helpful input types, and mobile operating systems have been slowly implementing them and creating optimized keyboards for the inputs. iOS5 now supports these input types: date, datetime, month, time, range. Click on the images to see their respective demo pages:</p>

<p><a href="http://frontendstuff.com/html/input-type-date.html"><img src="http://davidbcalhoun.com/wp-content/uploads/2011/06/ios-date-input.png" alt="iOS Date Input" title="iOS Date Input" width="320" height="480" class="size-full wp-image-677" /></a><a href="http://frontendstuff.com/html/input-type-datetime.html"><img src="http://davidbcalhoun.com/wp-content/uploads/2011/06/ios-datetime-input.png" alt="iOS Datetime Input" title="iOS Datetime Input" width="320" height="480" class="size-full wp-image-678" /></a><a href="http://frontendstuff.com/html/input-type-month.html"><img src="http://davidbcalhoun.com/wp-content/uploads/2011/06/ios-month-input.png" alt="iOS Month Input" title="iOS Month Input" width="320" height="480" class="size-full wp-image-680" /></a><a href="http://frontendstuff.com/html/input-type-time.html"><img src="http://davidbcalhoun.com/wp-content/uploads/2011/06/ios-time-input.png" alt="iOS Time Input" title="iOS Time Input" width="320" height="480" class="size-full wp-image-682" /></a><a href="http://frontendstuff.com/html/input-type-range.html"><img src="http://davidbcalhoun.com/wp-content/uploads/2011/06/ios-range-input.png" alt="iOS Range Input" title="iOS Range Input" width="320" height="480" class="size-full wp-image-681" /></a></p>

<p>And a fun one – <a href="http://davidbcalhoun.com/2011/implementing-iphone-slider-unlock-with-input-type-range">my iPhone slider hack based on input type range</a>, which now actually works on the iPhone itself (because input type=”range” is now supported)!</p>

<p><a href="http://davidbcalhoun.com/a/iphone-slider.html"><img src="http://davidbcalhoun.com/wp-content/uploads/2011/06/ios-iphone-slider-in-html.png" alt="iOS Slider implemented with Range Input" title="iOS Slider implemented with Range Input" width="320" height="480" class="aligncenter size-full wp-image-679" /></a></p>

<h3 id="web-workers-javascript">Web Workers (JavaScript)</h3>

<p>JavaScript is single-threaded, and it happens to run on the same thread as the UI, which means computationally expensive operations can lead to an unresponsive UI, and no one likes that. Web Workers help by offloading tasks to another thread and only returning output when it needs to. In other words, it’s a good thing for us web developers.</p>

<p>According to my own tests, Web Workers seemed to be briefly enabled on early versions of iOS3, but were soon disabled thereafter. Now with iOS5, they’re back again!</p>

<h3 id="new-ecmascript-5-stuff-javascript">New ECMAScript 5 stuff (JavaScript)</h3>

<p>(based on <a href="http://kangax.github.com/es5-compat-table/">kangax’s ECMAScript 5 compatibility table</a>)</p>

<table>
  <tr>
    <td>
      Feature
    </td>
    
    <td>
      iOS 4.3.2
    </td>
    
    <td>
      iOS 5 beta 1
    </td>
  </tr>
  
  <tr>
    <td>
      Object.create
    </td>
    
    <td class="positive">
      Yes
    </td>
    
    <td class="positive">
      Yes
    </td>
  </tr>
  
  <tr>
    <td>
      Object.defineProperty
    </td>
    
    <td class="positive">
      Yes
    </td>
    
    <td class="positive">
      Yes
    </td>
  </tr>
  
  <tr>
    <td>
      Object.defineProperties
    </td>
    
    <td class="positive">
      Yes
    </td>
    
    <td class="positive">
      Yes
    </td>
  </tr>
  
  <tr>
    <td>
      Object.getPrototypeOf
    </td>
    
    <td class="positive">
      Yes
    </td>
    
    <td class="positive">
      Yes
    </td>
  </tr>
  
  <tr>
    <td>
      Object.keys
    </td>
    
    <td class="positive">
      Yes
    </td>
    
    <td class="positive">
      Yes
    </td>
  </tr>
  
  <tr>
    <td>
      Object.seal
    </td>
    
    <td class="negative">
      No
    </td>
    
    <td class="positive">
      Yes
    </td>
  </tr>
  
  <tr>
    <td>
      Object.freeze
    </td>
    
    <td class="negative">
      No
    </td>
    
    <td class="positive">
      Yes
    </td>
  </tr>
  
  <tr>
    <td>
      Object.preventExtensions
    </td>
    
    <td class="negative">
      No
    </td>
    
    <td class="positive">
      Yes
    </td>
  </tr>
  
  <tr>
    <td>
      Object.isSealed
    </td>
    
    <td class="negative">
      No
    </td>
    
    <td class="positive">
      Yes
    </td>
  </tr>
  
  <tr>
    <td>
      Object.isFrozen
    </td>
    
    <td class="negative">
      No
    </td>
    
    <td class="positive">
      Yes
    </td>
  </tr>
  
  <tr>
    <td>
      Object.isExtensible
    </td>
    
    <td class="negative">
      No
    </td>
    
    <td class="positive">
      Yes
    </td>
  </tr>
  
  <tr>
    <td>
      Object.getOwnPropertyDescriptor
    </td>
    
    <td class="positive">
      Yes
    </td>
    
    <td class="positive">
      Yes
    </td>
  </tr>
  
  <tr>
    <td>
      Object.getOwnPropertyNames
    </td>
    
    <td class="positive">
      Yes
    </td>
    
    <td class="positive">
      Yes
    </td>
  </tr>
  
  <tr>
    <td>
      Date.prototype.toISOString
    </td>
    
    <td class="positive">
      Yes
    </td>
    
    <td class="positive">
      Yes
    </td>
  </tr>
  
  <tr>
    <td>
      Date.prototype.toISOString
    </td>
    
    <td class="positive">
      Yes
    </td>
    
    <td class="positive">
      Yes
    </td>
  </tr>
  
  <tr>
    <td>
      Date.prototype.toISOString
    </td>
    
    <td class="positive">
      Yes
    </td>
    
    <td class="positive">
      Yes
    </td>
  </tr>
  
  <tr>
    <td>
      Date.now
    </td>
    
    <td class="positive">
      Yes
    </td>
    
    <td class="positive">
      Yes
    </td>
  </tr>
  
  <tr>
    <td>
      JSON
    </td>
    
    <td class="positive">
      Yes
    </td>
    
    <td class="positive">
      Yes
    </td>
  </tr>
  
  <tr>
    <td>
      Function.prototype.bind
    </td>
    
    <td class="negative">
      No
    </td>
    
    <td class="negative">
      No
    </td>
  </tr>
  
  <tr>
    <td>
      String.prototype.trim
    </td>
    
    <td class="positive">
      Yes
    </td>
    
    <td class="positive">
      Yes
    </td>
  </tr>
  
  <tr>
    <td>
      Array.prototype.indexOf
    </td>
    
    <td class="positive">
      Yes
    </td>
    
    <td class="positive">
      Yes
    </td>
  </tr>
  
  <tr>
    <td>
      Array.prototype.lastIndexOf
    </td>
    
    <td class="positive">
      Yes
    </td>
    
    <td class="positive">
      Yes
    </td>
  </tr>
  
  <tr>
    <td>
      Array.prototype.every
    </td>
    
    <td class="positive">
      Yes
    </td>
    
    <td class="positive">
      Yes
    </td>
  </tr>
  
  <tr>
    <td>
      Array.prototype.some
    </td>
    
    <td class="positive">
      Yes
    </td>
    
    <td class="positive">
      Yes
    </td>
  </tr>
  
  <tr>
    <td>
      Array.prototype.forEach
    </td>
    
    <td class="positive">
      Yes
    </td>
    
    <td class="positive">
      Yes
    </td>
  </tr>
  
  <tr>
    <td>
      Array.prototype.map
    </td>
    
    <td class="positive">
      Yes
    </td>
    
    <td class="positive">
      Yes
    </td>
  </tr>
  
  <tr>
    <td>
      Array.prototype.filter
    </td>
    
    <td class="positive">
      Yes
    </td>
    
    <td class="positive">
      Yes
    </td>
  </tr>
  
  <tr>
    <td>
      Array.prototype.reduce
    </td>
    
    <td class="positive">
      Yes
    </td>
    
    <td class="positive">
      Yes
    </td>
  </tr>
  
  <tr>
    <td>
      Array.prototype.reduceRight
    </td>
    
    <td class="positive">
      Yes
    </td>
    
    <td class="positive">
      Yes
    </td>
  </tr>
  
  <tr>
    <td>
      Getter in property initializer
    </td>
    
    <td class="positive">
      Yes
    </td>
    
    <td class="positive">
      Yes
    </td>
  </tr>
  
  <tr>
    <td>
      Setter in property initializer
    </td>
    
    <td class="positive">
      Yes
    </td>
    
    <td class="positive">
      Yes
    </td>
  </tr>
  
  <tr>
    <td>
      Property access on strings
    </td>
    
    <td class="positive">
      Yes
    </td>
    
    <td class="positive">
      Yes
    </td>
  </tr>
  
  <tr>
    <td>
      Reserved words as property names
    </td>
    
    <td class="negative">
      No
    </td>
    
    <td class="positive">
      Yes
    </td>
  </tr>
  
  <tr>
    <td>
      Strict mode
    </td>
    
    <td class="negative">
      No
    </td>
    
    <td class="positive">
      Yes
    </td>
  </tr>
</table>

<h3 id="html5test-score">HTML5Test score</h3>

<p>iOS 4.3.2 scores 206 (7 bonus points) on the <a href="http://html5test.com/">HTML5 Test</a>, whereas iOS 5 beta scores 267 (9 bonus points). Much of these gains seem to be made in the “Forms” and “Parsing rules” sections, as well as the “Web Workers” section.</p>

<h3 id="miscellaneous-new-stuff">Miscellaneous new stuff</h3>

<ul>
  <li>Inline SVG in text/html</li>
  <li>float32array, int8array, int16array, int32array in JavaScript</li>
  <li>window.matchmedia() (JavaScript)</li>
  <li>
    <s>onsearch Event (JavaScript)</s>
    <p>– it looks like this was just broken in later iOS 4.3 builds, but it’s back now in iOS 5</p>
  </li>
  <li>MathML elements recognized (based on <a href="http://html5test.com/">html5test</a>)</li>
  <li>Improved speed of Canvas rendering (<a href="https://twitter.com/#!/KesieV/status/78067470501543936">source</a>)</li>
  <li>UIWebView and home screen web apps now running on Nitro? (expected but not tested)</li>
  <li>Newly supported CSS gradient syntax (-webkit-linear-gradient versus the older -webkit-gradient syntax)</li>
  <li><a href="https://developer.mozilla.org/en/DOM/element.classList">classList</a> (JavaScript)</li>
  <li>A major WebKit HTML5 History (popstate) bug is <a href="https://bugs.webkit.org/show_bug.cgi?id=42940">now fixed</a></li>
  <li><a href="http://html5demos.com/contenteditable">contentEditable</a> now works properly</li>
</ul>


		
		
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/2011/the-incredibly-painful-way-of-getting-an-rss-feed-of-a-twitter-list">
			
				The Incredibly Painful Way of Getting an RSS Feed of a Twitter List</a>
		</h2>
		<div class="meta date">








  


<time datetime="2011-06-05T00:00:00-07:00" pubdate data-updated="true">Jun 5<span>th</span>, 2011</time></div>
	</header>
	<div class="entry-content">
		<p>(why does Twitter make it so hard? What did RSS ever do to it?)</p>

<h3 id="the-skinny">The skinny</h3>

<p>The Twitter API appears to support two methods for getting RSS feeds of lists. Both of these methods are pretty buried and their API docs don’t help too much, but nonetheless both of these feeds work:</p>

<blockquote>
  <p><a href="http://api.twitter.com/1/nathansmith/lists/javascript/statuses.atom">http://api.twitter.com/1/nathansmith/lists/javascript/statuses.atom</a></p>
</blockquote>

<p>If you have the list ID (requires using some dev tools – see below), you can also use this format:</p>

<blockquote>
  <p><a href="http://api.twitter.com/1/lists/statuses.atom?list_id=41981352">http://api.twitter.com/1/lists/statuses.atom?list_id=41981352</a></p>
</blockquote>

<h3 id="the-explanation">The explanation</h3>

<p>As it turns out, getting an RSS feed of a Twitter list is no easy task, at least from what I’ve found. Twitter has largely replaced RSS for me, in terms of getting the latest and greatest information, and maybe Twitter wants to keep it that way by having me rely on their service instead of an RSS feed. That’s how it seems to me anyway (this is also evidenced by their <a href="https://support.twitter.com/groups/31-twitter-basics/topics/111-features/articles/15361-how-to-find-your-rss-feed">killing off of making RSS feeds easily discoverable</a> but still making the feed available as long as you can figure out your Twitter user id (which is a task in itself), for instance here’s my RSS feed: <a href="https://twitter.com/statuses/user_timeline/16521889.rss">https://twitter.com/statuses/user_timeline/16521889.rss</a>). I’d say this is simply a conspiracy against RSS feeds and developers in general, which is the direction Twitter is headed these days.</p>

<p>In any case, I digress! I want to get an RSS feed of a Twitter list. Great! All I should have to do is go to the page of the list and subscribe to the RSS feed. But.. there’s no RSS feed. Hmm.</p>

<h3 id="google-is-your-friend8230-most-of-the-time">Google is your friend… most of the time</h3>

<p>A search for “twitter list rss” comes up with links to implementing an RSS feed via Yahoo Pipes as well as pages referring to an appspot service that now 404s (<a href="http://twiterlist2rss.appspot.com/">twiterlist2rss</a>). In any case, they are both not what I’m looking for. Which means I have to get creative. Which means… my options at this point are screen scraping (made harder by the fact that Twitter content is now served with JavaScript) or.. gasp.. using their API!</p>

<h3 id="twitter-rest-api-to-the-rescue">Twitter REST API to the rescue</h3>

<p>After digging through the API docs, I found just the page I was looking for, <a href="http://dev.twitter.com/doc/get/lists/statuses">detailing the REST service for Twitter lists</a>.</p>

<p>As it turns out, the basic structure for requesting list data is as follows:</p>

<blockquote>
  <p>http://api.twitter.com/version/lists/statuses.format</p>
</blockquote>

<p>As a newbie Twitter developer, there were a couple of things wrong here. First, what’s the version of the API I’m supposed to use? From other examples on the web (outside of the documentation…) I just assumed I’d be using version 1, and that seemed to work. Ok, whatever, we’ll go with 1:</p>

<blockquote>
  <p>http://api.twitter.com/1/lists/statuses.format</p>
</blockquote>

<p>Second step: this API is actually quite nice, and will return data in three different formats: xml, json, or atom (RSS!). Ok, now we’re making progress!</p>

<blockquote>
  <p>http://api.twitter.com/1/lists/statuses.atom</p>
</blockquote>

<h3 id="where8217s-this-listid-you-speak-of">Where’s this list_id you speak of?</h3>

<p>Now to pass in the info – I need to pass in the list ID in a key called “list_id”. The only problem is… where do I find the list ID? For the purposes of this example I’ll use <a href="https://twitter.com/#!/nathansmith/javascript">Nathan Smith’s excellent JavaScript developers list</a>. To normal human beings, this list might be called “nathansmith/javascript”, but a Twitter ID is numerical, so that’s not what we’re looking for.</p>

<p>So.. I assume at this point I can use some of the Twitter developer tools and fiddle around with them until I find an API call that will translate the human-readable list name into a numerical ID. But no.. I don’t want to download anything, I don’t want to investigate more of the API or go down any more rabbit holes.</p>

<p>It’s time to cut this rabbit hole short and do a bit of investigating. So I pulled up the list, opened up Web Inspector in Chrome, and took a look at the Network tab in the hopes of seeing an API call with an ID I was looking for…</p>

<p>…And I found it! Somewhere down the line, Twitter was calling statuses.json with this request:</p>

<blockquote>
  <p>https://api.twitter.com/1/lists/statuses.json?list_id=41981352&#038;include_entities=1&#038;include_available_features=1&#038;contributor_details=true</p>
</blockquote>

<p>There’s our list_id (and incidentally, the same API call [with json instead of atom].. which shows that Web Inspector is more useful than API docs sometimes)! After a short copy-paste, all the pieces of my Frankenstein API call have been put together:</p>

<blockquote>
  <p><a href="http://api.twitter.com/1/lists/statuses.atom?list_id=41981352">http://api.twitter.com/1/lists/statuses.atom?list_id=41981352</a></p>
</blockquote>

<p>And it works, without having to mess around with OAuth or authentication, registering an app, or whatever. Of course now we can refer back to the API docs and mess around with some parameters to get just the data I’m looking for. Maybe most useful to developers is the handy ability to get easily paginated results:</p>

<blockquote>
  <p><a href="http://api.twitter.com/1/lists/statuses.atom?list_id=41981352&#038;page=2">http://api.twitter.com/1/lists/statuses.atom?list_id=41981352&#038;page=2</a></p>
</blockquote>

<p>There’s also what would be a handy “count” variable, but it’s altogether useless as it appears to be ignored. The API always returned 20 results for me.</p>

<p>In any case, there you have it! The incredibly roundabout way to get an RSS feed of your favorite Twitter list.</p>

<h3 id="update"><strong>UPDATE</strong></h3>

<p>Thanks to <a href="http://sociable.co/2011/05/05/as-twitter-protects-its-ecosystem-heres-how-to-create-an-rss-feed-of-a-twitter-list/">this site</a>, it looks like there’s a more straightforward way of getting the RSS feed. Using the same list we were trying to get above, it looks like this also works:</p>

<blockquote>
  <p>http://api.twitter.com/1/nathansmith/lists/javascript/statuses.atom</p>
</blockquote>


		
		
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/2011/android-3-0-honeycomb-is-first-to-implement-the-device-api">
			
				Android 3.0 Honeycomb Is First to Implement the Device API</a>
		</h2>
		<div class="meta date">








  


<time datetime="2011-02-24T00:00:00-08:00" pubdate data-updated="true">Feb 24<span>th</span>, 2011</time></div>
	</header>
	<div class="entry-content">
		<p>I fired up the newly released Android 3.0 SDK to run some tests and found they’ve implemented part of the long-awaited <a href="http://www.w3.org/2009/dap/">Device API</a> (aka the Media Capture API). From your browser you can now upload pictures and videos from the camera as well as sounds from the microphone. The returned data should be available to manipulate via the <a href="http://www.w3.org/TR/FileAPI/">File API</a> (although I haven’t yet tested this).</p>

<p>I made a <a href="http://www.youtube.com/watch?v=L1XqvLOi-3I">short video demo</a> with some explanation:</p>

<p>Here’s the code so you can play around with it for yourself!</p>

<pre name="code" class="html">&lt;form enctype="multipart/form-data" method="post"&gt;
  &lt;h2&gt;Regular file upload&lt;/h2&gt;
  &lt;input type="file"&gt;&lt;/input&gt;
  
  &lt;h2&gt;capture=camera&lt;/h2&gt;
  &lt;input type="file" accept="image/*;capture=camera"&gt;&lt;/input&gt;
  
  &lt;h2&gt;capture=camcorder&lt;/h2&gt;
  &lt;input type="file" accept="video/*;capture=camcorder"&gt;&lt;/input&gt;
  
  &lt;h2&gt;capture=microphone&lt;/h2&gt;
  &lt;input type="file" accept="audio/*;capture=microphone"&gt;&lt;/input&gt;
&lt;/form&gt;
</pre>


		
		
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/2011/my-oreilly-books-wishlist">
			
				My O&#8217;Reilly Books Wishlist</a>
		</h2>
		<div class="meta date">








  


<time datetime="2011-02-22T00:00:00-08:00" pubdate data-updated="true">Feb 22<span>nd</span>, 2011</time></div>
	</header>
	<div class="entry-content">
		<h3 id="introduction">Introduction</h3>

<p>Ok, so this post is only here in the hopes I’ll actually win something. <img src="http://davidbcalhoun.com/wp-includes/images/smilies/icon_razz.gif" alt=":P" class="wp-smiley" /> </p>

<p><a href="http://oreilly.com/new-year-2011.html">O’Reilly Books has a promotion</a> where a random winner will receive up to $500 of books on their wishlist, provided they post the list somewhere online. You can probably see why this is here then!</p>

<h3 id="the-list">The List</h3>

<p><a href="http://oreilly.com/catalog/9780596807788/">Programming the Mobile Web</a> ($50)<br />
<a href="http://oreilly.com/catalog/9780596155254/">Palm webOS</a> ($45)<br />
<a href="http://oreilly.com/catalog/9781449381561/">MongoDB: The Definitive Guide</a> ($40)<br />
<a href="http://oreilly.com/catalog/9781449393847/">JavaScript: The Definitive Guide: Rough Cuts Version, Sixth Edition</a> ($50)<br />
<a href="http://oreilly.com/catalog/9780596806026/">HTML5: Up and Running</a> ($30)<br />
<a href="http://oreilly.com/catalog/9781449383268/">Building Android Apps with HTML, CSS, and JavaScript</a> ($30)<br />
<a href="http://oreilly.com/catalog/9780596805784/">Building iPhone Apps with HTML, CSS, and JavaScript</a> ($30)<br />
<a href="http://oreilly.com/catalog/9780596157609/">HTML &#038; CSS: The Good Parts</a> ($35)<br />
<a href="http://oreilly.com/catalog/9781449393908/">HTML5 Canvas</a> ($40)<br />
<a href="http://oreilly.com/catalog/9780596159771/">jQuery Cookbook</a> ($35)<br />
<a href="http://oreilly.com/catalog/9781449390501/">Learning Android</a> ($35)<br />
<a href="http://oreilly.com/catalog/9780596155933/">CSS Cookbook, Third Edition</a> ($50)</p>


		
		
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/2011/improving-yourself-as-a-programmer-versus-as-a-human-being">
			
				Improving Yourself as a Programmer Versus as a Human Being</a>
		</h2>
		<div class="meta date">








  


<time datetime="2011-02-20T00:00:00-08:00" pubdate data-updated="true">Feb 20<span>th</span>, 2011</time></div>
	</header>
	<div class="entry-content">
		<p>(OR “The Post In Which I Conflate Programming and Philosophy” OR “The Programmer’s Existentialist Crisis”)</p>

<p>I woke up this morning to read Dmitry A. Soshnikov’s tweet:<br />
<a href="http://twitter.com/#!/DmitrySoshnikov/status/39356492058607616"><img src="http://davidbcalhoun.com/wp-content/uploads/2011/02/two-programming-languages.png" alt="Have one-two langs in which you are a master and know professionally, and in addition, consider alternative langs. Your experience will grow." width="661" height="318" class="aligncenter size-full wp-image-639" /></a></p>

<p>While this seems like good advice for aspiring programmers, I can’t help but think what this means for those who will buy into this. Us programmers have a keen ability to sit and focus on problems for extended periods of time, usually to the detriment of everything else around us. From the perspective of “real life”, we might as well be sitting in a basement somewhere playing World of Warcraft. Sure, programming is more productive, profitable, and surely not brainless, but at the end of the day we could still only be sitting in a basement somewhere. What I mean to say here is that we’re not actually living our actual lives doing these things.</p>

<p>I realize Dmitry was only talking about learning another programming language for professional life, but for me and so many others, professional life is not easily separated from personal life. We don’t just work during the week during work hours. We can’t just turn off our minds and stop thinking about it when we go home. I end up thinking about programming or web design puzzles in my leisure time and on weekends, largely <em>because I enjoy doing so</em>. But when I see something questioning whether I should be devoting even more of this time to learning another programming language, I think about what I could be doing instead. Put another way, I think about what is missing and neglected in my life, and how those things will remain missing and neglected.</p>

<p>Socrates famously said <a href="http://en.wikiquote.org/wiki/Socrates#Apology">“The unexamined life is not worth living”</a>. He, along with those who followed in his immediate footsteps (famously, Plato and Aristotle) were concerned with how us mere mortals should live our lives, and more particularly how we should lead <em>good</em> lives. The sad fact about (western) philosophy is that it’s turned into a shadow of its former self, now plagued by millennia of self-doubt and failed grandiose systems. But it seems the original Socratic intention of finding how to lead a <em>good</em> life is still an admirable goal, even if we disagree on how exactly to achieve it.</p>

<p>Socrates also had a bit to say about those seeking to be experts in their field, and he couldn’t resist getting in a jab at his wife in the process:</p>

<blockquote>
  <p>It is the example of the rider who wishes to become an expert horseman: “None of your soft-mouthed, docile animals for me,” he says; “the horse for me to own must show some spirit” in the belief, no doubt, if he can manage such an animal, it will be easy enough to deal with every other horse besides. And that is just my case. I wish to deal with human beings, to associate with man in general; hence my choice of wife. I know full well, if I can tolerate her spirit, I can with ease attach myself to every human being else.</p>
</blockquote>

<p>Yes, Socrates essentially just compared his wife with a horse. A wild horse, to be exact.</p>

<p>I’m unsure if this translates well into learning programming languages. Does this mean we should learn the worst languages first, so that the rest of the languages we learn will be comparably easy? I hope not, that seems like quite a lot of wasted time. But I certainly agree that <em>the first languages we learn shouldn’t be the easiest</em>. This might only make us frustrated in the long run. So perhaps we can learn something from Socrates’s quote after all, if taken with a grain of salt.</p>

<p>So should we still strive to become experts in our field? I believe that’s an admirable and acceptable goal, but it shouldn’t be our main goal. We should first be concerned with leading good lives. I myself have a LONG way to go on this point, believe me.</p>

<p>I’ll surely learn another programming language, but not for its own sake, unless my life is in reasonably good order.</p>


		
		
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/2011/checking-for-undefined-null-and-empty-variables-in-javascript">
			
				Checking for Undefined, Null, and Empty Variables in JavaScript</a>
		</h2>
		<div class="meta date">








  


<time datetime="2011-02-11T00:00:00-08:00" pubdate data-updated="true">Feb 11<span>th</span>, 2011</time></div>
	</header>
	<div class="entry-content">
		<p>In general it’s a good practice to check for the existence of something before blindly using it by faith and hoping it works. There are various times during the execution of scripts when a variable may not be defined, it may be null, or it might be an empty string. These are three things that are easily conflated. A good way to look at this is thinking of these as having increasing levels of existence (getting a bit philosophical here for a moment…):</p>

<pre name="code" class="JScript">foo0;             // existence level 0 (creates the error "not defined")
var foo1;         // existence level 1 ("undefined" - variable declared but not defined/initialized)
var foo2 = null;  // existence level 2 (variable initialized, but isn't an Object, Number, String, etc)
var foo3 = "";    // existence level 3 (variable initialized to an empty String)
var foo4 = "bar"; // existence level 4 (variable initialized to String "foo")
</pre>

<p>Generally it would be handy if we had some way to filter out everything but the very last line. We simply want to check for these cases without the script entirely blowing up, as it does with the first line:</p>

<pre name="code" class="JScript">foo;  // ReferenceError: foo is not defined
</pre>

<p>We’re not particularly doing anything useful with foo here, but notice that the script fails out anyway. At this point any code that follows will not be executed. Your first instinct might be “Oh! I know how to contain these errors! We’ll use a try-catch!”:</p>

<pre name="code" class="JScript">try {
  foo;
} catch(e) {
  e.message;  // "foo is not defined"
}
</pre>

<p>The script still fails, but not critically, so your script continues to execute. But this turns out to aversely affect performance. The basic lesson here is that try-catch can be useful in some situations, but shouldn’t be used where alternatives are available.</p>

<h3 id="typeof-foo">typeof foo</h3>

<p>JavaScript has quite a useful remedy for this:</p>

<pre name="code" class="JScript">typeof foo; // "undefined"
</pre>

<p>Unlike everything else in JavaScript, typeof will deal with whatever you throw at it, including undefined variables. So you can use it as a simple check before using a variable that might not exist:</p>

<pre name="code" class="JScript">if(typeof foo !== "undefined") {
  // do something with foo
}
</pre>

<p>Note that this is easy to confuse with the</p>

<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;">
  <table cellspacing="0" cellpadding="0">
    <tr>
      <td class="line-numbers">
        <div>
          1<br />
        </div>
      </td>
      
      <td>
        <div class="text codecolorer">
          undefined
        </div>
      </td>
    </tr>
  </table>
</div>

<p>keyword, which in this case doesn’t help us one bit, as it gives us a fatal error:</p>

<pre name="code" class="JScript">if(foo !== undefined) {  // ReferenceError: foo is not defined

}
</pre>

<p>This filters out our first two cases, since they both evaluate to “undefined”:</p>

<pre name="code" class="JScript">typeof foo; // "undefined"

var bar;
typeof bar; // "undefined"
</pre>

<p>But this turns out not to work well for our other conditions, which evaluate differently:</p>

<pre name="code" class="JScript">typeof null;  // "object" (what?!)
typeof "";    // "string"
</pre>

<p>So we need to add other “if” conditions to check.. but there turns out to be a better way!</p>

<h3 id="exploiting-loose-typing">Exploiting loose typing</h3>

<p>JavaScript is a loosely typed language, which means that it will “automagically” cast variables into other types when necessary (i.e. when adding a Number to a String), sometimes resulting in the unexpected. For instance, whenever we use the “if” statement, the expected input is a Boolean true/false value. If JavaScript gets anything other than a Boolean, such as a String or a Number, instead of blowing up completely (as in strictly typed languages such as C), it’ll cast the variable into a Boolean for you.</p>

<p>“How handy!” you might think. Except in the following unexpected cases:</p>

<pre name="code" class="JScript">if("0") {
  // this will run because "0" is true
}

if("false") {
  // this will run because "false" is true
}
</pre>

<p>To see what JavaScript will cast a value to without having to use an</p>

<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;">
  <table cellspacing="0" cellpadding="0">
    <tr>
      <td class="line-numbers">
        <div>
          1<br />
        </div>
      </td>
      
      <td>
        <div class="text codecolorer">
          if
        </div>
      </td>
    </tr>
  </table>
</div>

<p>statement, we could create a new Boolean value with the following:</p>

<pre name="code" class="JScript">Boolean(0);    // false
Boolean("0");  // true
</pre>

<p>Or we can use the less intuitive but quick way of using double exclamation marks (this will probably award you cleverness points in someone’s book.. hopefully those points actually matter):</p>

<pre name="code" class="JScript">!!0;    // false
!!"0";  // true
</pre>

<p>This works because !foo converts foo to a Boolean but negates its original value, turning it on its head. !!foo converts foo to a Boolean and flips it back to its expected value, which is the same value that’s evaluated by our</p>

<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;">
  <table cellspacing="0" cellpadding="0">
    <tr>
      <td class="line-numbers">
        <div>
          1<br />
        </div>
      </td>
      
      <td>
        <div class="text codecolorer">
          if
        </div>
      </td>
    </tr>
  </table>
</div>

<p>statement.</p>

<p>Using this ALMOST gives us the answer we’re looking for:</p>

<pre name="code" class="JScript">!!foo0; // ReferenceError: foo0 is not defined

var foo1;
!!foo1; // false

var foo2 = null;
!!foo2; // false (same as !!null)

var foo3 = "";
!!foo3; // false (same as !!"")

var foo4 = "bar";
!!foot4; // true (same as !!"bar")
</pre>

<p>Excluding the first example, now we can test for uninitialized variables (foo1), null variables (foo2), and empty strings (foo3) all with just an</p>

<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;">
  <table cellspacing="0" cellpadding="0">
    <tr>
      <td class="line-numbers">
        <div>
          1<br />
        </div>
      </td>
      
      <td>
        <div class="text codecolorer">
          if
        </div>
      </td>
    </tr>
  </table>
</div>

<p>statement:</p>

<pre name="code" class="JScript">if(foo1) {
  // do something with foo1
}

if(foo2) {
  // do something with foo2
}

if(foo3) {
  // do something with foo3
}
</pre>

<p>Dang… so close! But we can’t yet test the first case without an error:</p>

<pre name="code" class="JScript">if(foo0) {  // ReferenceError: foo0 is not defined

}
</pre>

<h3 id="foo-versus-windowfoo-and-thisfoo">foo versus window.foo and this.foo</h3>

<p>The secret to our solution lies in how JavaScript handles undefined variables versus undefined properties. Here’s a quick reminder on the difference between the two:</p>

<pre name="code" class="JScript">// variable foo
var foo;

// property bar (and object variable foo)
var foo = {};  // create an empty object to add bar too
foo.bar = "";
</pre>

<p>The difference between these makes all the difference whether a fatal error occurs:</p>

<pre name="code" class="JScript">foo;  // ReferenceError: foo is not defined

var foo = {};
foo.bar;  // undefined
foo.blah; // undefined
</pre>

<p>We can randomly invent and check any property of</p>

<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;">
  <table cellspacing="0" cellpadding="0">
    <tr>
      <td class="line-numbers">
        <div>
          1<br />
        </div>
      </td>
      
      <td>
        <div class="text codecolorer">
          foo
        </div>
      </td>
    </tr>
  </table>
</div>

<p>we want, and the code will keep chugging along:</p>

<pre name="code" class="JScript">var foo = {};
foo.something = "hello";

if(foo.bar) { // undefined, interpreted as false (same as !!foo.bar)
  // never runs
}

if(foo.something) {
  foo.something;  // "hello"
}
</pre>

<p>Now comes the magic. If you know anything about JavaScript running in the browser, you know that all global variables are part of the</p>

<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;">
  <table cellspacing="0" cellpadding="0">
    <tr>
      <td class="line-numbers">
        <div>
          1<br />
        </div>
      </td>
      
      <td>
        <div class="text codecolorer">
          window
        </div>
      </td>
    </tr>
  </table>
</div>

<p>object. This means</p>

<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;">
  <table cellspacing="0" cellpadding="0">
    <tr>
      <td class="line-numbers">
        <div>
          1<br />
        </div>
      </td>
      
      <td>
        <div class="text codecolorer">
          foo
        </div>
      </td>
    </tr>
  </table>
</div>

<p>and</p>

<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;">
  <table cellspacing="0" cellpadding="0">
    <tr>
      <td class="line-numbers">
        <div>
          1<br />
        </div>
      </td>
      
      <td>
        <div class="text codecolorer">
          window.foo
        </div>
      </td>
    </tr>
  </table>
</div>

<p>are equivalent:</p>

<pre name="code" class="JScript">var foo;

foo === window.foo;  // true

// "this" is another bag of worms, but note this anyway
this.foo === window.foo;
</pre>

<p>So technically our variable foo is a <em>property</em> of the window object. So we should be able to check for any arbitrary variable in the window scope now!</p>

<pre name="code" class="JScript">window.foo;  // undefined (not a fatal error!)

// even though we're checking for the same thing, we get a fatal error…
foo;  // ReferenceError: foo is not defined
</pre>

<h3 id="practical-uses">Practical uses</h3>

<p>Now as long as we have a global entry point for our code, we can write our code in such a way that it won’t ever give us a fatal error if our variables aren’t yet defined:</p>

<pre name="code" class="JScript">if(window.foo &#038;&#038; foo.bar) {
  foo.bar();
}
</pre>

<p>Of course nothing happens, because we haven’t defined foo. But why doesn’t foo.bar give us a fatal error? Because the first test,</p>

<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;">
  <table cellspacing="0" cellpadding="0">
    <tr>
      <td class="line-numbers">
        <div>
          1<br />
        </div>
      </td>
      
      <td>
        <div class="text codecolorer">
          window.foo
        </div>
      </td>
    </tr>
  </table>
</div>

<p>failed out. It would be useless processing for the JavaScript engine to also evaluate the second statement, because the end result will still be the same (false &#038;&#038; true results in false, false &#038;&#038; false results in false). So it doesn’t get so far as</p>

<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;">
  <table cellspacing="0" cellpadding="0">
    <tr>
      <td class="line-numbers">
        <div>
          1<br />
        </div>
      </td>
      
      <td>
        <div class="text codecolorer">
          foo.bar
        </div>
      </td>
    </tr>
  </table>
</div>

<p>.</p>

<p>And now the code will work properly when we hook up our code to our</p>

<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;">
  <table cellspacing="0" cellpadding="0">
    <tr>
      <td class="line-numbers">
        <div>
          1<br />
        </div>
      </td>
      
      <td>
        <div class="text codecolorer">
          foo
        </div>
      </td>
    </tr>
  </table>
</div>

<p>global namespace:</p>

<pre name="code" class="JScript">var foo = {
  bar: function() {
    alert("hello world");
  }
}

if(window.foo &#038;&#038; foo.bar) {
  foo.bar();  // "hello world"
}
</pre>

<h3 id="shorthand">Shorthand</h3>

<p>It’s becoming common to see an abbreviation for the above code. Check out the following two methods, which accomplish the same thing:</p>

<pre name="code" class="JScript">// Method 1
if(window.foo &#038;&#038; foo.bar) {
  foo.bar();  // "hello world"
}

// Method 2
window.foo &#038;&#038; foo.bar &#038;&#038; (foo.bar());
</pre>

<p>Don’t get too scared.. these blocks of code are equivalent. Method 2 is shorter, but it simply goes something like this: if window.foo isn’t set, stop evaluating this line (just as above in the</p>

<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;">
  <table cellspacing="0" cellpadding="0">
    <tr>
      <td class="line-numbers">
        <div>
          1<br />
        </div>
      </td>
      
      <td>
        <div class="text codecolorer">
          if
        </div>
      </td>
    </tr>
  </table>
</div>

<p>statement). Otherwise, if foo.bar exists then execute the code in parentheses, which gives us an alert (“hello world”);</p>

<p>Just a word of caution about using Method 2: it’s obviously less clear what’s going on here. Your own cleverness might actually result in unnecessary confusion, especially of other people work in the same code base and they’re at different levels of understanding. In these cases we should first strive to be clear, and then only clever if it’s not at the expense of being clear.</p>

<p>It’s also likely that a code minifier would take care of this cleverness for us at build time, giving us the best of both worlds.</p>

		
		
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/2011/a-peek-into-googles-jules-verne-tribute-february-8-2011">
			
				A Peek Into Google&#8217;s Jules Verne Tribute (February 8, 2011)</a>
		</h2>
		<div class="meta date">








  


<time datetime="2011-02-07T00:00:00-08:00" pubdate data-updated="true">Feb 7<span>th</span>, 2011</time></div>
	</header>
	<div class="entry-content">
		<p><a href="http://www.youtube.com/watch?v=CW2IXHBPOIo"><img src="http://davidbcalhoun.com/wp-content/uploads/2011/02/google-doodle-jules-verne.png" alt="" title="Google Doodle: Jules Verne tribute" width="938" height="346" class="aligncenter size-full wp-image-626" /></a></p>

<p>This is just a fun little <a href="http://www.youtube.com/watch?v=CW2IXHBPOIo">video demo</a> into the inner workings of today’s Google Doodle. Nothing you can’t do yourself with Firebug or Web Inspector (built into WebKit browsers such as Safari and Chrome). But I liked this doodle so much, I wanted to talk about it!</p>

<p>Disclaimer: I know the difference between HTML5 and CSS3, but I’m not much one for pedantic nomenclature (however, I am apparently supportive of pedantic words like nomenclature). For the purposes of this video, webkit transforms and transitions are part of HTML5.</p>

<p>EDIT: Apparently I missed that the doodle has accelerometer support for devices that support it! Confirmed that it works on my MacBook Pro in Chrome.</p>


		
		
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/2011/javascript-sunspider-benchmark-ios-4-3-vs-ios-4-0">
			
				JavaScript SunSpider Benchmark: iOS 4.3 vs iOS 4.0</a>
		</h2>
		<div class="meta date">








  


<time datetime="2011-01-22T00:00:00-08:00" pubdate data-updated="true">Jan 22<span>nd</span>, 2011</time></div>
	</header>
	<div class="entry-content">
		<h3 id="result-table-sunspider-091">Result table (SunSpider 0.9.1)</h3>

<table>
  <tr>
    <td>
      Test
    </td>
    
    <td>
      iOS 4 (3GS)
    </td>
    
    <td>
      iOS 4.3 beta 2 (3GS)
    </td>
    
    <td>
      % change
    </td>
  </tr>
  
  <tr>
    <td>
      Total
    </td>
    
    <td>
      13787ms
    </td>
    
    <td class="positive">
      5357ms
    </td>
    
    <td class="positive">
      -61.1%
    </td>
  </tr>
  
  <tr>
    <td>
      3D
    </td>
    
    <td>
      1917ms
    </td>
    
    <td class="positive">
      737ms
    </td>
    
    <td class="positive">
      -61.6%
    </td>
  </tr>
  
  <tr>
    <td>
      Access
    </td>
    
    <td>
      1893ms
    </td>
    
    <td class="positive">
      617ms
    </td>
    
    <td class="positive">
      -67.4%
    </td>
  </tr>
  
  <tr>
    <td>
      Bitops
    </td>
    
    <td>
      1239ms
    </td>
    
    <td class="positive">
      289ms
    </td>
    
    <td class="positive">
      -76.7%
    </td>
  </tr>
  
  <tr>
    <td>
      Controlflow
    </td>
    
    <td>
      221ms
    </td>
    
    <td class="positive">
      35ms
    </td>
    
    <td class="positive">
      -84.2%
    </td>
  </tr>
  
  <tr>
    <td>
      Crypto
    </td>
    
    <td>
      850ms
    </td>
    
    <td class="positive">
      308ms
    </td>
    
    <td class="positive">
      -63.8%
    </td>
  </tr>
  
  <tr>
    <td>
      Date
    </td>
    
    <td>
      1065ms
    </td>
    
    <td class="positive">
      706ms
    </td>
    
    <td class="positive">
      -33.7%
    </td>
  </tr>
  
  <tr>
    <td>
      Math
    </td>
    
    <td>
      1511ms
    </td>
    
    <td class="positive">
      606ms
    </td>
    
    <td class="positive">
      -59.9%
    </td>
  </tr>
  
  <tr>
    <td>
      Regexp
    </td>
    
    <td>
      1916ms
    </td>
    
    <td class="positive">
      153ms
    </td>
    
    <td class="positive">
      -92.0%
    </td>
  </tr>
  
  <tr>
    <td>
      String
    </td>
    
    <td>
      3175ms
    </td>
    
    <td class="positive">
      1907ms
    </td>
    
    <td class="positive">
      -39.9%
    </td>
  </tr>
</table>

<h3 id="raw-results-ios-43-beta-2-running-on-my-iphone-3gs">Raw results (iOS 4.3 beta 2 running on my iPhone 3GS)</h3>

<pre>============================================
RESULTS (means and 95% confidence intervals)
--------------------------------------------
Total:                  5357.3ms +/- 2.3%
--------------------------------------------

  3d:                    736.9ms +/- 7.5%
    cube:                260.1ms +/- 3.5%
    morph:               206.0ms +/- 23.2%
    raytrace:            270.8ms +/- 4.4%

  access:                617.4ms +/- 4.1%
    binary-trees:        118.8ms +/- 4.7%
    fannkuch:            180.4ms +/- 0.7%
    nbody:               222.0ms +/- 11.7%
    nsieve:               96.2ms +/- 0.8%

  bitops:                288.7ms +/- 9.6%
    3bit-bits-in-byte:    38.0ms +/- 4.3%
    bits-in-byte:         70.5ms +/- 39.0%
    bitwise-and:          85.1ms +/- 1.9%
    nsieve-bits:          95.1ms +/- 2.1%

  controlflow:            34.7ms +/- 3.2%
    recursive:            34.7ms +/- 3.2%

  crypto:                308.3ms +/- 1.1%
    aes:                 175.2ms +/- 0.5%
    md5:                  79.3ms +/- 3.9%
    sha1:                 53.8ms +/- 0.8%

  date:                  706.2ms +/- 5.5%
    format-tofte:        341.3ms +/- 11.0%
    format-xparb:        364.9ms +/- 1.1%

  math:                  605.9ms +/- 1.1%
    cordic:              224.5ms +/- 1.0%
    partial-sums:        263.4ms +/- 2.3%
    spectral-norm:       118.0ms +/- 1.2%

  regexp:                152.5ms +/- 5.5%
    dna:                 152.5ms +/- 5.5%

  string:               1906.7ms +/- 0.7%
    base64:              247.9ms +/- 2.4%
    fasta:               268.5ms +/- 0.6%
    tagcloud:            370.4ms +/- 3.0%
    unpack-code:         676.2ms +/- 0.3%
    validate-input:      343.7ms +/- 1.4%
</pre>

<p><a href="http://davidbcalhoun.com/wp-content/uploads/2010/iOS-4-GM.html">Raw results for iOS 4.0</a></p>

<h3 id="related">Related</h3>

<p><a href="http://davidbcalhoun.com/2010/blackberry-torch-sunspider-results-javascript-benchmark">BlackBerry Torch SunSpider results (JavaScript benchmark)</a><br />
<a href="http://davidbcalhoun.com/2010/iphone-4-sunspider-test-results">iPhone 4 SunSpider test results (22% faster than iPhone 3GS)</a><br />
<a href="http://davidbcalhoun.com/2010/sunspider-ios-3-1-3-versus-ios-4-gm">JavaScript SunSpider test: iOS 3.1.3 versus iOS 4 GM</a><br />
<a href="http://davidbcalhoun.com/2010/javascript-sunspider-htc-evo-versus-htc-incredible-versus-nexus-one">JavaScript SunSpider: HTC Evo versus HTC Incredible versus Nexus One</a></p>


		
		
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/2011/notes-mobile-web-design-cameron-moll-200">
			
				Notes: Mobile Web Design (Cameron Moll, 2007)</a>
		</h2>
		<div class="meta date">








  


<time datetime="2011-01-21T00:00:00-08:00" pubdate data-updated="true">Jan 21<span>st</span>, 2011</time></div>
	</header>
	<div class="entry-content">
		<h3 id="what8217s-this">What’s this?</h3>

<p>These are some notes I collect as I read through Cameron Moll’s <a href="http://www.amazon.com/Mobile-Web-Design-Cameron-Moll/dp/0615185916">Mobile Web Design</a>.</p>

<h3 id="introduction">Introduction</h3>

<ol>
  <li>Further info:</li>
</ol>

<p>Designing the Mobile User Experience (Barbara Ballard)<br />
dotMobi Web Developer’s Guide (dev.mobi)<br />
Global Authoring Practices for the Mobile Web (Luca Passani) (passani.it/gap)<br />
Constant Touch: A Global History of the Mobile Web (Jon Agar)<br />
Personal, Portable, Pedestrian: Mobile Phones in Japanese Life (Mizuko Ito)<br />
Mobile Interaction Design (Matt Jones)</p>

<ol>
  <li>iPhone released just before publication</li>
</ol>

<h3 id="mobile-web-fundamentals">Mobile Web Fundamentals</h3>

<ol>
  <li>
    <p><a href="http://communities-dominate.blogs.com/brands/2007/01/putting_27_bill.html">Putting 2.7 Billion in Context: Mobile Phone Users</a></p>
  </li>
  <li>
    <p>Phone is smaller. Different input methods. Searching for specific data (directions or a phone number) rather than a truckload of data available via the desktop. One handed interaction.</p>
  </li>
  <li>
    <p>Limitations: small screen size, difficulty of data input, user agent inconsistency</p>
  </li>
</ol>

<p>Opportunities: location-specific data, on-the-go-messaging, voice communication.</p>

<ol>
  <li>
    <p>Weather Channel – greater reach on mobile web compared to desktop (<a href="http://www.comscore.com/Press_Events/Press_Releases/2007/05/Mobile_Web_Usage_Grows_in_UK">source</a>)</p>
  </li>
  <li>
    <p>Rollable display – Polymer Vision Readius (<a href="http://www.youtube.com/watch?v=uQMBzXaCmqY">video</a>)</p>
  </li>
</ol>

<p>Many devices and user agents, making testing expensive and impractical. Emulators and testing on multiple devices will lead to successful deployment.</p>

<ol>
  <li>Opera Mini – far better UI than most native browsers</li>
</ol>

<p>Mostly must be installed manually, except for T-Mobile shipping hundreds of thousands with it pre-installed</p>

<ol>
  <li>
    <p>“…the mobile web experience is often a small screen, intermittent, one-handed experience”</p>
  </li>
  <li>
    <p>understanding of target audience, their usage and what they want, and the contextual relevance (phone numbers, etc.) of data</p>
  </li>
  <li>
    <p>Initiate a phone call: wtai scheme for WML, tel scheme for HTML.</p>
  </li>
</ol>

<p>Some browsers (Opera Mini, Safari Mobile) automatically convert links to phone numbers</p>

<p>WML scheme to add a number to the address book: wtai://wp/ap;+5555555;Amy%20Miller</p>

<ol>
  <li>
    <p>carrier myopia: devs thinking the only way to reach the audience is by landing on the carrier deck. Mobile User Experience Conference (MEX) 2007: “Tearing down the walled garden will enhance the mobile content experience and release value for the industry. The objective should be a free market for content and applications, based on open standards and accessible to all. We think the current fragmentation of formats and channels to market is holding back growth.”</p>
  </li>
  <li>
    <p>“cell phone” is an outdated term. Use “mobile” or “device”.</p>
  </li>
  <li>
    <p>Japanese market: “keitai” (=”something you carry with you”)</p>
  </li>
</ol>

<h3 id="four-methods-revisited">Four Methods, Revisited</h3>

<ol>
  <li>
    <p><a href="http://www.cameronmoll.com/archives/000398.html">Mobile Web Design ~ The Series</a> (Cameron Moll, 2005)</p>
  </li>
  <li>
    <p>Method 1: Do nothing. If the markup is meaningful and standards-based, the better mobile browsers can adapt.</p>
  </li>
  <li>
    <p>Good browsers such as the iPhone’s allow the viewing of the full site (with zooming).</p>
  </li>
  <li>
    <p>Advantages: mobile browsers shoulder the burden of reformatting content, no additional effort needed, users have same content and possibly the same experience as on a PC</p>
  </li>
</ol>

<p>Disadvantages: doesn’t address contextual relevance or exploit device capabilities, users with zoom-enabled devices are a small market share</p>

<ol>
  <li>Method 2: Reduce images and styling</li>
</ol>

<p>-presentation styling and images reduced on the fly</p>

<p>mowser.com (Russell Beattie, formerly Yahoo! Mobile)<br />
skweezer.net – an older service dating back to 2001</p>

<p>2-minute mobile mod: <a href="http://www.mikeindustries.com/blog/archive/2005/07/make-your-site-mobile-friendly">http://www.mikeindustries.com/blog/archive/2005/07/make-your-site-mobile-friendly</a></p>

<ol>
  <li>Advantages: relies on implied hierarchy in HTML markup, viewable by a variety of devices, faster download, many browsers override CSS anyway, so why bother?</li>
</ol>

<p>Disadvantages: ignores contextual relevance of mobility, file size may still be excessive</p>

<p>Method 3: Use Handheld Style Sheets</p>

<ol>
  <li>
    <p>media=”handheld” style sheet</p>
  </li>
  <li>
    <p>Not widely supported.</p>
  </li>
</ol>

<p>Advantages: handheld style sheet is built into CSS, at most one extra style sheet, one web address<br />
Disadvantages: ignores contextual relevance of mobility, media=”handheld” support is inconsistent and nearly unreliable</p>

<p>Method 4: Create Mobile-Optimized Content</p>

<ol>
  <li>
    <p>Kayak.com/moby</p>
  </li>
  <li>
    <p>Advantages: contextually relevant (addresses first how the content is consumed, and presentation secondly), pages are leaner</p>
  </li>
</ol>

<p>Disadvantages: denies access to content by making assumptions about the user and device, two sets of files, alternate web addresses</p>

<ol>
  <li>Author’s opinion: doing nothing and mobile-optimized content are the two viable approaches</li>
</ol>

<h3 id="xhtmlcss-development">XHTML/CSS Development</h3>

<ol>
  <li>
    <p>WML deck and card metaphor. Decline giving way to XHTML. WAP protocol, WML language.</p>
  </li>
  <li>
    <p>With WAP 2.0, XHTML-MP is the preferred markup language</p>
  </li>
  <li>
    <p><a href="http://www.cameronmoll.com/mobile/mkp">Markup Test Pages</a>, <a href="http://www.cameronmoll.com/archives/000577.html">Mobile Web Design: Tips &#038; Techniques (2005)</a></p>
  </li>
  <li>
    <p>No need to define new standards just for the web. Same regardless of device: “The underlying standards for the greater web, regardless of device, person, or place, are the same: semantic markup, separation of structure and presentation, accessibility, and so on.”</p>
  </li>
</ol>

<p><a href="http://www.w3.org/TR/mobile-bp/">W3C Mobile Web Best Practices 1.0</a></p>

<p><a href="http://passani.it/gap">Global Authoring Practices for the Mobile Web (Luca Passani)</a></p>

<ol>
  <li>XHTML-MP template</li>
</ol>

<pre name="code" class="HTML">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;!DOCTYPE html PUBLIC "-//WAPFORUM//DTD XHTML Mobile 1.0//EN" "http://www.wapforum.org/DTD/xhtml-mobile10.dtd"&gt;
&lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;
&lt;head&gt;
  &lt;title&gt;Site Title&lt;/title&gt;
  &lt;link rel="stylesheet" type="text/css" href="mobile.css"/&gt;
  &lt;meta http-equiv="Cache-Control" content="max-age=600" /&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;h1&gt;Page Heading&lt;/h1&gt;
  &lt;p&gt;Content&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>

<ol>
  <li>
    <p><a href="http://www.developershome.com/wap/xhtmlmp">DeveloperHome.com’s XHTML-MP Tutorial</a></p>
  </li>
  <li>
    <p><a href="http://htmllint.itc.keio.ac.jp/htmllink/tagslist.cgi?HTMLVersion=XHTML-MP">XHTML-MP Tags List</a></p>
  </li>
</ol>

<p>Good case examples:<br />
<a href="http://flickr.com/mob">Flickr Mobile</a><br />
<a href="http://mobile.fandango.com">Fandango Mobile</a></p>


		
		
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/2011/implementing-iphone-slider-unlock-with-input-type-range">
			
				Implementing iPhone&#8217;s Slider Unlock With Input Type=&#8221;range&#8221;</a>
		</h2>
		<div class="meta date">








  


<time datetime="2011-01-16T00:00:00-08:00" pubdate data-updated="true">Jan 16<span>th</span>, 2011</time></div>
	</header>
	<div class="entry-content">
		<p>(check out the live <a href="http://davidbcalhoun.com/a/iphone-slider.html">demo</a>)</p>

<h3 id="introduction">Introduction</h3>

<p>After reading <a href="http://glazkov.com/2011/01/14/what-the-heck-is-shadow-dom/">“What the Heck is Shadow DOM?”</a> I was inspired to see how far I could style the <input type="range" /> element. Pretty far, as it turns out!</p>

<p>My goal was to change the input’s default appearance:</p>

<p><img src="http://davidbcalhoun.com/wp-content/uploads/2011/01/input-range.png" alt="The default appearance for input type=range" title="The default appearance for input type=range" width="144" height="25" class="aligncenter size-full wp-image-567" /></p>

<p>To the visual appearance of the iPhone’s unlock slider:</p>

<p><img src="http://davidbcalhoun.com/wp-content/uploads/2011/01/iphone-slider-native.png" alt="The iPhone's unlock slider" title="The iPhone's unlock slider" width="300" height="69" class="aligncenter size-full wp-image-566" /></p>

<p>As far as I can tell, only WebKit-based browsers and Opera have implemented input type=”range”. Mobile Safari hasn’t yet implemented it as of iOS 4.2 and Android also hasn’t fully implemented it as of Android 2.3 (although curiously the elements are styleable but not yet interactive). Surprisingly, the only mobile OS to implement this input type seems to be BlackBerry OS 6.</p>

<p>However, the focus here will be to get this working on just Chrome and WebKit. This will make it a bit easier to do this proof of concept. So we’ll be using lots of “-webkit” vendor prefixed CSS.</p>

<h3 id="what-we-have-to-work-with">What we have to work with</h3>

<p>Of course we have our simple range input:</p>

<pre name="code" class="html">&lt;input type="range"&gt;
</pre>

<p>Which looks like this:</p>

<p><img src="http://davidbcalhoun.com/wp-content/uploads/2011/01/input-range.png" alt="The default appearance for input type=range" title="The default appearance for input type=range" width="144" height="25" class="aligncenter size-full wp-image-567" /></p>

<p>We can target the input itself with a CSS attribute selector:</p>

<pre name="code" class="CSS">input[type='range'] {}
</pre>

<p>And if we want, we can transform it into a vertical slider by changing the “-webkit-appearance” property:</p>

<pre name="code" class="CSS">input[type='range'] {
    -webkit-appearance: slider-vertical;
}
</pre>

<p>Which looks like this:</p>

<p><img src="http://davidbcalhoun.com/wp-content/uploads/2011/01/input-range-vertical.png" alt="Input range in a vertical orientation" title="Input range in a vertical orientation" width="25" height="119" class="aligncenter size-full wp-image-579" /></p>

<p>If we want to style it as if it was any other element, there’s a slight catch, as we first have to set “-webkit-appearance” to “none” and then add our customizations (this appears to mean that we can’t actually style vertical sliders…). Here we’ll set the background color as a simple demo:</p>

<pre name="code" class="CSS">input[type='range'] {
    -webkit-appearance: none;
    background-color: gray;
}
</pre>

<p>This outputs the following:</p>

<p><img src="http://davidbcalhoun.com/wp-content/uploads/2011/01/input-range-gray-background.png" alt="Input range with a gray background" title="Input range with a gray background" width="129" height="15" class="aligncenter size-full wp-image-577" /></p>

<p>Most interestingly, we can target and style the slider button itself with CSS, although we can’t get access to it with JavaScript (for the time being anyhow). Here we’ll style it a slightly darker shade of gray:</p>

<pre name="code" class="CSS">input[type='range'] {
    -webkit-appearance: none;
    background-color: gray;
}

input[type='range']::-webkit-slider-thumb {
    -webkit-appearance: none;
    background-color: #444;
    width: 15px;
    height: 20px;
}
</pre>

<p>Which results in this:<br />
<img src="http://davidbcalhoun.com/wp-content/uploads/2011/01/input-range-styled.png" alt="Input range with a gray background and a slightly darker slider control" title="Input range with a gray background and a slightly darker slider control" width="129" height="20" class="aligncenter size-full wp-image-583" /></p>

<p>Now all the pieces are in place to fully style the input!</p>

<h3 id="styling-the-background">Styling the background</h3>

<p>This part’s no big deal. We just want to set up the width/height, slap on some handy rounded corners, and add a very slight background gradient:</p>

<pre name="code" class="CSS">input[type='range'] {
    -webkit-appearance: none;
    width: 280px;
    height: 46px;
    padding: 3px;
    -webkit-border-radius: 15px;
    border-radius: 15px;
    border: 1px solid #525252;
    background-image: -webkit-gradient(
        linear,
        left top,
        left bottom,
        color-stop(0, #000000),
        color-stop(1, #222222)
    );
}
</pre>

<p>Now we have the backdrop in place:</p>

<p><img src="http://davidbcalhoun.com/wp-content/uploads/2011/01/iphone-slider-background.png" alt="iPhone slider background" title="iPhone slider background" width="288" height="54" class="aligncenter size-full wp-image-585" /></p>

<h3 id="styling-the-button">Styling the button</h3>

<p>To get the button, we’ll add some width/height and rounded corners. Here we’ll also need a more complicated background gradient as well as an arrow icon. Your first instinct might be to add more markup to hook the arrow icon to, but remember that this is impossible. We’re working in the “shadow DOM” of elements created and maintained by the browser itself. We can style the existing elements but we can’t create any new ones.</p>

<p>So what do we do? Take advantage of multiple backgrounds! We can specify the background as both the arrow image and the gradient we need. In this case we’ll also base64 encode the small image to avoid an extra HTTP request.</p>

<p>The CSS for the button looks like this:</p>

<pre name="code" class="CSS">input[type='range']::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 68px;
    height: 44px;
    -webkit-border-radius: 10px;
    border-radius: 10px;
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAYCAYAAAB0kZQKAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAASJJREFUeNpi7OnpYaAC0AXiF0D8mhzNTAzUASBHnAdim4F0BAhIA/EBIC4aSEeAADMQ9wLxRiDmHyhHwIAfNHqMiXZEcXExGJMCiNCjCMTHgDiTkFmM////p4rXe3t78Rm0DIjTgfgLNkkWoGZQij7MQFsQBY2aICC+Rq80gQ2oA/EZIE4YSEeAACcQzwfimVD2gDgCBtKgiVZlIB0BAgbQbBwykI5A5I4BtPsaNLfcHKiQWADEJiAHDERIfAfiLKgjBiQ67kCD/zK2NAFqjMyi0AJQVnPCI78GiBNxFttQF6ZToVjG5ohfoLoOiKcMVO54BA3+swPVntgKxIbEOIAWjvgLxJVA7APE7waisHoKxBFAfGSgSszL0MLnBTmaAQIMAKg/OsrT7JG8AAAAAElFTkSuQmCC'),
    -webkit-gradient(
        linear,
        left top,
        left bottom,
        color-stop(0, #fefefe),
        color-stop(0.49, #dddddd),
        color-stop(0.51, #d1d1d1),
        color-stop(1, #a1a1a1)
    );
    background-repeat: no-repeat;
    background-position: 50%;
}
</pre>

<p>Which outputs this:<br />
<img src="http://davidbcalhoun.com/wp-content/uploads/2011/01/iphone-slider-button.png" alt="" title="iPhone slider button styled" width="288" height="54" class="aligncenter size-full wp-image-587" /></p>

<h3 id="slide-to-unlock8221-text">“Slide to unlock” text</h3>

<p>Now we’re getting somewhere! And now we’re approaching the limits of what we can do without getting pretty creative. We need some “slide to unlock” text in the background.</p>

<p>The first thing to do is to move the slider all the way to the left, to the default position. We do this through HTML by setting the value to 0:</p>

<pre name="code" class="HTML">&lt;input type="range" value="0"&gt;
</pre>

<p>Ok, that wasn’t too hard. But what about the text? We can’t modify anything in the input itself, because it doesn’t contain any element to display text. And we can’t dynamically add text with JavaScript, because again, it’s the shadow DOM! What we can do is create a separate text element outside of the input and position it on top of the slider using absolute positioning.</p>

<p>But this would be no good, since the text would appear over the button itself. What we want is for the text to show up in-between the button and the background. Since we can style both of these with CSS, we can control the stacking order with good old z-index!</p>

<p>And while we’re at it, we might as well animate the “spotlight” effect on the text. We can do this with a combination of a semitransparent -webkit-mask and animations (see below).</p>

<p>First we have the HTML, which has changed a bit. For positioning and grouping, we need a wrapped element for the input and the span of text:</p>

<pre name="code" class="HTML">&lt;div class="iphone-slider"&gt;
    &lt;input type="range" value="0"&gt;&lt;/input&gt;
    &lt;span&gt;slide to unlock&lt;/span&gt;
&lt;/div&gt;
</pre>

<p>The final complete CSS is as follows:</p>

<pre name="code" class="CSS">.iphone-slider {
    width: 280px;
    height: 46px;
    
    /* set the wrapper as the anchor element for positioning */
    position: relative;
}

.iphone-slider input {
    -webkit-appearance: none;
    width: 100%;
    background: #ddd;
    padding: 3px;
    border: 1px solid #525252;
    -webkit-border-radius: 15px;
    border-radius: 15px;
    background-image: -webkit-gradient(
        linear,
        left top,
        left bottom,
        color-stop(0, #000000),
        color-stop(1, #222222)
    );
}

.iphone-slider input::-webkit-slider-thumb {
    -webkit-appearance: none;
    
    /* position the button on top of everything */
    z-index: 100;
    position: relative;
    
    width: 68px;
    height: 44px;
    -webkit-border-radius: 10px;
    border-radius: 10px;
    
    /* arrow and button gradient */
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAYCAYAAAB0kZQKAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAASJJREFUeNpi7OnpYaAC0AXiF0D8mhzNTAzUASBHnAdim4F0BAhIA/EBIC4aSEeAADMQ9wLxRiDmHyhHwIAfNHqMiXZEcXExGJMCiNCjCMTHgDiTkFmM////p4rXe3t78Rm0DIjTgfgLNkkWoGZQij7MQFsQBY2aICC+Rq80gQ2oA/EZIE4YSEeAACcQzwfimVD2gDgCBtKgiVZlIB0BAgbQbBwykI5A5I4BtPsaNLfcHKiQWADEJiAHDERIfAfiLKgjBiQ67kCD/zK2NAFqjMyi0AJQVnPCI78GiBNxFttQF6ZToVjG5ohfoLoOiKcMVO54BA3+swPVntgKxIbEOIAWjvgLxJVA7APE7waisHoKxBFAfGSgSszL0MLnBTmaAQIMAKg/OsrT7JG8AAAAAElFTkSuQmCC'),
    -webkit-gradient(
        linear,
        left top,
        left bottom,
        color-stop(0, #fefefe),
        color-stop(0.49, #dddddd),
        color-stop(0.51, #d1d1d1),
        color-stop(1, #a1a1a1)
    );
    background-repeat: no-repeat;
    background-position: 50%;
}

.iphone-slider span {
    /* position the text just under the button in the stacking order */
    position: absolute;
    z-index: 99;
    top: 30%;
    left: 37%;
    
    font-family: "Helvetica Neue", Helvetica, sans;
    font-size: 24px;
    color: white;
    cursor: default;
    -webkit-user-select: none;
    
    /* semitransparent gradient mask to animate over the text */
    -webkit-mask-image: -webkit-gradient(
        linear,
        left top,
        right top,
        color-stop(0, rgba(0,0,0,0.3)),
        color-stop(0.45, rgba(0,0,0,0.3)),
        color-stop(0.5, rgba(0,0,0,1)),
        color-stop(0.55, rgba(0,0,0,0.3)),
        color-stop(1, rgba(0,0,0,0.3))
    );
    -webkit-mask-size: 1000px;
    -webkit-mask-repeat: no-repeat;
    -webkit-animation-timing-function: ease-in-out;
    -webkit-animation: text-spotlight 4s infinite;
}

/* animate the webkit-mark over the text */
@-webkit-keyframes text-spotlight {
  0% {
    -webkit-mask-position: -800px;
  }
  
  100% {
    -webkit-mask-position: 0px;
  }
}
</pre>

<p>This renders as the following:</p>

<p><img src="http://davidbcalhoun.com/wp-content/uploads/2011/01/iphone-slider-mask.png" alt="" title="The final result" width="288" height="52" class="aligncenter size-full wp-image-589" /></p>

<p>Which looks pretty dang close the the native iPhone slider if I do say so myself! (perhaps the arrow could use some box-shadow to make it pop a bit more however).</p>

<h3 id="just-a-bit-of-javascript">Just a bit of JavaScript</h3>

<p>Since we’ve come this far, we might as well make the experience as authentic as possible. Here I’ve thrown in some JavaScript to check if the slider has been fully moved to the right, giving the user notification that the phone is unlocked.</p>

<p>Also, you’ll notice the opacity of the text slowly fade as the slider is moved farther to the right. This mimics the actual experience on the iPhone.</p>

<p>Here’s the JavaScript to make this work:</p>

<pre name="code" class="JScript">(function() {
  // variable declarations
  var slider, sliderInput, sliderButton, sliderText, sliderTimeout, sliderOnchange, unlockCheck;
  
  // cache our DOM elements in variables
  slider = document.querySelector('.iphone-slider');
  sliderInput = slider.querySelector('input');
  sliderButton = sliderInput.querySelector('::-webkit-slider-thumb');
  sliderText = slider.querySelector('span');
  
  /*
      Check if it's been unlocked, else return the
      button back to the left side (default position).
  */
  unlockCheck = function() {
    if(sliderInput.value == 100) {
      sliderText.innerHTML = 'Unlocked!';
      sliderInput.value = 0;
      sliderText.style.opacity = 1;
    } else {
      setTimeout(function(){
        sliderInput.value = 0;
        sliderText.style.opacity = 1;
      }, 1000);
    }
  };
  
  sliderOnchange = function() {
    /*
        Set the opacity of the text relative to the value
        on the input range.
    */
    sliderText.style.opacity = ((100 - sliderInput.value) / 200);
    
    /*
        Add a timeout to prevent the function from being called
        on EVERY onchange event.
    */
    clearTimeout(sliderTimeout);
    sliderTimeout = setTimeout(unlockCheck, 300);
  }
  
  slider.onchange = sliderOnchange;
})();
</pre>

<h3 id="live-example">Live example</h3>

<p>Here’s a <a href="http://www.youtube.com/watch?v=lC_pcRZgNm0">video</a> of the slider in action:  </p>

<p>If you’re running Safari or Chrome, you should be able to see and interact with the <a href="http://davidbcalhoun.com/a/iphone-slider.html">standalone demo</a>.</p>

<p>Sweet! Well, that was fun! This was some good practice of using a ton of good stuff: border radius, gradients, multiple backgrounds, data URI images, webkit-mask-image, webkit-animation, and of course styleable input ranges via webkit-slider-thumb.</p>

<p>UPDATE: <a href="http://peter.sh/2011/05/inspectable-shadow-dom-the-file-browser-and-new-default-avatars/">Chrome has now made the shadow DOM inspectable</a>.</p>


		
		
	</div>

</article>

<nav id="pagenavi">
    
        <a href="/blog/page/3/" class="prev">Previous</a>
    
    
        <a href="/blog/page/5/" class="next">Next</a>
    
</nav>
</div>
	<footer id="footer" class="inner"><br>
<br>
<br>
<br>
&copy; 2014

    David Calhoun

</footer>
	<!-- <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script src="/javascripts/slash.js"></script> -->
<!-- <script src="/javascripts/hyphenator.js"></script> -->


<script type="text/javascript">
      var disqus_shortname = 'davidbcalhoun';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>




<script src="/javascripts/main.js"></script>
<!-- <script src="/javascripts/negative-scroll-blur.js"></script> -->

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-5530615-3', 'davidbcalhoun.com');
  ga('send', 'pageview');

</script>

</body>
</html>
