
<!DOCTYPE HTML>
<html lang="en-GB">
<head>
	<meta charset="utf-8">
	<title>  | David Calhoun's blog</title>

	<meta name="author" content="David Calhoun">

<meta name="description" content="… Functions Parenthesis and function execution Parenthesis kick off the execution of a function: function foo() { return true;
} typeof foo; // " &hellip;"> <meta name="keywords" content="">

	<meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="/atom.xml" rel="alternate" title="David Calhoun's blog" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="/javascripts/html5.js"></script><![endif]-->
	

</head>



<body>
	<header id="header" class="inner"><h1><a href="/">David Calhoun's blog</a></h1>
<span class="tagline"></span>
<!-- <nav id="main-nav"><ul>
	<li><a href="/about">About</a></li>
	<li><a href="/archives">Archives</a></li>
	<li><a href="/contact">Contact</a></li>
</ul>
</nav> -->
<!-- <nav id="mobile-nav"> -->
<!-- 	<div class="alignleft menu"> -->
<!-- 		<a class="button">Menu</a> -->
<!-- 		<div class="container"><ul>
	<li><a href="/about">About</a></li>
	<li><a href="/archives">Archives</a></li>
	<li><a href="/contact">Contact</a></li>
</ul>
</div> -->
<!-- 	</div> -->
<!-- </nav> -->


</header>

	<div id="content" class="inner">


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/2010/book-javascript">
			
				Book: JavaScript</a>
		</h2>
		<div class="meta date">








  


<time datetime="2010-12-09T00:00:00-08:00" pubdate data-updated="true">Dec 9<span>th</span>, 2010</time></div>
	</header>
	<div class="entry-content">
		<p>…</p>

<h3 id="functions">Functions</h3>

<h4 id="parenthesis-and-function-execution">Parenthesis and function execution</h4>

<p>Parenthesis kick off the execution of a function:</p>

<pre name="code" class="JScript">function foo() {
	return true;
}

typeof foo;    // "function"
typeof foo();  // "boolean"
</pre>

<p>Both of these are related to the function we just defined, but notice that a function reference without parenthesis is simply a pointer to the function and nothing more. The function with parenthesis executes our function and returns a result (true, which is of type “boolean”). We can assign these to variables:</p>

<pre name="code" class="JScript">var myFunction = foo;  // store the function pointer
var myResult = foo();  // store the result of executing the function

typeof myFunction;     // "function"
typeof myResult;       // "boolean"
</pre>

<h4 id="passing-parameters">Passing parameters</h4>

<p>-params<br />
-passing objects</p>

<h4 id="self-executing-anonymous-functions">Self-executing anonymous functions</h4>

<p>A self-executing anonymous function is an unnamed function that’s simply executed immediately after being defined. Here’s an example:</p>

<pre name="code" class="JScript">(function(){})();
</pre>

<p>Just as above, we can pass in parameters:</p>

<pre name="code" class="JScript">(function(param){
	param;  // "foo"
})('foo');
</pre>

<p>Why on earth would you want to use this? As it turns out, this is a nice way to sandbox your code and is preferred to simply declaring code out in the open. Have a look at the difference:</p>

<pre name="code" class="JScript">// Old way (antipattern!)
var foo = 'bar';
console.log(foo);

// New way (sandboxed)
(function(){
	var foo = 'bar';
	console.log(foo);
})();
</pre>

<p>These two methods run the same code and achieve the same end, but the second example is sandboxed because we say it has “functional scope” and not “global scope”.</p>

<h4 id="scope">Scope</h4>

<h4 id="function-declaration-vs-function-literal">Function declaration vs. function literal</h4>

<h4 id="function-hoisting">Function hoisting</h4>

<h4 id="the-dom">The DOM</h4>

<p>…</p>

		
		
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/2010/mobile-javascript-libraries-and-frameworks">
			
				Mobile JavaScript Libraries and Frameworks (Mobile Web Part 7)</a>
		</h2>
		<div class="meta date">








  


<time datetime="2010-12-06T00:00:00-08:00" pubdate data-updated="true">Dec 6<span>th</span>, 2010</time></div>
	</header>
	<div class="entry-content">
		<h3 id="intro">Intro</h3>

<p>This is designed to be a “living” post of available materials which will hopefully be updated frequently.</p>

<p>Right now there’s not much, just some links, but I hope to keep adding materials, so check back!</p>

<h3 id="the-list">The List</h3>

<p><a href="http://www.sencha.com/products/touch/">Sencha Touch</a><br />
<a href="http://www.phonegap.com/">PhoneGap</a> – native wrapper which provides access to native hardware through their own JavaScript APIs<br />
<a href="http://jquerymobile.com/">jQuery Mobile</a> – a separate mobile UI which has jQuery as a dependency<br />
<a href="http://developer.apple.com/iad/">iAd</a> – an update to Apple’s PastryKit, but probably intended only for ads<br />
<a href="http://zeptojs.com/">Zepto.js</a><br />
<a href="http://joapp.com/">Jo HTML5 Mobile App Framework</a><br />
<a href="http://touch.sproutcore.com/hedwig/">Sproutcore Touch</a><br />
<a href="http://unify.github.com/unify/">Unify</a><br />
<a href="http://developer.yahoo.com/yui/3/">YUI3</a> – the desktop library has taken its first steps in supporting mobile (there’s no separate version just for mobile)<br />
<a href="http://www.springsource.org/spring-mobile">Spring Mobile</a>: an extension to Spring MVC.<br />
<a href="http://pyxismobile.com/">pyxis mobile</a><br />
<a href="http://www.winktoolkit.org/">Wink Toolkit</a><br />
<a href="http://chocolatechipmobile.wordpress.com/">ChocolateChip Mobile</a><br />
<a href="http://webapp-net.com/">WebApp.Net</a><br />
<a href="http://paularmstrongdesigns.com/projects/basejs/">baseJS</a><br />
<a href="http://xuijs.com/">XUI</a><br />
<a href="http://iwebkit.net/">iWebKit</a><br />
<a href="http://www.jqtouch.com/">jQTouch</a><br />
<a href="http://notes.sencha.com/post/1483278482/wed-like-to-extend-a-warm-welcome-to-one-of-our">MooTouch</a> – acquired and integrated into Sencha<br />
<a href="http://code.google.com/p/iphone-universal/">UiUIKit (Universal iPhone UI Kit)</a><br />
<a href="http://code.google.com/p/ciui-dev/">CiUI</a> – CNET iPhone UI<br />
<a href="">UiUIKit</a><br />
<a href="http://www.iui-js.org/">iUI</a> (<a href="http://code.google.com/p/iui/">on Google Code</a>) – the first library for the iPhone as far as I know.<br />
<a href="http://davidbcalhoun.com/2009/pastrykit-digging-into-an-apple-pie">PastryKit</a> – Apple’s proprietary framework, peeked into just for curiousity (not recommended for use)</p>

<h3 id="more-from-the-mobile-web-series">More from the Mobile Web series:</h3>

<p><a href="http://davidbcalhoun.com/2010/viewport-metatag">Part 1: The viewport metatag</a><br />
<a href="http://davidbcalhoun.com/2010/the-mobile-developers-toolkit-mobile-web-part-2">Part 2: The mobile developer’s toolkit</a><br />
<a href="http://davidbcalhoun.com/2010/designing-buttons-that-dont-suck">Part 3: Designing buttons that don’t suck</a><br />
<a href="http://davidbcalhoun.com/2010/on-designing-a-mobile-webpage">Part 4: On designing a mobile webpage</a><br />
<a href="http://davidbcalhoun.com/2010/using-mobile-specific-html-css-javascript">Part 5: Using mobile-specific HTML, CSS, and JavaScript</a><br />
<a href="http://davidbcalhoun.com/2010/dealing-with-device-orientation">Part 6: Dealing with device orientation</a><br />
<a href="http://davidbcalhoun.com/2010/mobile-javascript-libraries-and-frameworks">Part 7: Mobile JavaScript libraries and frameworks</a></p>


		
		
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/2010/what-happens-when-we-serve-javascript-with-random-mime-types">
			
				What Happens When We Serve JavaScript With Random MIME Types?</a>
		</h2>
		<div class="meta date">








  


<time datetime="2010-11-01T00:00:00-07:00" pubdate data-updated="true">Nov 1<span>st</span>, 2010</time></div>
	</header>
	<div class="entry-content">
		<h3 id="introduction">Introduction</h3>

<p>When people started to learn about the HTML5 doctype, they kind of freaked out a little, not knowing how older browsers would handle it. A <a href="http://www.dustindiaz.com/skinny-on-doctypes/">post by Dustin Diaz</a> prompted me to test out how pages rendered (in QuirksMode or Standards Mode) with a little help from</p>

<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;">
  <table cellspacing="0" cellpadding="0">
    <tr>
      <td class="line-numbers">
        <div>
          1<br />
        </div>
      </td>
      
      <td>
        <div class="text codecolorer">
          document.compatMode
        </div>
      </td>
    </tr>
  </table>
</div>

<p>, and <a href="http://themaingate.net/dev/html/all-you-need-is-doctype-html">I found that surprisingly every browser rendered in Standards Mode with the new doctype</a>. In other words, no need to worry!</p>

<p>There’s another welcome simplification (<a href="http://davidbcalhoun.com/2010/top-ten-things-html5-makes-simpler">along with others</a>): the “type” attribute is no longer necessary on script tags:</p>

<blockquote>
  <p>The type attribute gives the language of the script or format of the data. If the attribute is present, its value must be a valid MIME type. The charset parameter must not be specified. <strong>The default, which is used if the attribute is absent, is “text/javascript”.</strong> <a href="http://dev.w3.org/html5/spec/Overview.html#script">-W3C HTML5 spec</a></p>
</blockquote>

<p>Which means that this is all that’s required now:</p>

<pre name="code" class="html">&lt;script src="script.js"&gt;&lt;/script&gt;
</pre>

<p>But how do older browsers handle this? Also, what if we send some crazy Content-Type back in the response header? To make matters more confusing, I noticed that different CDNs send back different Content-Types: <a href="http://yui.yahooapis.com/3.2.0/build/yui/yui-min.js">YUI</a> and <a href="http://code.jquery.com/jquery-1.4.3.min.js">jQuery</a>‘s CDNs send back “application/x-javascript” whereas <a href="https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js">Google’s CDN</a> serving jQuery sends back “text/javascript; charset=UTF-8″.</p>

<p>So does it really matter what the Content-Type is? Let’s find out!</p>

<h3 id="setting-up-the-tests">Setting up the tests</h3>

<p>The test is fairly simple: I have six JavaScript files that all write to the DOM when they’re executed successfully. Each of these files has a different file extension (js.one, js.two, js.three, etc) and each is served with an extension determined by the .htaccess file, which is in the same directory, and contains this bit of magic:</p>

<pre>AddType text/javascript .one
AddType application/x-javascript .two
AddType application/javascript .three
AddType text/ecmascript .four
AddType text/jscript .five
AddType text/foo .six
</pre>

<p>My index.html contains a little helper utility for each of these scripts to use:</p>

<pre name="code" class="JScript">var TEST = {
  node: document.body,
  addMessage: function(message) {
    var p = document.createElement('p');
    p.innerHTML = message;
    this.node.appendChild(p);
  }
}
</pre>

<p>TEST.addMessage() is simply a glorified document.write. As each of the six scripts is run, they’ll write out a message to the page essentially saying “I’m here! It worked!”.</p>

<h3 id="results">Results</h3>

<p>All the browsers I tested worked better than expected. It turns out that Content-Type doesn’t even matter. I made up my own content type “text/foo”, served the file successfully, and it still executed as JavaScript!</p>

<p>I tried all the major A-grade browsers (yes, including IE6-8), plus other random browsers through <a href="http://browsershots.org/">Browsershots.org</a>.</p>

<p>One thing I still need to try is IE9, which <a href="http://twitter.com/#!/paul_irish/status/29416115232">Paul Irish said may not work</a>. I’ll give it a test… soon.</p>

<h3 id="additional-test-1-playing-with-the-8220type8221-attribute">Additional test #1: playing with the “type” attribute</h3>

<p>Instead of messing around with the MIME type sent back in the response header, what happens when we mess around with the “type” attribute on the script tag? For instance:</p>

<pre name="code" class="HTML">&lt;script type="text/foo"&gt;&lt;/script&gt;
</pre>

<p>Using the same testing technique as above, I found these results to be more pronounced. Browsers were more picky. For instance, Chrome and Safari ran all the content types successfully except my made-up “text/foo”. Firefox was even more picky, choosing not to recognize the type “text/jscript”. I’d imagine there’s similar results with other browsers such as IE.</p>

<p>…But none of that really matters now! Simply omit the type attribute and everything seems to work fine (except possibly not in IE9?).</p>

<h3 id="additional-test-2-content-type-and-caching">Additional test #2: content type and caching</h3>

<p><a href="http://twitter.com/#!/bluesmoon/status/29418676869">Philip Tellis</a> wanted to know if Content-Type had any bearing on how the browser caches data. For instance, if something previously requested has the same filename but a different content type, is there a cache hit (304 code returned) or miss?</p>

<p>In the first test I made a page that requested a file. Then in a not-too-fancy way I changed the content type through .htaccess on the fly and made another request. A 304 code was returned even with the new content type, so it was clear that this traditional caching method wasn’t affected.</p>

<p>In my second test I instead changed the “type” attribute on the script tag itself (in the HTML). The file was still cached normally, even after the type changed.</p>

<p>I only tested in Chrome, Safari, and Firefox, so the story might be different in IE. Anyhow, this is an edge case anyway and more of a test out of curiosity! It seems the way browsers handle caching in these instances is truly RESTful, that is, the current state of the file is determined entirely by the filename.</p>


		
		
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/2010/top-ten-things-html5-makes-simpler">
			
				Top Ten Things HTML5 Makes Simpler</a>
		</h2>
		<div class="meta date">








  


<time datetime="2010-10-07T00:00:00-07:00" pubdate data-updated="true">Oct 7<span>th</span>, 2010</time></div>
	</header>
	<div class="entry-content">
		<p><b>General word of caution: not all of these HTML5 simplifications are compatible with older browsers.  Test it for yourself before implementing!</b></p>
<h3>1. The doctype</h3>
<p>The old:</p>
<pre name="code" class="html">
&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01//EN&quot;
&quot;http://www.w3.org/TR/html4/strict.dtd&quot;&gt;
</pre>
<p>The new:</p>
<pre name="code" class="html">
&lt;!DOCTYPE html&gt;
</pre>
<h3>2. charset</h3>
<p>The old:</p>
<pre name="code" class="html">
&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot;&gt;
</pre>
<p>The new:</p>
<pre name="code" class="html">
&lt;meta charset=&quot;utf-8&quot;&gt;
</pre>
<h3>3. The link tag&#8217;s
<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="text codecolorer">type</div></td></tr></tbody></table></div>
<p>attribute
<p>The old:</p>
<pre name="code" class="html">
&lt;link href=&quot;style.css&quot; type=&quot;text/css&quot; rel=&quot;stylesheet&quot; /&gt;
</pre>
<p>The new (omit the</p>
<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="text codecolorer">type</div></td></tr></tbody></table></div>
<p>attribute):</p>
<pre name="code" class="html">
&lt;link href=&quot;style.css&quot; rel=&quot;stylesheet&quot; /&gt;
</pre>
<p>This one may be a bit controversial, but the HTML5 spec actually tells browser vendors not to treat the</p>
<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="text codecolorer">type</div></td></tr></tbody></table></div>
<p>attribute as the final word, which makes it seem pretty redundant:</p>
<blockquote><p>User agents must not consider the type attribute authoritative — upon fetching the resource, user agents must not use the type attribute to determine its actual type. Only the actual type (as defined in the next paragraph) is used to determine whether to apply the resource, not the aforementioned assumed type. -<a href="http://dev.w3.org/html5/spec/Overview.html#the-link-element">W3C HTML5 spec</a></p></blockquote>
<p>The spec then goes on to state that the browser must effectively determine the type by examining the</p>
<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="text codecolorer">Content-Type</div></td></tr></tbody></table></div>
<p>sent back in the header from the server when requesting the CSS file.  If this extra work is already being performed and there&#8217;s no noticeable downside of omitting the</p>
<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="text codecolorer">type</div></td></tr></tbody></table></div>
<p>attribute, then it seems pretty redundant.  Save the extra bytes by omitting it!</p>
<h3>4. The script tag&#8217;s
<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="text codecolorer">type</div></td></tr></tbody></table></div>
<p>attribute
<p>The old:</p>
<pre name="code" class="html">
&lt;script src=&quot;script.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;
</pre>
<p>The new:</p>
<pre name="code" class="html">
&lt;script src=&quot;script.js&quot;&gt;&lt;/script&gt;
</pre>
<p>According the the W3C, if the</p>
<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="text codecolorer">type</div></td></tr></tbody></table></div>
<p>attribute isn&#8217;t present, it should default to</p>
<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="text codecolorer">text/javascript</div></td></tr></tbody></table></div>
<p>:</p>
<blockquote><p>The type attribute gives the language of the script or format of the data. If the attribute is present, its value must be a valid MIME type. The charset parameter must not be specified. <b>The default, which is used if the attribute is absent, is &#8220;text/javascript&#8221;.</b><a href="http://dev.w3.org/html5/spec/Overview.html#script">-W3C HTML5 spec</a></p></blockquote>
<h3>5. The script tag&#8217;s
<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="text codecolorer">async</div></td></tr></tbody></table></div>
<p>and</p>
<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="text codecolorer">defer</div></td></tr></tbody></table></div>
<p>attributes
<p>Moving scripts to the bottom of a document is <a href="http://developer.yahoo.com/performance/">one of the top performance tips</a> and one of the easiest ways to speed up a website.  This is because script downloading (in older browsers) and parsing/executing is done synchronously, that is, in a way which blocks everything else which comes after them.  </p>
<p>It&#8217;s not too hard to move the scripts to the bottom, but wouldn&#8217;t it be handy if there was an attribute we could add on the script to make it behave, no matter where it&#8217;s located?  Now there is!  Check out the async attribute:</p>
<pre name="code" class="html">
&lt;script async src=&quot;script.js&quot;&gt;&lt;/script&gt;
</pre>
<p>This tells the browser to download and execute the script asynchronously, without blocking the rendering of elements below it.  There&#8217;s one catch: scripts with this attribute aren&#8217;t guaranteed to run in the order they appear in the document, which is their default behavior when the</p>
<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="text codecolorer">async</div></td></tr></tbody></table></div>
<p>attribute isn&#8217;t present.  So be careful or this will definitely lead to code dependency issues.</p>
<p>The</p>
<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="text codecolorer">defer</div></td></tr></tbody></table></div>
<p>attribute is an older attribute with a similar goal:</p>
<pre name="code" class="html">
&lt;script defer src=&quot;script.js&quot;&gt;&lt;/script&gt;
</pre>
<p>Believe it or not, this attribute was first implemented in IE4!  It tells the browser the same thing: to download and execute the script in such a way that it doesn&#8217;t block the elements below it from rendering.  The difference from</p>
<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="text codecolorer">async</div></td></tr></tbody></table></div>
<p>is that</p>
<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="text codecolorer">defer</div></td></tr></tbody></table></div>
<p>executes the scripts in the order they appear in the document.</p>
<h3>6. placeholder and autofocus attributes</h3>
<p>The</p>
<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="text codecolorer">placeholder</div></td></tr></tbody></table></div>
<p>attribute can be added to</p>
<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="text codecolorer">input</div></td></tr></tbody></table></div>
<p>and</p>
<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="text codecolorer">textarea</div></td></tr></tbody></table></div>
<p>elements.  This is a piece of interaction that was originally accomplished with a bit of JavaScript: placeholder text (usually gray in appearance) appears in a text field, but disappears when the user focuses on it (and reappears if the user moves focus without typing any text).</p>
<pre name="code" class="html">
&lt;input type=&quot;text&quot; placeholder=&quot;Search&quot;&gt;
&lt;textarea type=&quot;text&quot; placeholder=&quot;Search&quot;&gt;&lt;/textarea&gt;
</pre>
<p>Similarly, the</p>
<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="text codecolorer">autofocus</div></td></tr></tbody></table></div>
<p>attribute creates some interaction that was originally developed with JavaScript: when the page loads, focus on a specified form element.  Now all you have to do is add the attribute to make the same thing work with without JavaScript!  The</p>
<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="text codecolorer">autofocus</div></td></tr></tbody></table></div>
<p>tag can be added to</p>
<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="text codecolorer">input</div></td></tr></tbody></table></div>
<p>,</p>
<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="text codecolorer">select</div></td></tr></tbody></table></div>
<p>,</p>
<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="text codecolorer">textarea</div></td></tr></tbody></table></div>
<p>, and</p>
<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="text codecolorer">button</div></td></tr></tbody></table></div>
<p>tags:</p>
<pre name="code" class="html">
&lt;input type=&quot;text&quot; autofocus&gt;&lt;/input&gt;
</pre>
<h3>7. JavaScript: localStorage and sessionStorage</h3>
<p>When coding JavaScript, instead of having to deal with cookies, which are quite limiting in terms of storage space, you now have the option to use</p>
<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="text codecolorer">localStorage</div></td></tr></tbody></table></div>
<p>and</p>
<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="text codecolorer">sessionStorage</div></td></tr></tbody></table></div>
<p>.  The size limit may depend on the browser, but it seems to have been set at a minimum of 5mb per domain.  It may also be the case that the size limit for sessionStorage may be larger (which <a href="http://social.msdn.microsoft.com/Forums/en-US/iewebdevelopment/thread/1fe562b8-1a16-42ca-a02f-280630958bcc">seems to be the case for IE8 and possibly IE9</a>).</p>
<p>It should be noted, if it wasn&#8217;t immediately obvious from their names, that</p>
<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="text codecolorer">localStorage</div></td></tr></tbody></table></div>
<p>data persists across sessions (just like cookies) and</p>
<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="text codecolorer">sessionStorage</div></td></tr></tbody></table></div>
<p>data persists only for the length of the browser session.</p>
<p>It should also be noted that data can only be stored in this way in key-value pairs, where the values can only be strings.  This presents a problem when trying to store JSON objects, and requires you to go through the extra step of using JSON.stringify(myObj) before storing your data.</p>
<p>Here&#8217;s an example of how easy it is to use</p>
<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="text codecolorer">localStorage</div></td></tr></tbody></table></div>
<p>and</p>
<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="text codecolorer">sessionStorage</div></td></tr></tbody></table></div>
<p>:</p>
<pre name="code" class="JScript">
// localStorage - data can be retrieved by the site after user closes the browser!
localStorage.userName = "Biff Tannen";

// sessionStorage - data only persists for the current session
sessionStorage.userMood = "Angry";
</pre>
<h3>8. Caching</h3>
<p>Traditionally, you could only control caching on your website through primarily headers (Cache-Control and Expires headers).  Now through the use of the <a href="http://diveintohtml5.org/offline.html">cache manifest</a>, developers have more control over which components they want to be cached.  Theoretically, controlling this caching is now as easy as changing one file (instead of having to change server configurations and such).</p>
<p>Setting up the cache manifest is relatively easy:</p>
<p>1. Add this line to your</p>
<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="text codecolorer">.htaccess</div></td></tr></tbody></table></div>
<p>file or Apache configuration:</p>
<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="text codecolorer">AddType text/cache-manifest .manifest</div></td></tr></tbody></table></div>
<p>2. Create a file.  For this example we&#8217;ll call it</p>
<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="text codecolorer">cache.manifest</div></td></tr></tbody></table></div>
<p>.  This file contains a list of files that should be cached:</p>
<pre>
CACHE MANIFEST
# version 1
/style.css
/script.js
/image.jpg
</pre>
<p>3. Add the manifest attribute on the</p>
<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="text codecolorer">html</div></td></tr></tbody></table></div>
<p>element, pointing to your</p>
<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="text codecolorer">cache.manifest</div></td></tr></tbody></table></div>
<p>file:</p>
<pre name="code" class="html">
&lt;html manifest=&quot;/cache.manifest&quot;&gt;
</pre>
<p>Now these files specified will be cached.  They will only be redownloaded if our</p>
<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="text codecolorer">cache.manifest</div></td></tr></tbody></table></div>
<p>file is changed in any way.  That&#8217;s why there&#8217;s a comment with the version number.  Simply update the version to force the browser to redownload the files:</p>
<pre>
CACHE MANIFEST
# version 2
/style.css
/script.js
/image.jpg
</pre>
<h3>9. Form input validation</h3>
<p>HTML5 has a ton of new features for forms, one of which is handy form validation which requires no JavaScript.  In the days before Ajax, form validation was perhaps the most useful feature of JavaScript, giving developers the ability to prevent unnecessary roundtrips to the server for forms with incomplete or invalid data.</p>
<p>Now you can use the</p>
<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="text codecolorer">required</div></td></tr></tbody></table></div>
<p>attribute to make sure a particular input is filled out.  The browser won&#8217;t send the form without the completed input:</p>
<pre name="code" class="html">
&lt;input type=&quot;text&quot; name=&quot;email&quot; required&gt;
</pre>
<p>There&#8217;s much more to be said about improvements to forms in general, in addition to some other handy form validation tools such as the <a href="http://dev.w3.org/html5/spec/Overview.html#the-min-and-max-attributes">
<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="text codecolorer">min</div></td></tr></tbody></table></div>
<p>and</p>
<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="text codecolorer">max</div></td></tr></tbody></table></div>
<p>attributes and the <a href="http://dev.w3.org/html5/spec/Overview.html#the-placeholder-attribute">
<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="text codecolorer">pattern</div></td></tr></tbody></table></div>
<p>attribute.</p>
<h3>10. Video (and <a href="http://html5doctor.com/native-audio-in-the-browser/">audio</a>)</h3>
<p>The old (common example using a Flash container in an object):</p>
<pre name="code" class="html">
&lt;object width=&quot;500&quot; height=&quot;350&quot;&gt;
  &lt;param name=&quot;movie&quot; value=&quot;flashcontainer.swf&quot;&gt;
  &lt;embed src=&quot;flashcontainer.swf&quot; width=&quot;500&quot; height=&quot;350&quot;&gt;
  &lt;/embed&gt;
&lt;/object&gt;
</pre>
<p>The new:</p>
<pre name="code" class="html">
&lt;video id=&quot;movie&quot; width=&quot;500&quot; height=&quot;350&quot; controls&gt;
  &lt;source src=&quot;movie.mp4&quot; /&gt;
  &lt;source src=&quot;movie.webm&quot; type=&#x27;video/webm; codecs=&quot;vp8, vorbis&quot;&#x27; /&gt;
  &lt;source src=&quot;movie.ogv&quot; type=&#x27;video/ogg; codecs=&quot;theora, vorbis&quot;&#x27; /&gt;
&lt;/video&gt;
</pre>
<p>Ok, so the simplicity of this one is the most debatable.  The thing that&#8217;s tricky about this is that you have to encode the movie into several different formats, because of the differing implementations on browsers out there.</p>
<p>Also, here&#8217;s an example with a Flash fallback (read more <a href="http://diveintohtml5.org/video.html">here</a>):</p>
<pre name="code" class="html">
&lt;video id=&quot;movie&quot; width=&quot;500&quot; height=&quot;350&quot; controls&gt;
  &lt;source src=&quot;movie.mp4&quot; /&gt;
  &lt;source src=&quot;movie.webm&quot; type=&#x27;video/webm; codecs=&quot;vp8, vorbis&quot;&#x27; /&gt;
  &lt;source src=&quot;movie.ogv&quot; type=&#x27;video/ogg; codecs=&quot;theora, vorbis&quot;&#x27; /&gt;
  &lt;object width=&quot;500&quot; height=&quot;350&quot;&gt;
    &lt;param name=&quot;movie&quot; value=&quot;flashcontainer.swf&quot;&gt;
    &lt;embed src=&quot;flashcontainer.swf&quot; width=&quot;500&quot; height=&quot;350&quot;&gt;
    &lt;/embed&gt;
  &lt;/object&gt;
&lt;/video&gt;
</pre>
<h3>Related</h3>
<p><a href="http://davidbcalhoun.com/2010/basic-html5-template">Basic HTML5 template</a><br />
<a href="http://www.w3.org/TR/html5-diff/">W3C: HTML5 differences</a></p>
</a></p></a></p></p></h3></p></h3></p></h3>

		
		
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/2010/javascript-links-september-26">
			
				JavaScript Links From Last Week (September 26)</a>
		</h2>
		<div class="meta date">








  


<time datetime="2010-10-05T00:00:00-07:00" pubdate data-updated="true">Oct 5<span>th</span>, 2010</time></div>
	</header>
	<div class="entry-content">
		<p><a href="http://erkie.github.com/">JavaScript Asteroids</a> – blow up any webpage with this bookmarklet!</p>

<p><a href="http://js1k.com">JS1k contest</a> – and the <a href="http://marijn.haverbeke.nl/js1k.html">winner</a></p>

<p><a href="http://www.wait-till-i.com/2010/09/26/promote-better-javascript-documentation-with-promotejs/">PromoteJS</a> – Google bombing with a good intent. Better links to JavaScript documentation!</p>

<p><a href="http://webkit.org/blog/1395/running-scripts-in-webkit/">Async and defer attributes for Script tags added to WebKit</a></p>

<p><a href="http://samy.pl/evercookie/">Evercookie</a> – uses devious ways to try to track users. Hmm, this one is questionable. Please use it for good, not evil.. :/</p>

<p><a href="http://jsperf.com">JSPerf.com</a> – not really new news, but a nice quick way to test algorithm performance in JavaScript</p>

<p><a href="http://github.com/SlexAxton/yepnope.js">yepnope.js</a> – a wrapper around <a href="http://labjs.com/">LABjs Script Loader</a> to save bandwidth by only loading needed components. Think of JSON – there’s no reason to send this down the wire if the browser supports this natively.</p>

<p><a href="https://hacks.mozilla.org/2010/01/classlist-in-firefox-3-6/">Classlist in Firefox 3.6</a> – for easier manipulation of classes on elements. And <a href="http://trac.webkit.org/changeset/68440">it just landed a patch in WebKit</a>!</p>

<p>QuirksBlog: <a href="http://www.quirksmode.org/blog/archives/2010/09/click_event_del.html">Click event delegation on the iPhone</a> and an <a href="http://www.quirksmode.org/blog/archives/2010/10/click_event_del_1.html">update</a></p>

<p><a href="http://almaer.com/blog/chrome-speak-to-site-give-any-input-the-power-to-listen-to-you">Chrome Speak To Site; Give any input the power to listen to you</a> – support for input type=speech (supported by <a href="http://trac.webkit.org/export/66389/trunk/LayoutTests/fast/speech/input-appearance-speechbutton.html">WebKit</a>)</p>

<p><a href="http://embedjs.org/">embedJS</a> – selective JS for embedded devices (mobile, TV, etc.) based on capabilities.</p>

<p><a href="http://github.com/remy/jsconsole-iphone">JS Console for iOS</a> – native JS console built by Remy Sharp.</p>

<p><a href="https://no.de/">Joyent Node SmartMachine</a> – API for node.js?</p>

<p><a href="http://jsconfeu2010-bfirsh.heroku.com/">Slides: Pushing browsers to the limit (Ben Firshman)</a> – by the creator of <a href="http://www.virtualnes.com/">Virtual NES</a> – all in JavaScript!</p>

<p><a href="http://blog.mozilla.com/blog/2010/09/14/release-the-kraken-2/">Release the Kraken</a> – Mozilla releases its Kraken JavaScript benchmark, analogue to <a href="http://www2.webkit.org/perf/sunspider-0.9/sunspider.html">WebKit’s SunSpider</a></p>


		
		
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/2010/does-it-still-make-sense-to-use-em-rather-than-px">
			
				Does It Still Make Sense to Use Em Rather Than Px?</a>
		</h2>
		<div class="meta date">








  


<time datetime="2010-10-05T00:00:00-07:00" pubdate data-updated="true">Oct 5<span>th</span>, 2010</time></div>
	</header>
	<div class="entry-content">
		<p>Alex Kessinger <a href="http://twitter.com/voidfiles/status/26470129747">tweeted</a> asking if there was a reason to still use EMs instead of PX measurements in mobile. This is an interesting question, but 140 characters isn’t quite enough to explain my thoughts. So here’s an old-fashioned blog post!</p>

<p>Just a quick review: em and percentage (%) units in CSS are relative measurements, whereas px and other measurements are not. What this means is that the resulting size of relative measurements depends on the size of the parent.</p>

<h3 id="the-original-reason-to-use-ems-instead-of-px-measurements">The original reason to use EMs instead of PX measurements</h3>

<p>As far as I can tell, the original reason why it became a good practice to use EMs was because of page scaling and accessibility reasons. When developers used PX measurements, they found that when the page was scaled (using Ctrl + Scroll Wheel), the parts of the page with fixed PX measurements didn’t scale.</p>

<p>Oh no! So when a user with poor eyesight tried to scale a page to read the text better, it turns out that the text they were interesting in making bigger actually didn’t change size at all!</p>

<p>So is this still the case today? By and large, no. All modern browsers except IE6 will now scale pages correctly, regardless of the type of CSS units used.</p>

<p>From what I’ve heard, there are still many users with disabilities using IE6, but the reason is because they don’t want to upgrade their copy of the screen reader JAWS, which is quite expensive. However, these users obviously aren’t affected by page scaling issues because they are blind.</p>

<h3 id="maintainability-concerns">Maintainability concerns</h3>

<p>Even if the original reason to use EMs (above) is no longer valid, I still believe there are good reasons to use them.</p>

<p>One of the main reasons is maintainability. If a page is designed to have one base font size (applied to the Body) and all other font sizes on the page use relative units (EMs or percentages), changing the font sizes later becomes almost trivial. If someone wants to later increase the size of the fonts on their entire page, all they need to do is increase the one base font size.</p>

<p>This might be a bit of an edge case, but the elegance of the solution is too enticing!</p>

<h3 id="media-queries-and-mobile">Media queries and mobile</h3>

<p>Very closely related to the above point is the subject of media queries. Recently media queries have been somewhat hailed as a <a href="http://www.quirksmode.org/blog/archives/2010/09/rethinking_the.html">panacea for all mobile development</a>. I slightly disagree, but that’s a topic for another post!</p>

<p>The main point here is that people are now using media queries to quickly make mobile-friendly versions of their desktop websites. That’s awesome, there’s no doubt about that.</p>

<p>So what about EMs and PX measurements? Here’s the problem: if a developer coded their webpage in such a way that they used fixed pixel measurements, the amount of CSS required in the mobile media query could be obscenely large. This is because each individual element with pixel measurement was <em>designed with the desktop in mind</em>! This makes the task of adapting to different content very painful.</p>

<p>On the other hand, think about a page designed with relative units such as EMs or percentages. This page was designed so that each element was proportional to its parent element, so that ideally changing the size of the entire page occurs in only a few places, at the Body level of the document. Suddenly the CSS required for the mobile media query is much more manageable, since it’s now (ideally) only changing a few values on the Body element, not on <em>every</em> element on the page.</p>


		
		
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/2010/mobile-monday-best-practices-mobile-design-september-20-2010">
			
				Mobile Monday: Best Practices for Mobile Design (September 20, 2010)</a>
		</h2>
		<div class="meta date">








  


<time datetime="2010-09-21T00:00:00-07:00" pubdate data-updated="true">Sep 21<span>st</span>, 2010</time></div>
	</header>
	<div class="entry-content">
		<p><a href="http://davidbcalhoun.com/wp-content/uploads/2010/09/momo.jpg"><img src="http://davidbcalhoun.com/wp-content/uploads/2010/09/momo-1024x768.jpg" alt="" title="momo" width="100%" class="size-large wp-image-464" /></a><em>Mobile Monday panel left to right: Wesley Yun (RIM), Jared Benson (Punchcut), Anne Sullivan (Microsoft/Tellme Networks), Chris Nesladek (Google), Sue Booker (Nokia) (taken with my iPhone 3GS)</em></p>

<p>I just came back from <a href="http://www.mobilemonday.us/?p=424">Mobile Monday Silicon Valley: Best Practices for Mobile Design</a> at the <a href="http://www.computerhistory.org/">Computer History Museum</a> in Mountain View. This was a panel discussion with representatives from Google, Microsoft, Nokia, RIM, and Punchcut. There were quite a few little nuggets of wisdom which I tried to write down in bullet form:</p>

<h4 id="sue-booker-ued-nokia">Sue Booker, UED (Nokia)</h4>

<ul>
  <li>1 trillion revenue worldwide from disabled users. 60m disabled users in the US.</li>
  <li>assume the user is multitasking</li>
  <li>apps will be used in totally unexpected ways</li>
  <li>not just physical disabilities.. also people in different situations or environmental limitations (no voice, no audio, limited bandwidth, etc)</li>
  <li>introduce new complicated functionality gradually. It’s easy to tell if it’s a new user or a repeat user, so slowly give repeat users more info.</li>
  <li>final takeaway: think of all types of users</li>
</ul>

<h4 id="chris-nesladek-commerce-ui-lead-google">Chris Nesladek, Commerce UI Lead (Google)</h4>

<ul>
  <li>
    <ol>
      <li>keep it simple</li>
    </ol>
  </li>
  <li>
    <ol>
      <li>content is king</li>
    </ol>
  </li>
  <li>
    <ol>
      <li>make it fun</li>
    </ol>
  </li>
  <li>
    <ol>
      <li>make it fast</li>
    </ol>
  </li>
  <li>
    <ol>
      <li>do one thing as an experiment</li>
    </ol>
  </li>
  <li>new UI challenge in the future: flexible screens?</li>
  <li>discoverability of new features… for an Android feature: link to video demo on vimeo</li>
  <li>final takeaway: designers, make friends with developers, because that’s how the best products get made</li>
</ul>

<h4 id="anne-sullivan-ui-designer-microsofttellme-networks">Anne Sullivan, UI Designer (Microsoft/Tellme Networks)</h4>

<ul>
  <li>her focus: designing for speech on mobile</li>
  <li>problem: discoverability of speech</li>
  <li>understand the capabilities and limitations of speech</li>
  <li>graceful degradation for speech: what happens when a voice command isn’t recognized?</li>
  <li>be transparent about what happens about processing in the background. For instance, geolocation. Allow the user to change or override this info.</li>
  <li>paper prototypes are very helpful</li>
  <li>discoverability of voice command activation is hard.. have to test on device itself (i.e. to find the right button placement, etc.)</li>
  <li>final takeaway: forget powerpoint! do presentations on the phone itself</li>
</ul>

<h4 id="jared-benson4-design-punchcut"><a href="http://twitter.com/benson">Jared Benson</a>, Design (Punchcut)</h4>

<ul>
  <li>iterate quickly</li>
  <li>no substitute for device itself</li>
  <li>final takeaway: involve designers from the beginning</li>
</ul>

<h4 id="wesley-yun5-ux-rim"><a href="http://twitter.com/nuysew">Wesley Yun</a>, UX (RIM)</h4>

<ul>
  <li>don’t make assumptions about touch interfaces (common gestures). The touchscreen is still pretty new, so not everyone is used to this yet</li>
  <li>don’t be too clever for your users. Think of users first, and do what makes sense.</li>
  <li>prototype and fail quickly. If you’re not failing, you’re not innovating</li>
  <li>make sure unusual new interaction isn’t a core functionality (for instance, four-fingered scroll)</li>
  <li>if you make something redundant, you’ve failed as a designer</li>
  <li>final takeaway: make it obvious to users</li>
</ul>


		
		
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/2010/server-side-console-log">
			
				Server Side console.log</a>
		</h2>
		<div class="meta date">








  


<time datetime="2010-09-15T00:00:00-07:00" pubdate data-updated="true">Sep 15<span>th</span>, 2010</time></div>
	</header>
	<div class="entry-content">
		<h3 id="the-problem">The problem</h3>

<p>On the desktop we’re quite privileged to have nice debugging tools such as Firebug and Web Inspector in Webkit-based browsers. But when it comes to mobile, debugging JavaScript with</p>

<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;">
  <table cellspacing="0" cellpadding="0">
    <tr>
      <td class="line-numbers">
        <div>
          1<br />
        </div>
      </td>
      
      <td>
        <div class="text codecolorer">
          console.log
        </div>
      </td>
    </tr>
  </table>
</div>

<p>isn’t quite as easy.</p>

<p>Probably the best available tool on mobile at the moment is mobile Safari’s console, which looks like the following when enabled (Settings -&gt; Safari -&gt; Developer -&gt; Debug Console):<br />
&lt;div id=&#8221;attachment_453&#8221; style=&#8221;width: 710px&#8221; class=&#8221;wp-caption aligncenter&#8221;&gt;
  <img src="http://davidbcalhoun.com/wp-content/uploads/2010/09/mobile-safari-console.png" alt="" title="mobile-safari-console" width="700" height="480" class="size-full wp-image-453" />&lt;p class=&#8221;wp-caption-text&#8221;&gt;
    Mobile Safari’s debug console
  &lt;/p&gt;
&lt;/div&gt;</p>

<p>On the left you can see the debug console displayed above the document itself, and on the right is an example of what you might see after outputting an object or a string of text to</p>

<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;">
  <table cellspacing="0" cellpadding="0">
    <tr>
      <td class="line-numbers">
        <div>
          1<br />
        </div>
      </td>
      
      <td>
        <div class="text codecolorer">
          console.log
        </div>
      </td>
    </tr>
  </table>
</div>

<p>. It’s the best debugging tool on mobile, but it’s not without its issues.</p>

<p>The first issue is that the debug console is taking up space in the screen and interfering with how an actual user would view the website. I could image this could become particularly annoying when trying to develop a web app in the style of the new YouTube mobile, which doesn’t function like a traditional webpage at all, and relies on the screen being a certain height in order to display its content.</p>

<p>The second issue is that you can’t see the contents of JavaScript Objects. We’re a bit spoiled being able to see a tree view of objects on the latest browsers with the latest debugging tools, and therefore it makes the experience on mobile Safari less than adequate. When we type</p>

<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;">
  <table cellspacing="0" cellpadding="0">
    <tr>
      <td class="line-numbers">
        <div>
          1<br />
        </div>
      </td>
      
      <td>
        <div class="text codecolorer">
          console.log(navigator)
        </div>
      </td>
    </tr>
  </table>
</div>

<p>all we can see on mobile Safari is</p>

<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;">
  <table cellspacing="0" cellpadding="0">
    <tr>
      <td class="line-numbers">
        <div>
          1<br />
        </div>
      </td>
      
      <td>
        <div class="text codecolorer">
          [object Navigator]
        </div>
      </td>
    </tr>
  </table>
</div>

<p>, which leaves something to be desired.</p>

<p>So what about Android? Google offers something called <a href="http://developer.android.com/guide/developing/tools/adb.html">Android Debug Bridge</a>, which is a client-server debugging solution that can be used either for web or application development. As such, when you view the messages the devices sends to the server, the vast majority of messages will be messages about low-level operations, stuff we usually don’t care much about when developing with JavaScript. The workaround for this is to grep for “console” on the command line, which will only display the messages we’re interested in.</p>

<h3 id="the-solution-server-side-consolelog">The solution: server side console.log!</h3>

<p>Why not just send the contents of your console message to a server, and have it log it? The concept is pretty simple:</p>

<ol>
  <li>Create a log function that sends an XHR to a server.</li>
  <li>Have the server process the request and log the message to a file.</li>
  <li>Tail the end of the file on the command line to see the latest messages.</li>
</ol>

<p>The implementation is pretty simple. In JavaScript we have this code:</p>

<pre name="code" class="JScript">(function(){

// define console if not already defined
console || (console = {});

// new toFile method
console.toFile = function(log) {
  // variable declarations
  var http, url, params;
  
  // might as well use the traditional console.log() as well
  console.log(log);
  
  // ajax request
  http = new XMLHttpRequest();
  url = "//example.com/log.php";
  params = "log=" + Date.now() + ' ' + escape(sanitize(log));
  http.open("POST", url, true);
  http.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
  http.send(params);
}

// do something special if txt is an object
var sanitize = function(txt) {
  var output, x;
  
  if(typeof txt == 'object') {
    // create a new object to get around circular references
    output = {};
    for(x in txt) {
        // type conversion of each element to a string
        output[x] = txt[x] + '';
    }
    output = JSON.stringify(output, null, 2);
  } else {
    output = txt;
  }
  
  return output;
}

})();
</pre>

<p>In summary, the above code adds a new method to the console object called</p>

<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;">
  <table cellspacing="0" cellpadding="0">
    <tr>
      <td class="line-numbers">
        <div>
          1<br />
        </div>
      </td>
      
      <td>
        <div class="text codecolorer">
          toFile
        </div>
      </td>
    </tr>
  </table>
</div>

<p>, which simply takes the inputted data and sends it to the specified URL. The only bit of trickery here is the function</p>

<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;">
  <table cellspacing="0" cellpadding="0">
    <tr>
      <td class="line-numbers">
        <div>
          1<br />
        </div>
      </td>
      
      <td>
        <div class="text codecolorer">
          sanitize
        </div>
      </td>
    </tr>
  </table>
</div>

<p>, which detects if the message being passed in is an object. If it is, it copies it to a new object containing only strings (which gets around JSON “circular reference” errors) and runs JSON.stringify() on it, which lets us peek into its contents one level deep.</p>

<p>The server side PHP code to make this work is even simpler:</p>

<pre name="code" class="PHP">// log.php
&lt;?php

// take advantage of error_log to log the message to the file console.log
@error_log($_POST['log'] . "\n", 3, 'console.log');

?&gt;
</pre>

<p>On the server, we log in with terminal, navigate to the directory containing the file console.log, and simply tail the end of the file, which shows live updates as new messages are added to the end of the file:</p>

<pre name="code">tail -f console.log
</pre>

<h3 id="example">Example</h3>

<p>Once we have the above code in place, using the console is very simple:</p>

<pre name="code" class="JScript">console.toFile('hello world!');
console.toFile(navigator);
</pre>

<p>After running this code, you should see this pop up on your terminal:</p>

<pre name="code">1284574866900 hello world!
1284575008914 {
  "geolocation": "[object Geolocation]",
  "standalone": "false",
  "cookieEnabled": "true",
  "language": "en-us",
  "productSub": "20030107",
  "product": "Gecko",
  "appCodeName": "Mozilla",
  "mimeTypes": "[object MimeTypeArray]",
  "vendorSub": "",
  "vendor": "Apple Computer, Inc.",
  "platform": "iPhone",
  "appName": "Netscape",
  "appVersion": "5.0 (iPhone; U; CPU iPhone OS 4_1 like Mac OS X; en-us) AppleWebKit/532.9 (KHTML, like Gecko) Version/4.0.5 Mobile/8B117 Safari/6531.22.7",
  "userAgent": "Mozilla/5.0 (iPhone; U; CPU iPhone OS 4_1 like Mac OS X; en-us) AppleWebKit/532.9 (KHTML, like Gecko) Version/4.0.5 Mobile/8B117 Safari/6531.22.7",
  "plugins": "[object PluginArray]",
  "onLine": "true",
  "javaEnabled": "function javaEnabled() {\n    [native code]\n}",
  "getStorageUpdates": "function getStorageUpdates() {\n    [native code]\n}",
  "registerProtocolHandler": "function registerProtocolHandler() {\n    [native code]\n}",
  "registerContentHandler": "function registerContentHandler() {\n    [native code]\n}"
}
</pre>

<p>Sweet! Now we can easily see console messages from <em>actual devices</em>. You can potentially use this code to log Events as they occur (on click or touch interactions) and view the actual x/y coordinate values as they’re being detected on the device!</p>

<h3 id="related">Related</h3>

<p>Alex Kessinger implemented a <a href="http://alexkessinger.net/story/one-file-remote-consolelog-using-nodejs">similar concept with node.js running locally</a></p>

<h3 id="update">Update</h3>

<p>It turns out that Joe Hewitt did this before me with his <a href="http://www.joehewitt.com/blog/firebug_for_iph.php">“Firebug for iPhone”</a>. I have no idea why it took me so long to find this!</p>


		
		
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/2010/using-navigator-connection-android">
			
				Optimizing Based on Connection Speed: Using navigator.connection on Android 2.2+</a>
		</h2>
		<div class="meta date">








  


<time datetime="2010-09-14T00:00:00-07:00" pubdate data-updated="true">Sep 14<span>th</span>, 2010</time></div>
	</header>
	<div class="entry-content">
		<h3 id="introduction">Introduction</h3>

<p>A little while back <a href="http://www.mobilexweb.com/blog/android-froyo-html5-accelerometer-flash-player">this post</a> made the rounds, which took us on a journey through some of the new features introduced in the browser in Android 2.2 Froyo. Among the most overlooked features are the file upload functionality (you can upload photos from your browser now! But we’re still waiting on iPhone to support this…) and a little-known JavaScript addition to the Browser Object Model (BOM) in the form of</p>

<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;">
  <table cellspacing="0" cellpadding="0">
    <tr>
      <td class="line-numbers">
        <div>
          1<br />
        </div>
      </td>
      
      <td>
        <div class="text codecolorer">
          navigator.connection
        </div>
      </td>
    </tr>
  </table>
</div>

<p>. Let’s take a peek at its contents:</p>

<pre name="code" class="JScript">// contents of navigator.connection object
{
  "type": "3",
  "UNKNOWN": "0",
  "ETHERNET": "1",
  "WIFI": "2",
  "CELL_2G": "3",
  "CELL_3G": "4"
}
</pre>

<p>This is data taken from a Nexus One running on a 2G network, so you can see that the type is set to 3, which corresponds with “CELL_2G”. In other words, this phone runs on a slower network, so from a performance perspective, you probably want to consider delivering a lower-bandwidth experience.</p>

<p>So how exactly do we target this?</p>

<h3 id="the-code">The code</h3>

<p>The purpose of this code is to first find the connection speed, and then add a class to the</p>

<div class="codecolorer-container text twitlight" style="overflow:auto;white-space:nowrap;width:435px;">
  <table cellspacing="0" cellpadding="0">
    <tr>
      <td class="line-numbers">
        <div>
          1<br />
        </div>
      </td>
      
      <td>
        <div class="text codecolorer">
          html
        </div>
      </td>
    </tr>
  </table>
</div>

<p>element based on this connection. The goal is to be able to target these connections with CSS, so the right content is delivered to the right connection:</p>

<pre name="code" class="CSS">.highbandwidth .logo   { background-image:url('logo-high.jpg'); }
.mediumbandwidth .logo { background-image:url('logo-medium.jpg'); }
.lowbandwidth .logo    { background-image:url('logo-low.jpg'); }
</pre>

<p>And here’s the JavaScript:</p>

<pre name="code" class="JScript">var connection, connectionSpeed, htmlNode, htmlClass;

// create a custom object if navigator.connection isn't available
connection = navigator.connection || {'type':'0'};

// set connectionSpeed
switch(connection.type) {
  case connection.CELL_3G:
    // 3G
    connectionSpeed = 'mediumbandwidth';
  break;
  case connection.CELL_2G:
    // 2G
    connectionSpeed = 'lowbandwidth';
  break;
  default:
    // WIFI, ETHERNET, UNKNOWN
    connectionSpeed = 'highbandwidth';
}

// set the connection speed on the html element, i.e. &lt;html class="lowbandwidth"&gt;
htmlNode = document.body.parentNode;
htmlClass = htmlNode.getAttribute('class') || '';
htmlNode.setAttribute('class', htmlClass + ' ' + connectionSpeed);
</pre>

<h3 id="give-the-user-control">Give the user control!</h3>

<p>Just as it’s a good practice to give the user a link to the full desktop version of the website, if you’re going to deliver different content based on different connection speeds, then it’s highly advisable to give the user full control.</p>

<p>So give them control! You can provide something like the following:</p>

<div id="bandwidthControls">
  <p>
    Mobile | <a href="#">Desktop</a>
  </p>
  
  <p>
    Bandwidth: <a href="#">High</a> | <a href="#">Medium</a> | Low
  </p>
</div>


		
		
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/2010/basic-html5-template">
			
				Basic HTML5 Template</a>
		</h2>
		<div class="meta date">








  


<time datetime="2010-09-08T00:00:00-07:00" pubdate data-updated="true">Sep 8<span>th</span>, 2010</time></div>
	</header>
	<div class="entry-content">
		<h3 id="introduction">Introduction</h3>

<p>Often times I end up creating short pages for testing short pieces of code, and I only need a very basic HTML template to write in. Short of using <a href="http://html5boilerplate.com/">HTML5 Boilerplate</a>, I just use a quick piece of code like the following. (note: yes, this has issues in IE, so you may want to use <a href="http://remysharp.com/2009/01/07/html5-enabling-script/">HTML5 Shiv/Shim</a>)</p>

<h3 id="the-code">The code</h3>

<pre name="code" class="html">&lt;!doctype html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;meta charset="utf-8"/&gt;
  &lt;title&gt;&lt;/title&gt;

  &lt;meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"/&gt;
  &lt;link rel="stylesheet" href=""/&gt;
&lt;/head&gt;

&lt;body&gt;
  &lt;header&gt;
  &lt;/header&gt;

  &lt;div&gt;
  &lt;/div&gt;

  &lt;footer&gt;
  &lt;/footer&gt;

  &lt;script src=""&gt;&lt;/script&gt;
&lt;/body&gt;

&lt;/html&gt;
</pre>

<p>Edit: Self-closed tags for compatibility.<br />
Edit2: removed type=”text/css” from the link tag</p>


		
		
	</div>

</article>

<nav id="pagenavi">
    
        <a href="/blog/page/5/" class="prev">Previous</a>
    
    
        <a href="/blog/page/7/" class="next">Next</a>
    
</nav>
</div>
	<footer id="footer" class="inner"><br>
<br>
<br>
<br>
&copy; 2015
<a href="mailto:david.b.calhoun@gmail.com">David Calhoun</a> (<a href="https://twitter.com/franksvalli">@franksvalli</a>) - <a href="https://www.linkedin.com/in/davidcalhoun">LinkedIn</a> - <a href="http://themaingate.net/resume/">Resume</a></footer>
	<!-- <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script src="/javascripts/slash.js"></script> -->
<!-- <script src="/javascripts/hyphenator.js"></script> -->


<script type="text/javascript">
      var disqus_shortname = 'davidbcalhoun';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>




<script src="/javascripts/main.js"></script>
<!-- <script src="/javascripts/negative-scroll-blur.js"></script> -->

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-5530615-3', 'davidbcalhoun.com');
  ga('send', 'pageview');

</script>

</body>
</html>
