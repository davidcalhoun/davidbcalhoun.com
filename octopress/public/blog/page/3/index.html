
<!DOCTYPE HTML>
<html lang="en-GB">
<head>
	<meta charset="utf-8">
	<title>  | David Calhoun's blog</title>

	<meta name="author" content="David Calhoun">

<meta name="description" content="After work today, I stopped by the old bustling Apple Store in Palo Alto. I was there for a bit of a peek at what my next blank check to Apple would &hellip;"> <meta name="keywords" content="">

	<meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="/atom.xml" rel="alternate" title="David Calhoun's blog" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="/javascripts/html5.js"></script><![endif]-->
	

</head>



<body>
	<header id="header" class="inner"><h1><a href="/">David Calhoun's blog</a></h1>
<span class="tagline"></span>
<!-- <nav id="main-nav"><ul>
	<li><a href="/about">About</a></li>
	<li><a href="/archives">Archives</a></li>
	<li><a href="/contact">Contact</a></li>
</ul>
</nav> -->
<!-- <nav id="mobile-nav"> -->
<!-- 	<div class="alignleft menu"> -->
<!-- 		<a class="button">Menu</a> -->
<!-- 		<div class="container"><ul>
	<li><a href="/about">About</a></li>
	<li><a href="/archives">Archives</a></li>
	<li><a href="/contact">Contact</a></li>
</ul>
</div> -->
<!-- 	</div> -->
<!-- </nav> -->


</header>

	<div id="content" class="inner">


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/2012/initial-thoughts-on-the-retina-macbook-pro-after-a-few-minutes-at-the-store">
			
				Initial Thoughts on the Retina MacBook Pro (After a Few Minutes at the Store)</a>
		</h2>
		<div class="meta date">








  


<time datetime="2012-06-19T00:00:00-07:00" pubdate data-updated="true">Jun 19<span>th</span>, 2012</time></div>
	</header>
	<div class="entry-content">
		<p>After work today, I stopped by the old bustling Apple Store in Palo Alto. I was there for a bit of a peek at what my next blank check to Apple would bring me.</p>

<p>I was between tables going back and forth between the updated MacBook Pro (non-retina) and the Retina MacBook Pro and came away with some initial impressions. I couldn’t find these sort of “impartial” impressions elsewhere, so I thought I’d record these impressions for myself.</p>

<h3 id="prima-facie">Prima facie</h3>

<p>Initial thoughts: the screen seemed to be slightly more crisp, especially the icons in the dock. However, the form factor made more of an impression than the screen: the laptop is significantly lighter than previous models I’ve used (for the record, I use a late 2008 MBP at home, and have been using newer MacBook Pros for work purposes). I picked up the laptop expecting it to be nearly as heavy as what I’m used to, and overcompensated when lifting it up. That’s a good thing.</p>

<p>The lady at the store opened up iPhoto and showed me a few photos. It seemed to be crisper, but nothing like the noticeable difference when I upgraded from an iPhone 3GS to an iPhone 4S. She also opened up the Apple homepage on the Retina display and on a non-Retina, and pointed out a specific piece of text. In this case it was text in a graphic. We had to shuffle back and forth in order to be convinced. In this case we were actually looking at the text on a graphic on the Apple site):</p>

<p><a href="http://images.apple.com/home/images/macbookpro_title.png"><img src="http://davidbcalhoun.com/wp-content/uploads/2012/06/non-retina.png" alt="Non-retina text" title="Non-retina text" width="374" height="124" class="aligncenter size-full wp-image-905" /></a></p>

<p><a href="http://images.apple.com/home/images/macbookpro_title_2x.png"><img src="http://davidbcalhoun.com/wp-content/uploads/2012/06/retina.png" alt="Retina text" title="Retina text" width="748" height="248" class="aligncenter size-full wp-image-906" /></a></p>

<p>Non-retina (top) and Retina (bottom) graphics at native resolution.</p>

<p>(technical note: the Retina version is served via JavaScript – see <a href="http://blog.cloudfour.com/how-apple-com-will-serve-retina-images-to-new-ipads/">http://blog.cloudfour.com/how-apple-com-will-serve-retina-images-to-new-ipads/</a>)</p>

<h3 id="good-for-photo-editing">Good for photo editing?</h3>

<p>The differences in the text and dock icons was easier to see than the difference between photos in iPhoto. As an amateur photographer, I’m unsure if this makes a difference. When editing photos, instead of zooming my head closer to the screen I end up leaving my head stationary and zooming with controls in the photo editing program I use. The Retina screen makes the experience a bit nicer, but obviously isn’t a requirement for producing good detailed photos. For photographers, I think there’s an apt analogy. The Retina screen is kind of like an expensive lens: it definitely help, but it won’t guarantee good photos, and not all good photos are necessarily taken with good lenses.</p>

<h3 id="application-support-or-lack-thereof">Application support (or lack thereof)</h3>

<p>One thing that was also evident is that not everything is ready for the Retina screen. Photoshop surprisingly didn’t support it, even though the saleslady mentioned they had an early look at the Retina MacBook Pro. Surprisingly, not even the Apple Store greeting/icons on the demo mode laptops was ready for the screen (it was visibly pixelated).</p>

<p>The guy next to me predictably loaded up Microsoft Word and complained about it looking ugly (apparently he got the memo and wanted to act surprised). Like other programs, it’s just a matter of time until they fix it. Whatever, I can deal with that.</p>

<p>I tried to load up YouTube in Safari, but I didn’t have a good 1080p video to test (for the record, I tried this one, which doesn’t look too great at 1080p: <a href="http://www.youtube.com/watch?v=pjC72RIDt_A">http://www.youtube.com/watch?v=pjC72RIDt_A</a>). I’ll have to try again later.</p>

<h3 id="testing-out-different-viewing-distances">Testing out different viewing distances</h3>

<p>Lastly, I tried several viewing distance tests. I found that at my normal viewing distance (sorry I don’t have measurements) I could definitely tell that things were a little sharper, but again, the difference was slight. As I moved back, it didn’t take long for the difference to be indiscernible compared to the non-Retina screen. Starting again from normal viewing distance, the closer I got, the easier it was to tell that it was a “Retina” screen. In my mind, there’s a logical reason “Retina” came first to the iPhone, then the iPad, and now the MacBook Pro, in that order. It simply becomes less discernable at longer viewing distances.</p>

<h3 id="afterthoughts-impact-on-web-development">Afterthoughts: impact on web development?</h3>

<p>At least on my initial impression, it didn’t seem that the new Retina screen necessitated too much of a change in websites offering higher-resolution graphics. They can get along just fine not upgrading, but I suppose folks will enjoy high-res graphics when they see it.</p>

<p>It’s now been a few years after the iPhone 4 was released, and years since high pixel density Android phones have been on the market, and I still still see noticeably blurry graphics on mobile sites. Hopefully at the greater viewing distance afforded by the MacBook Pro, there will be less of a shock at seeing the contrast between sharp text and a blurry photo. Perhaps a laptop is a nice compromise: good enough to enjoy “Retina” graphics where supported, but not too distracting when graphics aren’t optimized for the high pixel density.</p>

<h3 id="tldr-too-long-didn8217t-read">TLDR (Too long, didn’t read)</h3>

<p>TLDR/Conclusion: the light form factor was more of a sell for me than the Retina screen. Though the Retina screen is nice, it’s hard to justify the purchase on that alone. However, the purchase becomes justified when coupled with a nice processor bump and nice form factor. Since I’ve been waiting to upgrade for a while, it’s only a matter of time before I get one. But as I don’t NEED one yet, I’ll wait until prices drop a bit (as they always do).</p>


		
		
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/2012/i-think-im-learning-japanese-jlpt-vocabulary-words-1-to-50-audio">
			
				I Think I&#8217;m Learning Japanese: JLPT Vocabulary Words 1 to 50 (Audio)</a>
		</h2>
		<div class="meta date">








  


<time datetime="2012-05-28T00:00:00-07:00" pubdate data-updated="true">May 28<span>th</span>, 2012</time></div>
	</header>
	<div class="entry-content">
		<p>I have been learning bits and pieces of Japanese throughout the years, and picking up more and more on each of my trips to Japan. But now it’s time to buckle down and get disciplined about learning, and make some real progress.</p>

<p>As with learning any language, having a decent vocabulary is critical in order to form coherent sentences, so I’ve decided to focus on this for the time being, in addition to learning hiragana and katakana and getting it down pat, with no errors.</p>

<p>You may already be familiar with the JLPT, the Japanese Language Proficiency Test, which has difficulty ranges between 1-5, with 1 being the most difficult. So let’s start together at JLPT 5. <img src="http://davidbcalhoun.com/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /> </p>

<p>Thanks to <a href="http://www.japanmoji.com/2010/07/vocabulary-list.html">this site</a>, I’ve use the following first 50 vocabulary words and <a href="http://davidbcalhoun.com/b/jlpt5-vocabulary-1-50.mp3">recorded myself</a> going through them so I can commit these to memory (many I already know, which is a good thing I suppose!). Of course I will be speaking only to the best of my ability, so the pronunciation of many words will likely be off in some way or another. In any case, it should be useful to listen to on repeat to get these drilled into my head! I’ve uploaded my recording for your convenience, but note again that the pronunciation isn’t perfect, and this is a free service, so don’t complain. <img src="http://davidbcalhoun.com/wp-includes/images/smilies/icon_razz.gif" alt=":P" class="wp-smiley" /> </p>

<p><a href="http://davidbcalhoun.com/b/jlpt5-vocabulary-1-50.mp3">Audio (MP3): JLPT 5 vocabulary words 1 to 50</a></p>

<ol>
  <li>ああ – Ah!  </li>
  <li>あいます (会います, aimasu) – see (a person), meet  </li>
  <li>あおい (aoi) – blue  </li>
  <li>あかい (赤い, akai), – red  </li>
  <li>あかるい (akarui) – light, bright  </li>
  <li>あき (aki) – autumn, fall  </li>
  <li>あきます (akimasu) – open [ex. doa ga akimasu]  </li>
  <li>あけます (akemasu) – open [ex. watashi wa doa wo akemasu]  </li>
  <li>あげます (agemasu) – give  </li>
  <li>あさ (朝, asa) – morning  </li>
  <li>あさごはん (朝ごはん,asa-gohan) – breakfast  </li>
  <li>あさって (asatte) – the day after tomorrow  </li>
  <li>あし (足, ashi) – leg, foot  </li>
  <li>あした (ashita) – tomorrow  </li>
  <li>あそこ (asoko) – over there  </li>
  <li>あそびます (asobimasu) – play  </li>
  <li>あたたかい (atatakai) – warm  </li>
  <li>あたま (atama) – head  </li>
  <li>あたらしい (atarashii) – new, fresh  </li>
  <li>あちら (achira) – over there  </li>
  <li>あつい (atsui) – hot, thick  </li>
  <li>あと (後,ato) – after, later  </li>
  <li>あなた (anata) – you  </li>
  <li>あに (ani) – [my] brother  </li>
  <li>あね (ane) – [my] sister  </li>
  <li>あの (ano) – that, well, let me see  </li>
  <li>アパート (apa-to) – apartment  </li>
  <li>あびます (abimasu) – take [a shower]  </li>
  <li>あぶない (abunai) – dangerous  </li>
  <li>あまい (amai) – sweet  </li>
  <li>あまり (amari) – not so..  </li>
  <li>あめ (雨,ame) – rain  </li>
  <li>あらいます (araimasu) – wash  </li>
  <li>あります (arimasu) – be [existence]  </li>
  <li>あるきます (歩きます,arukimasu) – walk  </li>
  <li>あれ (are) – that  </li>
  <li>いい/よい (ii/ yoi) – good  </li>
  <li>いいえ (iie) – no  </li>
  <li>いいます (言います,iimasu) – say, tell  </li>
  <li>いえ (家,ie) – house, home  </li>
  <li>いきます (行きます, ikimasu) – go  </li>
  <li>いくつ (ikutsu) – how many, how old  </li>
  <li>いくら (ikura) – how much  </li>
  <li>いけ (ike) – pond  </li>
  <li>いしゃ (isha) – doctor  </li>
  <li>いす (isu) – chair  </li>
  <li>いそがしい (isogashii) – busy  </li>
  <li>いたい (itai) – be painful  </li>
  <li>いち (一, ichi) – one  </li>
  <li>いちにち (一日,ichi nichi) – one day</li>
</ol>

<p>If you’re feeling especially motivated, go ahead and study <a href="http://www.japanmoji.com/2010/07/vocabulary-list-51-to-100.html">words 50 to 100</a> and <a href="http://www.japanmoji.com/2010/11/vocabulary-list-101-to-150.html">words 101 to 150</a>. I’ll record those soon of course, so stay tuned.</p>


		
		
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/2012/response-to-whats-next-for-mobile-now-that-adaptive-design-has-failed">
			
				Response to &#8220;What’s Next for Mobile Now That Adaptive Design Has Failed?&#8221;</a>
		</h2>
		<div class="meta date">








  


<time datetime="2012-05-23T00:00:00-07:00" pubdate data-updated="true">May 23<span>rd</span>, 2012</time></div>
	</header>
	<div class="entry-content">
		<p>There’s been a flurry of response to <a href="http://venturebeat.com/2012/05/22/adaptive-design-has-failed/">this article, entitled “What’s next for mobile now that adaptive design has failed?”</a>.</p>

<p>There’s many problems with this article, so it’s hard to know where to start.</p>

<p>I will admit that defenders of responsive design have come out of the woodwork in trashing this article, but I suppose I count myself among them, being a proponent of responsive design. I still see the web heading that direction, and I definitely don’t see it heading in the direction the author of the article has described.</p>

<h3 id="adaptive--responsive">Adaptive != Responsive</h3>

<p>Like others have said, adaptive isn’t the same as responsive. I hate that both have become buzzwords to be thrown around by execs, but they should at least be used appropriately. (see <a href="http://www.linkedin.com/answers/technology/web-development/TCH_WDD/961492-23942997">this page</a> for a good discussion of the differences). This article conflates the two.</p>

<p>I’ll assume for the purpose of this argument that we’re referring to responsive design.</p>

<h3 id="unproven-assumption-responsive-design-has-failed">Unproven assumption: responsive design has failed</h3>

<p>There’s an assumption that responsive design has failed, but no argument for it, which means by the end of the article it remains an assumption. I’ll assume its purpose was solely as an attention-seeking headline. Not much more to be said there, so let’s pass over it.</p>

<h3 id="tablets--magazines-vertical-scroll--bad-pagination--good">Tablets = Magazines?, Vertical Scroll = Bad?, Pagination = Good?</h3>

<p>There’s an assumption that users equate tablets to magazines, and therefore expect to swipe through pages. I believe there’s some sort of interaction or deal the author has with Pressly (which he mentions and has retweeted on Twitter), so I can understand why they’d be pushing their agenda and usage model, which is very much of the “iPad-magazine-page-flip” sort.</p>

<p>But there’s a reason pagination is still an optional feature not turned on by default in apps such as Instapaper: it’s because users are very familiar and comfortable with vertical scrolling of content on the web, and possibly in some cases more comfortable than a page-based format. They are as comfortable with vertical scrolling as the author would say they are with turning the pages of a magazine.</p>

<p>I’m the age where I’ve seen the decline of newspapers and magazines and am actually more comfortable with a vertical-scrolling interface as opposed to a page-flipping interface as older folks might be used to in magazines.</p>

<p>Just because the interaction model worked for an older medium doesn’t mean it’ll work or is even the best for new mediums. If that were true, we’d still have rotary dial inputs on our touchscreen phones, simply because some phone exec insisted that users were more familiar and comfortable with the rotary dial interaction model.</p>

<h3 id="users-love-those-full-screen-ads">Users Love Those Full-Screen Ads</h3>

<p>Users do NOT like full-screen ads. To think otherwise can be very rightly said to be a delusion of grandeur. Go to the app store, look at the iPad CNET app reviews, and tell me that users are thrilled about seeing a full-screen ad pop over their content when they open the app. Quite the opposite, that turns out to be the main complaint by a long shot, or at least it was for a long while after the app was released. I know. I was there to see it happen, and to see a blind eye turned toward the problem.</p>

<h3 id="successful-advertising--successful-user-experience">Successful advertising != Successful User Experience</h3>

<p>Advertising isn’t a gauge of user experience. This is the hubris and the downfall of CBS and anyone who believes otherwise. More ad revenue means more aggressive ads, more fullscreen ads, and more ways to trick the user into clicking ads. This is the opposite of a good user experience. The real user base isn’t there to click on ads – they’re there to read content, and everything else is a distraction. This is the catch-22 of this model, and those that don’t see that will never know they need to toe the line and maintain a delicate balance. Worst of all, those who completely miss the point will mistake successful advertising with a successful user experience (which here is as easily conflated as adaptive and responsive design have been).</p>

<p>Sometimes companies don’t realize there’s a point of no return when ads (which are necessary in some minimal form) become too distracting and actually make it more difficult to get to content, resulting in users abandoning the site in the long term, or taking measures to churn the site through AdBlock or Instapaper or other measures that preserve the content, while discarding the distracting bits (usually ads and other tricks to get the user to stay on the site longer by showing “related content”, which is ultimately a way to trick the user into staying to view more ads).</p>


		
		
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/2012/why-is-philosophy-still-important">
			
				Why Is Philosophy Still Important?</a>
		</h2>
		<div class="meta date">








  


<time datetime="2012-05-06T00:00:00-07:00" pubdate data-updated="true">May 6<span>th</span>, 2012</time></div>
	</header>
	<div class="entry-content">
		<p>This was posted on <a href="http://www.reddit.com/r/philosophy/comments/sw0t2/why_is_philosophy_still_important/">reddit</a> recently, so I thought I’d copy my response here.</p>

<p>First, just a quick introduction! There’s been a lot of thought recently that philosophy is useless. The main arguments seem to be that</p>

<ol>
  <li>science has replaced any need for philosophy</li>
  <li>philosophy is a useless subject to study in college</li>
</ol>

<p>For the latter argument, I recently recorded my thoughts, <a href="http://davidbcalhoun.com/b/2012-03-17-the-value-of-a-philosophy-degree.mp3">and you can hear them here</a>. For the first argument, read on…</p>

<p>In short: science helps us live longer, whereas philosophy helps us live better.</p>

<p>It’s true that there’s a lot of philosophy that is very academic and not so useful, but at its core, philosophy is a striving towards figuring out what is true and worthwhile, and what it means to live a meaningful and worthwhile life. That’s something off-limits for science, because science can tell us how things are empirically, but it can’t prescribe how we should then live.</p>

<p>It so happens that we already believe many things to be true and have many attitudes and dispositions towards things, whether we realize it or not. That’s what you might call a person’s personal philosophy. A person may hate philosophy, but it would be true to say that their “anti-philosophy” is a type of philosophy. In short, we all have a philosophy already. Shouldn’t we then examine it logically and try to improve it, and make sure it gets closer to the truth?</p>

<p>It also happens that our world is saturated with manipulation of people’s philosophies. Advertisements and an envy of other’s belongings has saturated our consumer culture and has turned into a sort of philosophy of its own, and sadly a way of life. There’s also much manipulation of attitudes and thought in politics, which is how politics have turned into a game of image and often times broad, false promises. Money and a lust for fame have also corrupted the sciences to some degree, and have turned it into a bit of a game to get research funding from large corporations, so nothing in the world is off-limits it seems.</p>

<p>Philosophy gives us the tools to recognize these things for what they are, and gives us some defenses against them that the common person might not have. (incidentally, I recommend reading On Bullshit for more of a taste of how our world is saturated in BS)</p>

<p>I believe there’s a few big reasons philosophy is downplayed and ridiculed in our culture today. The main reason is that there’s no real way to make it profitable, unlike the sciences. If we’re living in a consumer culture that assigns some value to things based on money, then naturally we will value less the things which aren’t profitable. When it comes down to it, we really are living in a culture that values more the computer science graduate who goes to join a company such as Zynga to produce banal (borrowing a favorite word from David Foster Wallace) ripoff games. We value this person more than someone who stays in academia to pursue truth and knowledge, and we ridicule them for not coming out into the real world, working a real job, and making a ton of money, which is after all the highest end according to to our current thinking (which is in itself a philosophy).</p>

<p>I have more to say about all this, but I’ll keep this short. <img src="http://davidbcalhoun.com/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /> </p>

<p>(For a bit of perspective, I’m saying this as someone who makes way more money than I need working for big corporations doing web dev work, but is looking to go back and study more philosophy in school eventually.)</p>


		
		
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/2012/new-direction-developer-blog-to-blog">
			
				New Direction (&#8220;Developer Blog&#8221; -> &#8220;Blog&#8221;)</a>
		</h2>
		<div class="meta date">








  


<time datetime="2012-05-06T00:00:00-07:00" pubdate data-updated="true">May 6<span>th</span>, 2012</time></div>
	</header>
	<div class="entry-content">
		<p>Lately I’ve come to terms with the fact I need to try something new in my life – a true change in direction. I anticipate that this blog will take the same direction, so there will likely be less and less “developer” posts and more and more posts of me living this new path. (TLDR: unsubscribe now, probably!)</p>

<p>Why the change in direction? I’ve had my fun, I’ve lived a comfortable life where I really haven’t had to worry about money (yet), but I’ve learned the hard way that buying “stuff” doesn’t buy happiness. It’s trite and it’s something you always hear, but I guess it’s something you have to figure out for yourself, the hard way. I read Walden in high school and thought I’d learned from its lessons. But I re-read it recently and came away completely changed. I can get by with a lot less, and most importantly – with a more meaningful job that pays much less.</p>

<p>I’ve worked at a few big companies and become a somewhat competent (and surely incompetent in some ways) frontend web developer. It’s a great way to grow right out of college and a really comfortable way to live out on your own for a little while. It’s probably a way to continue making a living while supporting a family, but that hasn’t happened to me yet.</p>

<p>And in any case, it’s not for me.</p>

<p>At the end of the day I can’t really say I’ve made a real difference in the world. I can work as hard as I can, but at the end of the day I’m just making websites for entertainment. Which is not to say there aren’t good causes out there, I suppose. And it’s not to say I can’t funnel some of this money into good causes, which I’m been forcing myself to do more and more in very small ways (I seem to be a naturally selfish person, but I’m trying to get better in that respect). But I can’t get past the feeling that my time can be better spent.</p>

<p>Now’s a fantastic time for web development, with so many opportunities to learn and grow as a developer, and so many opportunities to publish new findings and pioneer new methods. There will be trailblazers and figureheads, and people making an awesome use of technology. But it won’t be me. I’m taking steps to make sure of that.</p>

<p>At one time I viewed my web development skill as simply a means to an end – and only within the past few years has it been considered what philosophers would call “an end in itself”. I picked up this hammer to learn how to build. For a few years I joined the company of some of the best hammersmiths in the world. I even attended hammersmith conferences. But now I’m resting this hammer down for a little bit of a rest.</p>

		
		
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/2012/post-a-status-update-to-the-native-facebook-app-from-a-web-link">
			
				Post a Status Update to the Native Facebook App From a Web Link</a>
		</h2>
		<div class="meta date">








  


<time datetime="2012-02-02T00:00:00-08:00" pubdate data-updated="true">Feb 2<span>nd</span>, 2012</time></div>
	</header>
	<div class="entry-content">
		<h3 id="update-2252013"><strong>UPDATE 2/25/2013</strong></h3>

<p><strong>As of Facebook’s update last year, it appears that many of the old <a href="http://wiki.akosma.com/IPhone_URL_Schemes#Facebook">Facebook URL schemes</a> are no longer working…</strong>. So this post looks to be outdated and useless already. <img src="http://davidbcalhoun.com/wp-includes/images/smilies/icon_razz.gif" alt=":P" class="wp-smiley" /> </p>

<h3 id="the-skinny">The skinny</h3>

<p>Copy this code:</p>

<div><table class="CodeRay"><tr>
  <td class="line-numbers"><pre><a href="#n1" name="n1">1</a>
</pre></td>
  <td class="code"><pre><span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">fb://publish/profile/me?text=foo</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Post to Facebook<span class="tag">&lt;/a&gt;</span>
</pre></td>
</tr></table>
</div>

<h3 id="explanation">Explanation</h3>

<p>As you may know, Facebook has a URL scheme</p>

<pre><code>fb://
</code></pre>

<p>which seems to be mainly used by native developers. What most folks don’t realize is that it’s just a URL scheme, like http://, and that we can use it within our mobile browsers! The only problem is that there’s no official documentation for it, so folks have had to hunt down the particulars.</p>

<p>After poking around a bit, you might find <a href="http://stackoverflow.com/questions/5707722/what-are-all-the-custom-url-schemes-supported-by-the-facebook-iphone-app/">this topic on Stackoverflow</a>, which contains a ton of protocols for getting to specific sections of the Facebook app, as well as this interesting snippet:</p>

<div><table class="CodeRay"><tr>
  <td class="line-numbers"><pre><a href="#n1" name="n1">1</a>
</pre></td>
  <td class="code"><pre><span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">fb://publish/profile/#ID#?text=#BODY#</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>fb://publish/profile/#ID#?text=#BODY#<span class="tag">&lt;/a&gt;</span>
</pre></td>
</tr></table>
</div>

<p>Trying that as a link does work, but it takes you to this blank screen:</p>

<p><img src="http://davidbcalhoun.com/wp-content/uploads/2012/02/facebook-blank-screen.png" alt="Facebook app - blank screen" title="Facebook app - blank screen" width="320" height="480" class="aligncenter size-full wp-image-878" /></p>

<p>That blank screen isn’t too exciting, but it is peaceful, like a Zen rock garden. Bookmark that page so you can come back later, when you’re overwhelmed by friends flooding your updates screen with baby pictures.</p>

<h3 id="google-to-the-rescue">Google to the rescue!</h3>

<p>Ok, now back to work!</p>

<p>After poking around and trying to find my Facebook id, I inserted it and got the link to work. But that’s not ideal, since everyone has different user ids. And I’m not about to load in all the bloatware that comes with the Facebook API just to find a user id!</p>

<p>After poking around a bit, I found <a href="http://stackoverflow.com/questions/9077817/open-facebook-app-with-text-from-ipad-app">this link</a> which showed this generic pattern:</p>

<div><table class="CodeRay"><tr>
  <td class="line-numbers"><pre><a href="#n1" name="n1">1</a>
</pre></td>
  <td class="code"><pre><span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">fb://publish/profile/me</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>fb://publish/profile/me<span class="tag">&lt;/a&gt;</span>
</pre></td>
</tr></table>
</div>

<p>Whoo! And that works! But I still want to prepopulate the status field. We can do that by passing in a URL parameter:</p>

<div><table class="CodeRay"><tr>
  <td class="line-numbers"><pre><a href="#n1" name="n1">1</a>
</pre></td>
  <td class="code"><pre><span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">fb://publish/profile/me?text=foo</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>fb://publish/profile/me?text=foo<span class="tag">&lt;/a&gt;</span>
</pre></td>
</tr></table>
</div>

<p>Clicking on it will get you to a screen which looks like this:</p>

<p><img src="http://davidbcalhoun.com/wp-content/uploads/2012/02/facebook-status-disabled.png" alt="Facebook status update with share button disabled" title="Facebook status update with share button disabled" width="320" height="480" class="aligncenter size-full wp-image-865" /></p>

<p>This, interestingly enough, appears to be the old implementation of the status screen. Here’s what it looks like if you launch it through the button on the native app:</p>

<p><img src="http://davidbcalhoun.com/wp-content/uploads/2012/02/facebook-status-normal.png" alt="Facebook status - what it looks like normally" title="Facebook status - what it looks like normally" width="320" height="480" class="aligncenter size-full wp-image-867" /></p>

<p>Also note that the Share button is disabled until the user types in text themselves. This might be a little confusing for some users, but it’s probably the best way to prevent spam.</p>

<h3 id="detecting-if-the-facebook-app-is-installed">Detecting if the Facebook app is installed</h3>

<p>There’s another issue with <em>folks who don’t have the native Facebook app installed</em>. There doesn’t seem to be a perfect way to detect if the link failed and went nowhere. What we have to work with are <a href="http://stackoverflow.com/questions/7231085/how-to-fall-back-to-marketplace-when-android-custom-url-scheme-not-handled">hacky workarounds involving setTimeout</a>.</p>

<p>It looks like native iOS apps have an ideal URL scheme checking ability with a <a href="http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-working-with-url-schemes/">canOpenURL</a> method. Unfortunately it doesn’t look like the web has this function (yet). Let’s bug Apple to implement it! <img src="http://davidbcalhoun.com/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /> </p>

<h3 id="related">Related</h3>

<p>Just a heads up – I’m definitely not the first one to figure this out, as I found a <a href="http://jsfiddle.net/ThinkingStiff/dpUKh/">jsfiddle</a> with the same information, plus an example for posting to Twitter. That was surprisingly the only result! I couldn’t find anyone who blogged about it yet, so here you are!</p>

<p><a href="http://wiki.akosma.com/IPhone_URL_Schemes">More URI schemes for other launching other native apps</a></p>


		
		
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/2011/web-development-silicon-valley-rant">
			
				Web Development / Silicon Valley Rant</a>
		</h2>
		<div class="meta date">








  


<time datetime="2011-10-22T00:00:00-07:00" pubdate data-updated="true">Oct 22<span>nd</span>, 2011</time></div>
	</header>
	<div class="entry-content">
		<p>(if you didn’t read the title – warning: rant…)</p>

<p>As far as web development goes, I guess I could rant on and on about the generalities. Of all things ephemeral. The lust after money, gadgets, and other worthless material crap that we use to stuff inside our oversized houses.</p>

<p>The startling creativity and in equal amounts the lack of creativity. The amount of amazing invention and the equal amount of copying and ripping off.</p>

<p>I could complain of amazing shortsightedness, of fads, and of constant new waves of developers that have to relearn and be convinced of old tried-and-true best practices (while still being able to identify the outdated best practices).</p>

<p>I could possibly ponder some of the stupid things we concern ourselves with, which are criticisms more aimed at the Silicon Valley mentality in general. The sheer amount of idiotic startups. The desire to have a startup only for the payout, for the acquisition. The one worthwhile and meaningful startup surrounded in a sea of hangers-ons, social network clones, photo sharing service clones, Facebook game clones, and on and on ad nauseum.</p>

<p>I could complain about the few passionate ones, surrounded by a pool of passionless jumpers-on-the-bandwagon, people looking for a free ride, and people looking to coast through their secure jobs, content with nothing more than receiving their paycheck.</p>

<p>I could complain about the lack of real heroes. People who made a difference to our small isolated communities, spoke at conferences, authored books, wrote popular blog articles, but were perhaps never themselves. People who we could not look up to as model human beings, but as model toolmakers and nothing more. I suppose it’s folly to look for too much else there anyhow.</p>

<p>I could complain about the praise of life imbalance. Of prideful people showing off, working longer hours than their peers, feeling like they have to in order to keep up, and bragging about losing sleep and becoming unbalanced and unhinged individuals. Competition is good and pushes everyone to be more detailed and more polished, but there seems to be no admission of a limit, of reaching a life imbalance. The more time spent coding, the better. If you don’t code in your free time, you must not be a true coder. If you don’t enjoy learning new languages, you must be a crappy coder. The amount of pride and self-delusion here is scary.</p>

<p>I could talk about corporations seeking young programmers without commitments in order to suck dry every last ounce of their passion, essence, and thirst, distracting their focus away from all things important. Of those same corporations sticking those young impressionables onto outdated projects, maintaining and fixing bugs. All for what?</p>

<p>I could speak of self-delusion that programming language X will save the world, and on self-delusion in general, which I believe is rampant here and elsewhere, and is possibly our greatest weakness as human beings.</p>

<p>I suppose now you’ll tell me I’ve lost my head and gone crazy, but I would disagree. These things have never been so clear and the arguments have never been so cogent as they are now. There is no utopia, no perfect occupation, but I believe there are some that are better than others. Everything has its faults, and web development isn’t for everyone. Perhaps it’s simply not for me?</p>

<p>I got into web development as a means to an end – as a way of publishing what I enjoyed doing. As a tool I picked up and put down when I was finished, and then got on with my life. Perhaps it’s time to move it back to that corner of my life, and even better, to use it as a tool to help me build new, meaningful, less ephemeral things. Something I could be proud of in more than a few years. Something more than being an “HTML5 expert” or “Mobile expert” or “JavaScript expert”.</p>

<p>No. I want to use these things as tools that are put back in their shed after I’m done. Tools to build something greater than the sum of its parts. Tools to make a meaningful contribution that may not amount to a hill a beans in this crazy world, but could at least be something I’m proud of.</p>

<blockquote>
  <p>Programming as a profession is only moderately interesting. It can be a good job, but you could make about the same money and be happier running a fast food joint. You’re much better off using code as your secret weapon in another profession.</p>

  <p>People who can code in the world of technology companies are a dime a dozen and get no respect. People who can code in biology, medicine, government, sociology, physics, history, and mathematics are respected and can do amazing things to advance those disciplines.</p>

  <p>(<a href="http://learnpythonthehardway.org/book/advice.html">Advice From an Old Programmer</a>) </p>
</blockquote>

<p>Somewhat related: <a href="http://ask.slashdot.org/story/05/12/16/1833210/where-do-all-of-the-old-programmers-go">Where Do All of the Old Programmers Go?</a>, <a href="http://vimeo.com/2723800">The ACL is Dead</a>, <a href="http://techcrunch.com/2010/08/28/silicon-valley%E2%80%99s-dark-secret-it%E2%80%99s-all-about-age/">Silicon Valley’s Dark Secret: It’s All About Age</a> [and the <a href="http://www.reddit.com/r/programming/comments/d6kqg/silicon_valleys_dark_secret_its_all_about_age/">disturbing reddit thread to accompany that</a>])</p>

<h3 id="addendum">Addendum</h3>

<p>It’s notable to add that I’ve been comparing “Kyoto culture” to “Silicon Valley culture”. They are so dissimilar that it’s doubtful we’re even using “culture” in the same sense in both cases. Kyoto culture, a long proud, rich, colorful history of a people, and Silicon Valley culture: an atmosphere of tech, founded by money and driven by money. In one, it’s almost a crime to stay inside and not to explore and enjoy the city. In the other, our wealth lets us build up a castle, buy devices and home entertainment to keep us busy in our little fiefdom. Silicon Valley is more like a boomtown which exists only for one sick purpose, and consequentially lacks a soul even more severely. Would you rather be underpaid in a city with a soul or overpaid in a soulless city?</p>


		
		
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/2011/iphone-4s-iphone-4-and-iphone-3gs-photo-comparison">
			
				iPhone 4S, iPhone 4, and iPhone 3GS Photo Comparison</a>
		</h2>
		<div class="meta date">








  


<time datetime="2011-10-14T00:00:00-07:00" pubdate data-updated="true">Oct 14<span>th</span>, 2011</time></div>
	</header>
	<div class="entry-content">
		<p>More photos likely to come.. this is just after I unboxed my new 4S. Time to play with it a bit!</p>

<h3 id="iphone-4s">iPhone 4S</h3>

<p><a href="http://davidbcalhoun.com/wp-content/uploads/2011/10/4S.jpg"><img src="http://davidbcalhoun.com/wp-content/uploads/2011/10/4S-1024x768.jpg" alt="Canon 7D, shot with an iPhone 4S" title="Canon 7D, shot with an iPhone 4S" width="1024" height="768" class="aligncenter size-large wp-image-824" /></a></p>

<h3 id="iphone-4">iPhone 4</h3>

<p><a href="http://davidbcalhoun.com/wp-content/uploads/2011/10/4.jpg"><img src="http://davidbcalhoun.com/wp-content/uploads/2011/10/4-1024x764.jpg" alt="Canon 7D, shot with an iPhone 4" title="Canon 7D, shot with an iPhone 4" width="1024" height="764" class="aligncenter size-large wp-image-825" /></a></p>

<h3 id="iphone-3gs">iPhone 3GS</h3>

<p><a href="http://davidbcalhoun.com/wp-content/uploads/2011/10/3GS.jpg"><img src="http://davidbcalhoun.com/wp-content/uploads/2011/10/3GS-1024x768.jpg" alt="Canon 7D, shot with an iPhone 3GS" title="Canon 7D, shot with an iPhone 3GS" width="1024" height="768" class="aligncenter size-large wp-image-826" /></a></p>

<h3 id="iphone-3gs-alternate-white-balance-point">iPhone 3GS (alternate white balance point)</h3>

<p><a href="http://davidbcalhoun.com/wp-content/uploads/2011/10/3GS-alt.jpg"><img src="http://davidbcalhoun.com/wp-content/uploads/2011/10/3GS-alt-1024x768.jpg" alt="Canon 7D, shot with an iPhone 3GS" title="Canon 7D, shot with an iPhone 3GS" width="1024" height="768" class="aligncenter size-large wp-image-827" /></a></p>


		
		
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/2011/ios5-sunspider-iphone-4s-vs-iphone-4-vs-iphone-3gs">
			
				iOS5 SunSpider: iPhone 4S vs iPhone 4 vs iPhone 3GS</a>
		</h2>
		<div class="meta date">








  


<time datetime="2011-10-14T00:00:00-07:00" pubdate data-updated="true">Oct 14<span>th</span>, 2011</time></div>
	</header>
	<div class="entry-content">
		<h3 id="result-table-sunspider-091-all-devices-running-ios-5">Result table (SunSpider 0.9.1, all devices running iOS 5)</h3>

<table style="width: 100%;">
  <tr>
    <td>
      Test
    </td>
    
    <td>
      iPhone 4S
    </td>
    
    <td>
      iPhone 4
    </td>
    
    <td>
      iPhone 3GS
    </td>
  </tr>
  
  <tr>
    <td>
      Total
    </td>
    
    <td class="positive">
      2270ms
    </td>
    
    <td>
      3483ms
    </td>
    
    <td>
      4903ms
    </td>
  </tr>
  
  <tr>
    <td>
      3D
    </td>
    
    <td class="positive">
      281ms
    </td>
    
    <td>
      486ms
    </td>
    
    <td>
      672ms
    </td>
  </tr>
  
  <tr>
    <td>
      Access
    </td>
    
    <td class="positive">
      279ms
    </td> 
    
    <td>
      410ms
    </td>
    
    <td>
      614ms
    </td>
  </tr>
  
  <tr>
    <td>
      Bitops
    </td>
    
    <td class="positive">
      177ms
    </td>
    
    <td>
      200ms
    </td>
    
    <td>
      270ms
    </td>
  </tr>
  
  <tr>
    <td>
      Controlflow
    </td>
    
    <td class="positive">
      20ms
    </td>
    
    <td>
      26ms
    </td> 
    
    <td>
      34ms
    </td>
  </tr>
  
  <tr>
    <td>
      Crypto
    </td>
    
    <td class="positive">
      164ms
    </td>
    
    <td>
      211ms
    </td>
    
    <td>
      315ms
    </td>
  </tr>
  
  <tr>
    <td>
      Date
    </td>
    
    <td class="positive">
      332ms
    </td>
    
    <td>
      528ms
    </td>
    
    <td>
      770ms
    </td>
  </tr>
  
  <tr>
    <td>
      Math
    </td>
    
    <td class="positive">
      219ms
    </td>
    
    <td>
      433ms
    </td>
    
    <td>
      553ms
    </td>
  </tr>
  
  <tr>
    <td>
      Regexp
    </td>
    
    <td class="positive">
      88ms
    </td>
    
    <td>
      117ms
    </td>
    
    <td>
      151ms
    </td>
  </tr>
  
  <tr>
    <td>
      String
    </td>
    
    <td class="positive">
      711ms
    </td>
    
    <td>
      1072ms
    </td>
    
    <td>
      1525ms
    </td>
  </tr>
</table>

<h3 id="raw-results">Raw results</h3>

<p><a href="http://www.webkit.org/perf/sunspider-0.9.1/sunspider-0.9.1/results.html?%7B%22v%22:%20%22sunspider-0.9.1%22,%20%223d-cube%22:%5B98,100,97,101,98,98,99,99,100,105%5D,%223d-morph%22:%5B72,75,72,74,72,74,72,72,72,73%5D,%223d-raytrace%22:%5B107,107,108,111,108,108,108,109,110,108%5D,%22access-binary-trees%22:%5B48,48,53,51,47,49,51,54,52,47%5D,%22access-fannkuch%22:%5B121,120,124,120,121,121,120,120,125,120%5D,%22access-nbody%22:%5B70,72,71,71,71,72,70,70,69,70%5D,%22access-nsieve%22:%5B35,40,38,38,37,35,35,36,38,37%5D,%22bitops-3bit-bits-in-byte%22:%5B29,29,29,28,29,29,29,29,29,29%5D,%22bitops-bits-in-byte%22:%5B39,36,37,39,37,36,36,37,38,37%5D,%22bitops-bitwise-and%22:%5B47,48,48,46,49,48,49,51,48,47%5D,%22bitops-nsieve-bits%22:%5B65,63,62,62,62,62,63,63,63,62%5D,%22controlflow-recursive%22:%5B19,20,20,20,19,20,20,19,20,20%5D,%22crypto-aes%22:%5B94,96,96,100,103,102,96,96,96,99%5D,%22crypto-md5%22:%5B36,37,37,38,37,36,39,36,38,39%5D,%22crypto-sha1%22:%5B29,28,30,28,30,29,29,28,29,29%5D,%22date-format-tofte%22:%5B171,182,167,168,170,172,167,170,181,172%5D,%22date-format-xparb%22:%5B160,159,161,158,160,168,162,156,159,158%5D,%22math-cordic%22:%5B81,79,76,77,77,77,78,77,76,77%5D,%22math-partial-sums%22:%5B92,92,92,92,94,92,92,91,92,94%5D,%22math-spectral-norm%22:%5B49,49,49,49,51,49,49,50,48,52%5D,%22regexp-dna%22:%5B91,87,88,87,88,88,88,87,88,87%5D,%22string-base64%22:%5B89,88,86,92,87,91,96,87,87,87%5D,%22string-fasta%22:%5B91,92,92,91,94,94,95,95,89,89%5D,%22string-tagcloud%22:%5B144,147,147,145,144,145,144,144,148,150%5D,%22string-unpack-code%22:%5B246,243,238,244,254,249,243,249,240,238%5D,%22string-validate-input%22:%5B145,134,136,137,140,137,137,137,141,149%5D%7D">iPhone 4S (iOS5)</a></p>

<p><a href="http://www.webkit.org/perf/sunspider-0.9.1/sunspider-0.9.1/results.html?%7B%22v%22:%20%22sunspider-0.9.1%22,%20%223d-cube%22:%5B175,179,192,175,180,174,181,174,173,182%5D,%223d-morph%22:%5B138,137,136,135,136,135,136,137,144,135%5D,%223d-raytrace%22:%5B166,171,174,174,166,178,168,167,169,168%5D,%22access-binary-trees%22:%5B61,61,62,58,57,56,57,56,60,57%5D,%22access-fannkuch%22:%5B141,142,143,146,141,142,148,142,146,148%5D,%22access-nbody%22:%5B154,152,147,146,144,148,146,154,146,149%5D,%22access-nsieve%22:%5B59,59,57,67,58,60,57,58,59,59%5D,%22bitops-3bit-bits-in-byte%22:%5B29,29,29,28,34,29,28,28,29,28%5D,%22bitops-bits-in-byte%22:%5B40,40,41,40,41,40,42,41,41,41%5D,%22bitops-bitwise-and%22:%5B58,59,60,58,60,58,59,62,58,58%5D,%22bitops-nsieve-bits%22:%5B71,76,70,75,71,69,72,71,70,70%5D,%22controlflow-recursive%22:%5B26,25,25,26,25,26,25,25,26,27%5D,%22crypto-aes%22:%5B124,132,124,124,126,123,123,125,122,127%5D,%22crypto-md5%22:%5B48,48,48,50,50,50,50,50,50,50%5D,%22crypto-sha1%22:%5B36,37,36,35,36,37,36,37,36,36%5D,%22date-format-tofte%22:%5B265,267,265,314,259,260,257,266,263,260%5D,%22date-format-xparb%22:%5B258,265,258,259,265,259,259,264,259,260%5D,%22math-cordic%22:%5B291,141,141,141,147,140,140,141,178,140%5D,%22math-partial-sums%22:%5B174,173,179,180,171,174,171,179,177,171%5D,%22math-spectral-norm%22:%5B102,98,97,98,97,97,99,100,99,98%5D,%22regexp-dna%22:%5B115,114,114,116,115,119,122,112,120,122%5D,%22string-base64%22:%5B120,123,116,121,114,118,116,115,117,117%5D,%22string-fasta%22:%5B128,125,122,129,122,130,129,131,123,128%5D,%22string-tagcloud%22:%5B208,209,209,206,215,210,210,209,211,219%5D,%22string-unpack-code%22:%5B401,412,410,413,406,422,412,413,410,414%5D,%22string-validate-input%22:%5B205,208,199,200,205,207,206,212,206,211%5D%7D">iPhone 4 (iOS5)</a></p>

<p><a href="http://www.webkit.org/perf/sunspider-0.9.1/sunspider-0.9.1/results.html?%7B%22v%22:%20%22sunspider-0.9.1%22,%20%223d-cube%22:%5B245,251,245,317,247,244,250,249,250,250%5D,%223d-morph%22:%5B191,184,186,189,186,190,202,190,194,188%5D,%223d-raytrace%22:%5B222,226,223,222,229,227,234,229,227,231%5D,%22access-binary-trees%22:%5B86,87,87,93,89,89,92,92,94,85%5D,%22access-fannkuch%22:%5B189,188,190,189,350,187,188,189,188,190%5D,%22access-nbody%22:%5B195,194,193,204,585,196,198,199,194,194%5D,%22access-nsieve%22:%5B83,94,86,82,84,83,83,83,82,84%5D,%22bitops-3bit-bits-in-byte%22:%5B38,40,37,38,38,43,40,38,38,40%5D,%22bitops-bits-in-byte%22:%5B70,54,53,58,62,55,59,55,54,54%5D,%22bitops-bitwise-and%22:%5B78,78,79,79,82,79,77,76,77,79%5D,%22bitops-nsieve-bits%22:%5B93,94,94,95,93,94,93,93,101,99%5D,%22controlflow-recursive%22:%5B34,34,32,34,33,34,33,33,36,35%5D,%22crypto-aes%22:%5B365,173,173,174,174,184,177,172,170,171%5D,%22crypto-md5%22:%5B101,65,64,68,67,69,65,66,65,67%5D,%22crypto-sha1%22:%5B75,49,48,50,51,48,49,54,49,49%5D,%22date-format-tofte%22:%5B618,358,357,361,373,365,367,482,379,372%5D,%22date-format-xparb%22:%5B408,360,349,354,371,365,371,369,359,363%5D,%22math-cordic%22:%5B199,191,192,188,188,188,190,188,190,191%5D,%22math-partial-sums%22:%5B228,227,228,225,229,232,227,232,229,227%5D,%22math-spectral-norm%22:%5B160,132,131,131,130,131,131,130,133,130%5D,%22regexp-dna%22:%5B158,149,148,151,150,149,152,148,153,148%5D,%22string-base64%22:%5B164,163,176,167,171,172,175,172,181,174%5D,%22string-fasta%22:%5B227,187,176,179,167,175,176,189,176,172%5D,%22string-tagcloud%22:%5B303,288,270,277,284,289,282,284,281,284%5D,%22string-unpack-code%22:%5B1029,531,527,523,543,545,553,545,538,541%5D,%22string-validate-input%22:%5B296,300,297,299,299,293,298,320,296,296%5D%7D">iPhone 3GS (iOS5)</a></p>

<h3 id="bonus-fishietank4-10-fish-canvas-test">Bonus: <a href="http://ie.microsoft.com/testdrive/Performance/FishIETank/">FishIETank</a> (10 fish) (Canvas test)</h3>

<table style="width: 100%;">
  <tr>
    <td>
      Test
    </td>
    
    <td>
      iPhone 4S
    </td>
    
    <td>
      iPhone 4
    </td>
    
    <td>
      iPhone 3GS
    </td>
  </tr>
  
  <tr>
    <td>
      Total
    </td>
    
    <td class="positive">
      50fps
    </td>
    
    <td>
      35fps
    </td>
    
    <td>
      25fps
    </td>
  </tr>
</table>

<p>One thing to note here: the 3GS has a bit of an advantage because of a non-retina screen. However, it’s still outperformed easily by the iPhone 4 and 4S.</p>

<h3 id="related">Related</h3>

<p><a href="http://davidbcalhoun.com/2011/javascript-sunspider-benchmark-ios-4-3-vs-ios-4-0">JavaScript SunSpider benchmark: iOS 4.3 vs iOS 4.0</a><br />
<a href="http://davidbcalhoun.com/2010/blackberry-torch-sunspider-results-javascript-benchmark">BlackBerry Torch SunSpider results (JavaScript benchmark)</a><br />
<a href="http://davidbcalhoun.com/2010/iphone-4-sunspider-test-results">iPhone 4 SunSpider test results (22% faster than iPhone 3GS)</a><br />
<a href="http://davidbcalhoun.com/2010/sunspider-ios-3-1-3-versus-ios-4-gm">JavaScript SunSpider test: iOS 3.1.3 versus iOS 4 GM</a><br />
<a href="http://davidbcalhoun.com/2010/javascript-sunspider-htc-evo-versus-htc-incredible-versus-nexus-one">JavaScript SunSpider: HTC Evo versus HTC Incredible versus Nexus One</a></p>


		
		
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/2011/mobile-performance-manifesto">
			
				Mobile Performance Manifesto</a>
		</h2>
		<div class="meta date">








  


<time datetime="2011-10-11T00:00:00-07:00" pubdate data-updated="true">Oct 11<span>th</span>, 2011</time></div>
	</header>
	<div class="entry-content">
		<p><img src="http://davidbcalhoun.com/wp-content/uploads/2011/10/odometer.jpg" alt="" title="Dashboard with odometer" width="800" height="299" class="aligncenter size-full wp-image-806" /></p>

<p>Earlier this year I gave a <a href="http://www.meetup.com/SF-Web-Performance-Group/events/16116764">talk</a> (<a href="http://davidbcalhoun.com/present/mobile-performance/">slides</a>) outlining the latest and greatest in mobile performance, including a bit of my own unscientific research into carrier latency and bandwidth thanks to <a href="https://github.com/yahoo/boomerang">boomerang.js</a>.</p>

<p>I realized that interest in mobile performance has exploded recently, especially with <a href="http://www.stevesouders.com/blog/2011/01/10/announcing-my-focus-on-mobile/">Steve Souders announcing his focus on mobile</a>, and I thought it was time for an update, this time in blog form. Also, my old <a href="http://davidbcalhoun.com/present/mobile-performance/">slides</a> have been somewhat embarrassing. For some strange reason, at the time I wanted to give <a href="http://meyerweb.com/eric/tools/s5/">S5</a> a try – that outdated, ancient, not-performant slideshow framework. The result is a slideshow on performance that loads slowly… doh! (incidentally, I recommend <a href="http://imakewebthings.github.com/deck.js/">deck.js</a> as an alternative).</p>

<p>In any case, it was time for a roundup of mobile performance best practices, in blog form. I’m not sure if it’s properly called a manifesto, but it is what it is! Onward!</p>

<h3 id="for-fun-latency-and-bandwidth-tests">For fun: Latency and bandwidth tests</h3>

<p>Before we start.. just a little fun data! It’s always been a pleasure to fiddle around with <a href="https://github.com/yahoo/boomerang">boomerang.js</a> and compare results. With my latest trip to Japan, I had the opportunity to run Boomerang on Japan’s <a href="http://en.wikipedia.org/wiki/EMOBILE_Limited">e-mobile</a> 3G network in the remotest of places, up in Hakuba/Nagano in the Japanese alps.</p>

<p>When I got back, I ran the same tests from downtown San Francisco, which was closer to my California-based test server, and should’ve been faster, right? Theoretically…</p>

<h4 id="boomerang-tests-running-on-a-california-hosted-server">Boomerang Tests (running on a California-hosted server)</h4>

<table style="width: 100%;">
  <th>
    <td>
      Verizon 3G (SF)
    </td>
    
    <td>
      ATT 3G (SF)
    </td>
    
    <td>
      e-mobile 3G (Hakuba)
    </td>
  </th>
  
  <tr>
    <td>
      Latency
    </td>
    
    <td class="positive">
      251ms
    </td>
    
    <td>
      901ms
    </td>
    
    <td>
      401ms
    </td>
  </tr>
  
  <tr>
    <td>
      Bandwidth
    </td>
    
    <td>
      62kbps
    </td>
    
    <td>
      3kbps
    </td>
    
    <td class="positive">
      95kbps
    </td>
  </tr>
</table>

<p>Yes, e-mobile didn’t have the greatest ping, but it handily beat ATT, even though it was going across the entire Pacific Ocean! Note that it came out the best in the bandwidth tests however… </p>

<p>(Note: it’s unknown if or how <a href="http://stevesouders.com/ms/">Steve Souders’s latest research</a> affects these findings)</p>

<p>There’s a lot of factors that could’ve been involved, so look to something like <a href="http://opensignalmaps.com/">OpenSignalMaps</a> for more data.</p>

<p>Ok, onto the tips!</p>

<h3 id="page-organization">Page Organization</h3>

<p><img src="http://davidbcalhoun.com/wp-content/uploads/2011/10/mobile-site-organization.png" alt="" title="Smart phone versus feature phone website organization" width="645" height="633" class="aligncenter size-full wp-image-793" /></p>

<p>For feature phones that have little to no caching, aggressively combine requests (deliver HTML/CSS/JS all in one package). For smart phones, take advantage of caching by mirroring desktop frontend best practices: separate HTML, CSS, and JS so they can be cached (per-session and across sessions).</p>

<p>There’s old research about <a href="http://www.yuiblog.com/blog/2008/02/06/iphone-cacheability/">extremely small cache sizes on iOS in particular</a>, but this research has been followed up on by more recent research by <a href="http://www.yuiblog.com/blog/2010/07/12/mobile-browser-cache-limits-revisited/">Ryan Grove (Yahoo!)</a> and <a href="http://www.stevesouders.com/blog/2010/07/12/mobile-cache-file-sizes/">Steve Souders (Google)</a>, which shows that we shouldn’t be so paranoid, since caching is pretty decent across all the major mobile browsers.</p>

<p>Of particular interest is a browser’s capability to cache files in a current session, browsing from page-to-page, which is what most users will end up doing (caching of the page across sessions is another matter). What is the maximum file size a browser will cache during a session? The <a href="http://www.browserscope.org/user/tests/table/agt1YS1wcm9maWxlcnINCxIEVGVzdBj_1OsBDA?v=3&#038;layout=simple&#038;f=Max%20js%20Cache%20Size%20(kB)">results (via Browserscope)</a> end up being encouraging:</p>

<table style="width: 100%;">
  <th>
    <td>
      Maximum Cache Size (MB)
    </td>
  </th>
  
  <tr>
    <td>
      Android 2.1
    </td>
    
    <td>
      4+
    </td>
  </tr>
  
  <tr>
    <td>
      Android 2.2
    </td>
    
    <td>
      2
    </td>
  </tr>
  
  <tr>
    <td>
      Android 2.3
    </td>
    
    <td>
      2
    </td>
  </tr>
  
  <tr>
    <td>
      Android 3.0
    </td>
    
    <td>
      4+
    </td>
  </tr>
  
  <tr>
    <td>
      Blackberry 6.0.0
    </td>
    
    <td>
      4+
    </td>
  </tr>
  
  <tr>
    <td>
      iPad 4.3.5
    </td>
    
    <td>
      4+
    </td>
  </tr>
  
  <tr>
    <td>
      iPad 5.0
    </td>
    
    <td>
      4+
    </td>
  </tr>
  
  <tr>
    <td>
      iPhone 4.3.5
    </td>
    
    <td>
      4+
    </td>
  </tr>
  
  <tr>
    <td>
      iPhone 5.0
    </td>
    
    <td>
      4+
    </td>
  </tr>
  
  <tr>
    <td>
      Opera Mini 4
    </td>
    
    <td>
      4+
    </td>
  </tr>
  
  <tr>
    <td>
      Opera Mini 5
    </td>
    
    <td>
      4+
    </td>
  </tr>
  
  <tr>
    <td>
      Opera Mini 6
    </td>
    
    <td>
      4+
    </td>
  </tr>
  
  <tr>
    <td>
      webOS 2.0
    </td>
    
    <td>
      1
    </td>
  </tr>
</table>

<h3 id="avoid-redirects-foocom---mfoocom">Avoid redirects (foo.com -&gt; m.foo.com)</h3>

<p>If possible, perform the redirection behind the scenes on the server, which should be transparent to the user. When a user performs a Google search and clicks on your page, they’re already getting redirected once by Google (check it yourself). Your own redirects are adding a second redirect where there need not be one.</p>

<h3 id="optimize-images">Optimize Images</h3>

<p><a href="http://filamentgroup.com/examples/responsive-images-new/demos/A-Default/demo.html"><img src="http://davidbcalhoun.com/wp-content/uploads/2011/10/responsive-images.jpg" alt="" title="Responsive images" width="600" height="423" class="aligncenter size-full wp-image-796" /></a><br />
Deliver appropriately-sized images to devices. The philosophy of responsive design makes it easy to simply downscale images to fit the screen, but avoid this where possible, as this means wasted bandwidth.</p>

<p>You can optimize images through CSS media queries or in JavaScript (see below). Though you want to reduce your dependence on cookies, it may be a good idea to store these width/height values into a cookie (or localStorage if you are fetching images in nontraditional ways) so the values can be read by the server, which can deliver appropriately-sized images. This technique has been <a href="http://filamentgroup.com/lab/responsive_images_experimenting_with_context_aware_image_sizing/">implemented by Filament Group</a>, so you should probably read about their experiences before trying to roll your own.</p>

<p>Also note that where applicable, at the expense of performance you may want to serve higher resolution images for better screens, such as for Retina displays (which can be detected with JavaScript or CSS).</p>

<h4 id="javascript-examples">JavaScript examples</h4>

<div><table class="CodeRay"><tr>
  <td class="line-numbers"><pre><a href="#n1" name="n1">1</a>
<a href="#n2" name="n2">2</a>
<a href="#n3" name="n3">3</a>
</pre></td>
  <td class="code"><pre>window.innerHeight;       <span class="comment">// max height actually available</span>
window.innerWidth;        <span class="comment">// max width actually available</span>
window.devicePixelRatio;  <span class="comment">// pixel density (standard is 1, high resolution is generally &gt; 1)</span>
</pre></td>
</tr></table>
</div>

<p>(note that <code>screen.width</code> and <code>screen.height</code> are also available to tell you the dimensions of the entire screen, but this isn’t all available due to the space taken by the OS and browser chrome)</p>

<h4 id="media-query-examples">Media query examples</h4>

<div><table class="CodeRay"><tr>
  <td class="line-numbers"><pre><a href="#n1" name="n1">1</a>
<a href="#n2" name="n2">2</a>
<a href="#n3" name="n3">3</a>
<a href="#n4" name="n4">4</a>
<a href="#n5" name="n5">5</a>
<a href="#n6" name="n6">6</a>
<a href="#n7" name="n7">7</a>
<a href="#n8" name="n8">8</a>
<a href="#n9" name="n9">9</a>
<strong><a href="#n10" name="n10">10</a></strong>
<a href="#n11" name="n11">11</a>
<a href="#n12" name="n12">12</a>
<a href="#n13" name="n13">13</a>
<a href="#n14" name="n14">14</a>
</pre></td>
  <td class="code"><pre><span class="directive">@media</span> <span class="type">only</span> <span class="error">s</span><span class="error">c</span><span class="error">r</span><span class="error">e</span><span class="error">e</span><span class="error">n</span> <span class="error">a</span><span class="error">n</span><span class="error">d</span> (<span class="error">m</span><span class="error">a</span><span class="error">x</span><span class="error">-</span><span class="error">w</span><span class="error">i</span><span class="error">d</span><span class="error">t</span><span class="error">h</span>: <span class="float">480px</span>) {
  <span class="comment">/* small screen styles */</span>
}

<span class="directive">@media</span> <span class="type">only</span> <span class="error">s</span><span class="error">c</span><span class="error">r</span><span class="error">e</span><span class="error">e</span><span class="error">n</span> <span class="error">a</span><span class="error">n</span><span class="error">d</span> (<span class="error">m</span><span class="error">i</span><span class="error">n</span><span class="error">-</span><span class="error">w</span><span class="error">i</span><span class="error">d</span><span class="error">t</span><span class="error">h</span>: <span class="float">481px</span>) {
  <span class="comment">/* large screen styles */</span>
}

<span class="directive">@media</span> (<span class="type">-webkit-min-device-pixel-ratio</span>: <span class="float">1.5</span>),
       (<span class="error">-</span><span class="error">o</span><span class="error">-</span><span class="error">m</span><span class="error">i</span><span class="error">n</span><span class="error">-</span><span class="error">d</span><span class="error">e</span><span class="error">v</span><span class="error">i</span><span class="error">c</span><span class="error">e</span><span class="error">-</span><span class="error">p</span><span class="error">i</span><span class="error">x</span><span class="error">e</span><span class="error">l</span><span class="error">-</span><span class="error">r</span><span class="error">a</span><span class="error">t</span><span class="error">i</span><span class="error">o</span>: <span class="float">3</span>/<span class="float">2</span>),
       (<span class="error">m</span><span class="error">i</span><span class="error">n</span><span class="error">-</span><span class="error">-</span><span class="error">m</span><span class="error">o</span><span class="error">z</span><span class="error">-</span><span class="error">d</span><span class="error">e</span><span class="error">v</span><span class="error">i</span><span class="error">c</span><span class="error">e</span><span class="error">-</span><span class="error">p</span><span class="error">i</span><span class="error">x</span><span class="error">e</span><span class="error">l</span><span class="error">-</span><span class="error">r</span><span class="error">a</span><span class="error">t</span><span class="error">i</span><span class="error">o</span>: <span class="float">1.5</span>),
       (<span class="error">m</span><span class="error">i</span><span class="error">n</span><span class="error">-</span><span class="error">d</span><span class="error">e</span><span class="error">v</span><span class="error">i</span><span class="error">c</span><span class="error">e</span><span class="error">-</span><span class="error">p</span><span class="error">i</span><span class="error">x</span><span class="error">e</span><span class="error">l</span><span class="error">-</span><span class="error">r</span><span class="error">a</span><span class="error">t</span><span class="error">i</span><span class="error">o</span>: <span class="float">1.5</span>) {
  <span class="comment">/* high resolution styles */</span>
}
</pre></td>
</tr></table>
</div>

<h3 id="navigatorconnection-android-only">navigator.connection (Android only)</h3>

<p>Use <a href="http://davidbcalhoun.com/2010/using-navigator-connection-android">navigator.connection</a> if it’s available to serve different assets based on connection speed (3G vs WIFI, for instance).</p>

<p>Here’s the contents of the <code>navigator.connection</code> object (with a phone running on a 3G connection):</p>

<div><table class="CodeRay"><tr>
  <td class="line-numbers"><pre><a href="#n1" name="n1">1</a>
<a href="#n2" name="n2">2</a>
<a href="#n3" name="n3">3</a>
<a href="#n4" name="n4">4</a>
<a href="#n5" name="n5">5</a>
<a href="#n6" name="n6">6</a>
<a href="#n7" name="n7">7</a>
<a href="#n8" name="n8">8</a>
</pre></td>
  <td class="code"><pre>{
  <span class="key">type</span>: <span class="integer">4</span>,
  <span class="key">UNKNOWN</span>: <span class="integer">0</span>,
  <span class="key">ETHERNET</span>: <span class="integer">1</span>,
  <span class="key">WIFI</span>: <span class="integer">2</span>,
  <span class="key">CELL_2G</span>: <span class="integer">3</span>,
  <span class="key">CELL_3G</span>: <span class="integer">4</span>
}
</pre></td>
</tr></table>
</div>

<p>And an example of how you could write code for each type:</p>

<div><table class="CodeRay"><tr>
  <td class="line-numbers"><pre><a href="#n1" name="n1">1</a>
<a href="#n2" name="n2">2</a>
<a href="#n3" name="n3">3</a>
<a href="#n4" name="n4">4</a>
<a href="#n5" name="n5">5</a>
<a href="#n6" name="n6">6</a>
<a href="#n7" name="n7">7</a>
<a href="#n8" name="n8">8</a>
<a href="#n9" name="n9">9</a>
<strong><a href="#n10" name="n10">10</a></strong>
</pre></td>
  <td class="code"><pre>(<span class="keyword">function</span>(){  <span class="comment">// sandbox our code</span>
  <span class="keyword">if</span>(!navigator.connection) navigator.connection = {<span class="key">type</span>:<span class="integer">0</span>, <span class="key">UNKNOWN</span>: <span class="integer">0</span>};  <span class="comment">// polyfill</span>
  <span class="keyword">var</span> connection = navigator.connection;
  
  <span class="keyword">if</span>(connection.type === connection.WIFI || connection.type === connection.ETHERNET) {
    <span class="comment">// high bandwidth</span>
  } <span class="keyword">else</span> {
    <span class="comment">// normal bandwidth</span>
  }
})();
</pre></td>
</tr></table>
</div>

<p>Here’s how we might be able to use <a href="http://modernizr.com/">Modernizr</a> to help us out:</p>

<div><table class="CodeRay"><tr>
  <td class="line-numbers"><pre><a href="#n1" name="n1">1</a>
<a href="#n2" name="n2">2</a>
<a href="#n3" name="n3">3</a>
<a href="#n4" name="n4">4</a>
<a href="#n5" name="n5">5</a>
<a href="#n6" name="n6">6</a>
<a href="#n7" name="n7">7</a>
<a href="#n8" name="n8">8</a>
<a href="#n9" name="n9">9</a>
<strong><a href="#n10" name="n10">10</a></strong>
</pre></td>
  <td class="code"><pre>(<span class="keyword">function</span>(){  <span class="comment">// sandbox our code</span>
  <span class="keyword">if</span>(!navigator.connection) navigator.connection = {<span class="key">type</span>:<span class="integer">0</span>, <span class="key">UNKNOWN</span>: <span class="integer">0</span>};  <span class="comment">// polyfill</span>
  <span class="keyword">var</span> connection = navigator.connection;
  
  <span class="comment">// add a custom test to Modernizr</span>
  Modernizr.addTest(<span class="string"><span class="delimiter">'</span><span class="content">highbandwidth</span><span class="delimiter">'</span></span>, <span class="keyword">function</span>(){
    <span class="keyword">return</span> connection.type === connection.WIFI || connection.type === connection.ETHERNET;
  });

})();
</pre></td>
</tr></table>
</div>

<p>We can now target special high-bandwidth assets with CSS:</p>

<div><table class="CodeRay"><tr>
  <td class="line-numbers"><pre><a href="#n1" name="n1">1</a>
<a href="#n2" name="n2">2</a>
</pre></td>
  <td class="code"><pre><span class="class">.highbandwidth</span> <span class="class">.logo</span> {<span class="key">background-image</span>:<span class="function"><span class="delimiter">url(</span><span class="content">'logo-high.jpg'</span><span class="delimiter">)</span></span>;}
<span class="class">.no-highbandwidth</span> <span class="class">.logo</span> {<span class="key">background-image</span>:<span class="function"><span class="delimiter">url(</span><span class="content">'logo.jpg'</span><span class="delimiter">)</span></span>;}
</pre></td>
</tr></table>
</div>

<h3 id="base64-encode-small-ui-images">base64 encode small UI images</h3>

<p>You can base64 encode binary image data in HTML and CSS:</p>

<h4 id="html">HTML</h4>

<div><table class="CodeRay"><tr>
  <td class="line-numbers"><pre><a href="#n1" name="n1">1</a>
<a href="#n2" name="n2">2</a>
<a href="#n3" name="n3">3</a>
</pre></td>
  <td class="code"><pre><span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUA</span>
<span class="content">AAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO</span>
<span class="content">9TXL0Y4OHwAAAABJRU5ErkJggg==</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">alt</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Red dot</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
</pre></td>
</tr></table>
</div>

<h4 id="css">CSS</h4>

<div><table class="CodeRay"><tr>
  <td class="line-numbers"><pre><a href="#n1" name="n1">1</a>
<a href="#n2" name="n2">2</a>
<a href="#n3" name="n3">3</a>
<a href="#n4" name="n4">4</a>
<a href="#n5" name="n5">5</a>
</pre></td>
  <td class="code"><pre><span class="class">.dot</span> {
  <span class="key">background-image</span>: <span class="function"><span class="delimiter">url(</span><span class="content">'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUA  </span></span>
<span class="value">AAAFCAYAAACNbyblAAAAHElEQVQI12P4</span>//<span class="float">8</span>/<span class="value">w38GIAXDIBKE0DHxgljNBAAO</span>  
<span class="float">9</span><span class="value">TXL0Y4OHwAAAABJRU5ErkJggg</span>==<span class="string"><span class="delimiter">'</span><span class="content">)</span><span class="delimiter">;</span></span>
}
</pre></td>
</tr></table>
</div>

<p>There seems to be the mistaken belief floating around that base64 images aren’t cacheable. However, because you can embed them in your CSS, base64 encoded images will be cached along with the rest of your CSS.</p>

<p>You’ll probably just want to limit this to small UI icons however. I wrote a <a href="http://davidbcalhoun.com/2011/when-to-base64-encode-images-and-when-not-to">quick post on the drawbacks, and also a comparison with sprites</a>.</p>

<p>If you’re using Compass/SASS, base64 encoding images is pretty trivial and easy to maintain with the <a href="http://compass-style.org/reference/compass/helpers/inline-data/">inline-image helper</a>.</p>

<h3 id="unicode-and-emoji">Unicode and Emoji</h3>

<p>☆ (HTML entity: #9734)<br />
<img src="http://davidbcalhoun.com/wp-content/uploads/2011/10/emoji3.png" alt="" title="Emoji" width="18" height="18" /> (HTML entity: <code>#x1f468</code>)</p>

<p>Before even considering base64 images, take advantage of icons that are already made for you: unicode characters and <a href="http://pukupi.com/post/1964">emoji</a> (where supported). Keep in mind that these will look different across browsers, so this might not be an option for everyone.</p>

<p>Because of inconsistent implementations of Emoji character codes between Asian carriers, representatives from Apple and Google made a <a href="http://en.wikipedia.org/wiki/Emoji#Emoji_in_the_Unicode_standard">proposal to add Emoji to the Unicode standard</a>. Unfortunately it seems that only iPhone supports them for now. Here’s a <a href="http://www.unicode.org/charts/PDF/U1F300.pdf">handy chart of all the Unicode emoji characters available</a>.</p>

<h3 id="take-advantage-of-css3">Take advantage of CSS3</h3>

<p>CSS3 offers many replacements for things we needed images for previously. RGBA values replace the need for a semitransparent image for overlays and such. Likewise, border-radius, box shadow, linear-gradients, radial-gradients all reduce the need for images.</p>

<p>However, do be aware that though phones support these new features, it doesn’t mean they’re necessarily ready for primetime. Something I’ve encountered recently to remind me of this fact is <a href="http://code.google.com/p/android/issues/detail?id=767">severe color banding issues when using a CSS radial gradient</a>. The solution was to fake the radial gradient using two linear gradients, or to (unfortunately) use an old-fashioned image.</p>

<h3 id="avoid-using-cookies">Avoid using cookies</h3>

<p>Cookies get thrown into <em>every</em> request on a per-domain basis, so limit your usage of them. Use localStorage/sessionStorage instead, where possible.</p>

<h3 id="app-cache">App cache</h3>

<p>Take advantage of the HTML5 app cache, though it’s an unwieldy beast to tame. This will mean you will need to make your site work offline, which might be tricky.</p>

<p>Assets that are traditionally cached get rechecked on page refresh (the server sends back a 304 response if your cache is still up-to-date). Whereas with the app cache, only one file (your manifest) is rechecked on page load.</p>

<h3 id="deferred-javascript-execution">Deferred JavaScript execution</h3>

<p><img src="http://davidbcalhoun.com/wp-content/uploads/2011/10/gmail-deferred-javascript-execution.png" alt="" title="Gmail deferred JavaScript execution" width="497" height="450" class="aligncenter size-full wp-image-810" /></p>

<p>We know that deferring downloading of scripts is advantageous (by placing scripts at the bottom of a page or by using the <code>async</code> attribute), but deferred execution of JavaScript is even more important. Sure, we can use the <code>defer</code> attribute, but that’s only really relevant for when the page is loading (<code>defer</code> lets the browser know that the UI doesn’t depend on the JavaScript, so it can be safely deferred).</p>

<p>But what about JavaScript that runs after the page loads, such as XHR and JSONP requests? What does this mean for the user? It means that the UI freezes up unexpectedly when JavaScript is being downloaded and executed in the background. But this doesn’t mean that you want to completely avoid background downloading of JavaScript. The Gmail mobile team came up with a <a href="http://googlecode.blogspot.com/2009/09/gmail-for-mobile-html5-series-reducing.html">clever solution</a>: by commenting all of their code and dynamically eval’ing it when needed, they split up the JavaScript downloading from its execution.</p>

<h3 id="perceived-performance">Perceived performance</h3>

<p>Do whatever you have to do to let the user know that the UI is still responding. This sometimes means faking that something is happening. Communication is key! If they clicked on a button, give some indication that they clicked on it. If they clicked on something that requires a request to the network, show a spinner right away, even if it means you haven’t even sent out a request. The user doesn’t need to know the nitty-gritty details – they just want to know that their intent was communicated.</p>

<h3 id="onclick-delay">Onclick delay</h3>

<p>On several major mobile operating systems there’s a several hundred millisecond delay on the onclick event. This is because of the double-tap-to-zoom functionality. When a user first taps on the screen, there’s a hard-coded delay that waits for the second tap. If there’s no second tap, the onclick event is then fired. Unfortunately the only way to get around the delay is to tap into touch events instead, which is a bit more complicated than it appears on first glance.</p>

<p>For an overview of some of the challenges of implementing the workaround, see <a href="http://code.google.com/mobile/articles/fast_buttons.html">this article by Google’s Ryan Fioravanti</a>.</p>

<h3 id="take-advantage-of-hardware-acceleration">Take advantage of hardware acceleration</h3>

<p>Use hardware-accelerated CSS transforms where possible (translate3d, translateZ, rotate3d, and scale3d). An element that is hardware accelerated is turned into a graphic, which is perfect for the GPU to manipulate, taking away the burden from the CPU.</p>

<p>However, the GPU isn’t all-powerful, so don’t try to apply hardware accelerations to everything. Also, these elements still need to be refreshed periodically, and it turns out that you can make some good optimizations here. First, you’ll want to debug the composited layers on your desktop browser:</p>

<h4 id="debugging-hardware-acceleration">Debugging hardware acceleration</h4>

<p><a href="http://www.webkit.org/blog-files/3d-transforms/poster-circle.html"><img src="http://davidbcalhoun.com/wp-content/uploads/2011/10/debug-composited-layers-hardware-acceleration.png" alt="" title="WebKit&#039;s poster circle demo with and without the debug information" width="767" height="399" class="aligncenter size-full wp-image-803" /></a><br />
<em>Chrome</em></p>

<ol>
  <li>Type the following in the address bar: about:flags</li>
  <li>“Composited render layer borders” -&gt; Enable</li>
</ol>

<p><em>Safari</em></p>

<ol>
  <li>Open a terminal</li>
  <li>$ defaults write com.apple.Safari IncludeInternalDebugMenu 1</li>
  <li>$ defaults write com.apple.Safari CA_COLOR_OPAQUE 1</li>
  <li>Open (or restart) Safari</li>
  <li>Debug -&gt; Show Compositing Borders</li>
</ol>

<p>(to turn these off, run the same commands with a boolean FALSE: i.e. <code>defaults write com.apple.Safari CA_COLOR_OPAQUE FALSE</code>)</p>

<p>Keep in mind that each composited layer has a limited width and height. For instance, if you’re creating an image carousel, chances are the dimensions of the element will be too big to fit the layer into memory as one piece. This means that when the element is animated, the GPU has to break up the layer manually into several manageable chunks. It’s much better to chunk it yourself. To do this, you trigger hardware acceleration on each chunk.</p>

<p>So you will change this:</p>

<div><table class="CodeRay"><tr>
  <td class="line-numbers"><pre><a href="#n1" name="n1">1</a>
<a href="#n2" name="n2">2</a>
<a href="#n3" name="n3">3</a>
</pre></td>
  <td class="code"><pre><span class="class">.carousel</span> {
  <span class="key">-webkit-transform</span>: <span class="error">t</span><span class="error">r</span><span class="error">a</span><span class="error">n</span><span class="error">s</span><span class="error">l</span><span class="error">a</span><span class="error">t</span><span class="error">e</span><span class="float">3</span><span class="error">d</span>(<span class="float">0</span>,<span class="float">0</span>,<span class="float">0</span>);  <span class="comment">/* or translateZ(0); */</span>
}
</pre></td>
</tr></table>
</div>

<p>To this:</p>

<div><table class="CodeRay"><tr>
  <td class="line-numbers"><pre><a href="#n1" name="n1">1</a>
<a href="#n2" name="n2">2</a>
<a href="#n3" name="n3">3</a>
<a href="#n4" name="n4">4</a>
<a href="#n5" name="n5">5</a>
<a href="#n6" name="n6">6</a>
<a href="#n7" name="n7">7</a>
</pre></td>
  <td class="code"><pre><span class="class">.carousel</span> {
  <span class="key">-webkit-transform</span>: <span class="error">t</span><span class="error">r</span><span class="error">a</span><span class="error">n</span><span class="error">s</span><span class="error">l</span><span class="error">a</span><span class="error">t</span><span class="error">e</span><span class="float">3</span><span class="error">d</span>(<span class="float">0</span>,<span class="float">0</span>,<span class="float">0</span>);  <span class="comment">/* or translateZ(0); */</span>
}

<span class="class">.carousel-pane</span> {
  <span class="key">-webkit-transform</span>: <span class="error">t</span><span class="error">r</span><span class="error">a</span><span class="error">n</span><span class="error">s</span><span class="error">l</span><span class="error">a</span><span class="error">t</span><span class="error">e</span><span class="float">3</span><span class="error">d</span>(<span class="float">0</span>,<span class="float">0</span>,<span class="float">0</span>);  <span class="comment">/* or translateZ(0); */</span>
}
</pre></td>
</tr></table>
</div>

<p>Where carousel-pane represents each child element of the carousel.</p>

<p>More info: <a href="http://dl.dropbox.com/u/5618867/mseeley-2011-09-27-html5devconf.pdf">(slides) WebKit in Your Living Room (Matt Seeley, Netflix)</a></p>

<p>Also see <a href="http://www.html5rocks.com/en/mobile/optimization-and-performance.html">HTML5 Techniques for Optimizing Mobile Performance</a>.</p>

<h3 id="http-pipelining">HTTP Pipelining</h3>

<p><a href="http://www.blaze.io/mobile/http-pipelining-big-in-mobile/"><img src="http://davidbcalhoun.com/wp-content/uploads/2011/10/pipelining.png" alt="HTTP Pipelining diagram" title="HTTP Pipelining (via Blaze.io)" width="640" height="445" class="aligncenter size-full wp-image-783" /></a></p>

<p>Take advantage of <a href="http://www.blaze.io/mobile/http-pipelining-big-in-mobile/">HTTP Pipelining</a>, which is often overlooked, but has broad support on mobile. This virtually eliminates round trip times, for all but the first request.</p>

<p>Opera and Android support pipelining, and the newly released iOS 5 has added support for it.</p>

<p>Great! So how do you make sure your server is taking advantage of pipelining?</p>

<blockquote>
  <p>The first request to every server is sent by itself (only one request on the connection), and the browser looks for two properties in the response:</p>

  <ol>
    <li>Use of HTTP/1.1</li>
    <li>An explicit “Connection: Keep-Alive” header (required by Android)</li>
  </ol>

  <p><a href="http://www.blaze.io/mobile/http-pipelining-big-in-mobile/">-Blaze.io</a> </p>
</blockquote>

<p>If these criteria are met, subsequent requests will be pipelined. Sweet!</p>

<h3 id="dns-prefetching">DNS Prefetching</h3>

<p>Take advantage of <a href="https://developer.mozilla.org/En/Controlling_DNS_prefetching">DNS Prefetching</a>. This theoretically speeds up load times, but there have been <a href="http://www.mydigitallife.info/turn-off-dns-prefetching-in-google-chrome-to-fix-resolving-host-and-cannot-load-page-error/">some issues</a>, so be sure to test it.</p>

<p>To turn off DNS Prefetching, serve this meta tag:</p>

<div><table class="CodeRay"><tr>
  <td class="line-numbers"><pre><a href="#n1" name="n1">1</a>
</pre></td>
  <td class="code"><pre><span class="tag">&lt;meta</span> <span class="attribute-name">http-equiv</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">x-dns-prefetch-control</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">content</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">off</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
</pre></td>
</tr></table>
</div>

<p>You can also explicitly force a DNS lookup:</p>

<div><table class="CodeRay"><tr>
  <td class="line-numbers"><pre><a href="#n1" name="n1">1</a>
</pre></td>
  <td class="code"><pre><span class="tag">&lt;link</span> <span class="attribute-name">rel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">dns-prefetch</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.example.com/</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
</pre></td>
</tr></table>
</div>

<h3 id="avoid-library-code-bloat">Avoid library code bloat</h3>

<p>If you’re developing for smart phones, you may be able to dramatically reduce the data over the wire by simply using new JavaScript APIs instead of a full-blown library or framework such as jQuery Mobile (which is rather a UI framework and depends on the desktop version of jQuery).</p>

<p>Among the things offered by newer browsers, which should reduce your dependence on a library:</p>

<ul>
  <li><a href="https://developer.mozilla.org/En/DOM/Document.querySelector">querySelector</a>/<a href="https://developer.mozilla.org/en/DOM/document.querySelectorAll">querySelectorAll</a>: CSS selectors that replace the need for a selector engine</li>
  <li><a href="https://developer.mozilla.org/en/DOM/document.getElementsByClassName">getElementsByClassName</a></li>
  <li><a href="https://developer.mozilla.org/en/DOM/element.classList">classList</a> – replaces the need for hasClass, addClass, removeClass helpers (available on iOS5, but not sure what else)</li>
  <li><a href="https://developer.mozilla.org/En/XMLHttpRequest/Using_XMLHttpRequest">XMLHttpRequest</a> – it’s probably time to learn how to do this natively instead of using a wrapper that takes care of IE’s old implementation that requests an ActiveX object. <a href="http://hacks.mozilla.org/2009/07/cross-site-xmlhttprequest-with-cors/">Cross-Origin Resource Sharing</a> also means we can easily share resources across domains.</li>
  <li><a href="https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history">HTML5 history (pushState, etc)</a> – though an <a href="https://bugs.webkit.org/show_bug.cgi?id=42940">older bug</a> means you should maybe hold off for now (note: the fix is present in iOS 5, which is based on a newer WebKit)</li>
  <li><a href="http://www.the-art-of-web.com/html/html5-form-validation/">HTML5 Form Validation</a> reduces our need for JavaScript-based validation</li>
  <li>HTML5 input types that reduce our need for custom UI controls (date, time, slider [range], etc)</li>
</ul>

<p>You’ll want to consider using either a library that was optimized for the browsers you’re targeting (such as <a href="http://zeptojs.com/">Zepto.js</a>) or simply bring in <a href="http://microjs.com/">a microlibrary for specific tasks you want to perform</a>.</p>

<h3 id="clientside-databases">Clientside databases</h3>

<p>Most mobile browsers currently support WebSQL, which is being phased out in support of indexedDB, which is not widely implemented. However, if you use a wrapper such as <a href="http://westcoastlogic.com/lawnchair/">Lawnchair</a>, the transition from one to the other is relatively painless.</p>

<h3 id="todo-testing">TODO: testing</h3>

<h3 id="more">More</h3>

<p>(to be expanded on later)</p>

<ul>
  <li>use standard desktop best practices (for smart phones)</li>
  <li>requestAnimationFrame instead of setTimeout</li>
  <li>setImmediate (where available) instead of setTimeout(fn(){},0)</li>
  <li>Ajax parsing times: you might want to use Multipart XHR so you can yield the process as it’s going through big responses (to prevent the UI locking up)</li>
  <li>avoid rgba, box shadows, text shadow, etc, as this greatly degrades performance (especially on animations)</li>
  <li>high resolution screens may suffer from animation/transition slowness – it’s been shown that manipulating the viewport tag to scale the page <a href="http://29a.ch/2011/5/27/fast-html5-canvas-on-iphone-mobile-safari-performance">will speed up canvas rendering</a>, and <a href="http://paulbakaus.com/2011/10/10/scroller-vs-scrollability-deathmatch/">high-dpi scaling concerns are also evident in CSS transforms</a></li>
  <li><a href="http://joehewitt.com/2011/10/05/fast-animation-with-ios-webkit">WebKit animations are faster than animations done via JavaScript</a></li>
  <li>if you do use JavaScript-based animations, limit the UI updates to ~17ms, which is equivalent to 60fps, which is the fastest your display will refresh anyway, so it’s pointless to try to do anything faster than that. Keep track of the time since the last UI update and don’t do anything if 17ms haven’t passed.</li>
</ul>

<h3 id="on-the-horizon8230">On the horizon…</h3>

<ul>
  <li><a href="http://www.chromium.org/spdy">SPDY</a>: already implemented in Amazon’s Silk browser for Kindle. Will possibly be on Android phones <a href="http://androidandme.com/2011/10/news/google-chrome-is-finally-coming-to-an-android-device-near-you/">when the browser is powered by Chrome</a></li>
  <li>indexedDB replacing WebSQL</li>
</ul>

<h3 id="tools">Tools</h3>

<p><a href="http://stevesouders.com/mobileperf/mobileperfbkm.php">Mobile Perf bookmarklet</a><br />
<a href="http://calendar.perfplanet.com/2010/mobile-performance-analysis-using-pcapperf/">pcapperf (Packet Capture Web Performance Analyzer)</a><br />
<a href="http://www.blaze.io/mobile/">Blaze Mobitest</a> – tests the loading time of your site on actual phones</p>

<h3 id="more-resources">More Resources</h3>

<p><a href="http://www.w3.org/TR/mwabp/">Mobile Web Application Best Practices</a><br />
<a href="http://stevesouders.com/mobileperf/">Mobile Performance (Steve Souders)</a><br />
<a href="http://www.strangeloopnetworks.com/web-performance-optimization-hub/topics/mobile/">Strangeloop Web Performance Hub / Mobile</a></p>

<p>(odometer image via <a href="http://www.flickr.com/photos/henrybloomfield/4442900025/">henrybloomfield on Flickr</a>)</p>


		
		
	</div>

</article>

<nav id="pagenavi">
    
        <a href="/blog/page/2/" class="prev">Previous</a>
    
    
        <a href="/blog/page/4/" class="next">Next</a>
    
</nav>
</div>
	<footer id="footer" class="inner"><br>
<br>
<br>
<br>
&copy; 2014
<a href="mailto:david.b.calhoun@gmail.com">David Calhoun</a> (<a href="https://twitter.com/franksvalli">@franksvalli</a>) - <a href="https://www.linkedin.com/in/davidcalhoun">LinkedIn</a> - <a href="http://themaingate.net/resume/">Resume</a></footer>
	<!-- <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script src="/javascripts/slash.js"></script> -->
<!-- <script src="/javascripts/hyphenator.js"></script> -->


<script type="text/javascript">
      var disqus_shortname = 'davidbcalhoun';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>




<script src="/javascripts/main.js"></script>
<!-- <script src="/javascripts/negative-scroll-blur.js"></script> -->

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-5530615-3', 'davidbcalhoun.com');
  ga('send', 'pageview');

</script>

</body>
</html>
