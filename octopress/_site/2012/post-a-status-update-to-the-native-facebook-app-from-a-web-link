<h3 id='update_2252013'><strong>UPDATE 2/25/2013</strong></h3>

<p><strong>As of Facebook&#8217;s update last year, it appears that many of the old <a href='http://wiki.akosma.com/IPhone_URL_Schemes#Facebook'>Facebook URL schemes</a> are no longer working&#8230;</strong>. So this post looks to be outdated and useless already. <img alt=':P' class='wp-smiley' src='http://davidbcalhoun.com/wp-includes/images/smilies/icon_razz.gif' /></p>

<h3 id='the_skinny'>The skinny</h3>

<p>Copy this code:</p>

<blockquote><pre class='markdown-html-error' style='border: solid 3px red; background-color: pink'>REXML could not parse this XML/HTML: 
&lt;div class=&quot;codecolorer-container text twitlight&quot; style=&quot;overflow:auto;white-space:nowrap;width:435px;&quot;&gt;
  &lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot;&gt;
    &lt;tr&gt;
      &lt;td class=&quot;line-numbers&quot;&gt;
        &lt;div&gt;
          1&lt;br /&gt;
        &lt;/div&gt;
      &lt;/td&gt;
      
      &lt;td&gt;
        &lt;div class=&quot;text codecolorer&quot;&gt;
          &lt;a href=&amp;quot;fb://publish/profile/me?text=foo&amp;quot;&gt;&lt;a href=&quot;fb://publish/profile/me?text=foo&quot;&gt;Post to Facebook&lt;/a&gt;&lt;/a&gt;
        &lt;/div&gt;
      &lt;/td&gt;
    &lt;/tr&gt;
  &lt;/table&gt;
&lt;/div&gt;</pre></blockquote>

<h3 id='explanation'>Explanation</h3>

<p>As you may know, Facebook has a URL scheme</p>
<div class='codecolorer-container text twitlight' style='overflow:auto;white-space:nowrap;width:435px;'>
  <table cellpadding='0' cellspacing='0'>
    <tr>
      <td class='line-numbers'>
        <div>
          1<br />
        </div>
      </td>
      
      <td>
        <div class='text codecolorer'>
          fb://
        </div>
      </td>
    </tr>
  </table>
</div>
<p>which seems to be mainly used by native developers. What most folks don&#8217;t realize is that it&#8217;s just a URL scheme, like http://, and that we can use it within our mobile browsers! The only problem is that there&#8217;s no official documentation for it, so folks have had to hunt down the particulars.</p>

<p>After poking around a bit, you might find <a href='http://stackoverflow.com/questions/5707722/what-are-all-the-custom-url-schemes-supported-by-the-facebook-iphone-app/'>this topic on Stackoverflow</a>, which contains a ton of protocols for getting to specific sections of the Facebook app, as well as this interesting snippet:</p>

<blockquote><div class='codecolorer-container text twitlight' style='overflow:auto;white-space:nowrap;width:435px;'>
  <table cellpadding='0' cellspacing='0'>
    <tr>
      <td class='line-numbers'>
        <div>
          1<br />
        </div>
      </td>
      
      <td>
        <div class='text codecolorer'>
          <a href='fb://publish/profile/#ID#?text=#BODY#'>fb://publish/profile/#ID#?text=#BODY#</a>
        </div>
      </td>
    </tr>
  </table>
</div></blockquote>

<p>Trying that as a link does work, but it takes you to this blank screen:</p>
<img alt='Facebook app - blank screen' class='aligncenter size-full wp-image-878' height='480' src='http://davidbcalhoun.com/wp-content/uploads/2012/02/facebook-blank-screen.png' title='Facebook app - blank screen' width='320' />
<p>That blank screen isn&#8217;t too exciting, but it is peaceful, like a Zen rock garden. Bookmark that page so you can come back later, when you&#8217;re overwhelmed by friends flooding your updates screen with baby pictures.</p>

<h3 id='google_to_the_rescue'>Google to the rescue!</h3>

<p>Ok, now back to work!</p>

<p>After poking around and trying to find my Facebook id, I inserted it and got the link to work. But that&#8217;s not ideal, since everyone has different user ids. And I&#8217;m not about to load in all the bloatware that comes with the Facebook API just to find a user id!</p>

<p>After poking around a bit, I found <a href='http://stackoverflow.com/questions/9077817/open-facebook-app-with-text-from-ipad-app'>this link</a> which showed this generic pattern:</p>

<blockquote><div class='codecolorer-container text twitlight' style='overflow:auto;white-space:nowrap;width:435px;'>
  <table cellpadding='0' cellspacing='0'>
    <tr>
      <td class='line-numbers'>
        <div>
          1<br />
        </div>
      </td>
      
      <td>
        <div class='text codecolorer'>
          <a href='fb://publish/profile/me'>fb://publish/profile/me</a>
        </div>
      </td>
    </tr>
  </table>
</div></blockquote>

<p>Whoo! And that works! But I still want to prepopulate the status field. We can do that by passing in a URL parameter:</p>

<blockquote><div class='codecolorer-container text twitlight' style='overflow:auto;white-space:nowrap;width:435px;'>
  <table cellpadding='0' cellspacing='0'>
    <tr>
      <td class='line-numbers'>
        <div>
          1<br />
        </div>
      </td>
      
      <td>
        <div class='text codecolorer'>
          <a href='fb://publish/profile/me?text=foo'>fb://publish/profile/me?text=foo</a>
        </div>
      </td>
    </tr>
  </table>
</div></blockquote>

<p>Clicking on it will get you to a screen which looks like this:</p>
<img alt='Facebook status update with share button disabled' class='aligncenter size-full wp-image-865' height='480' src='http://davidbcalhoun.com/wp-content/uploads/2012/02/facebook-status-disabled.png' title='Facebook status update with share button disabled' width='320' />
<p>This, interestingly enough, appears to be the old implementation of the status screen. Here&#8217;s what it looks like if you launch it through the button on the native app:</p>
<img alt='Facebook status - what it looks like normally' class='aligncenter size-full wp-image-867' height='480' src='http://davidbcalhoun.com/wp-content/uploads/2012/02/facebook-status-normal.png' title='Facebook status - what it looks like normally' width='320' />
<p>Also note that the Share button is disabled until the user types in text themselves. This might be a little confusing for some users, but it&#8217;s probably the best way to prevent spam.</p>

<h3 id='detecting_if_the_facebook_app_is_installed'>Detecting if the Facebook app is installed</h3>

<p>There&#8217;s another issue with <em>folks who don&#8217;t have the native Facebook app installed</em>. There doesn&#8217;t seem to be a perfect way to detect if the link failed and went nowhere. What we have to work with are <a href='http://stackoverflow.com/questions/7231085/how-to-fall-back-to-marketplace-when-android-custom-url-scheme-not-handled'>hacky workarounds involving setTimeout</a>.</p>

<p>It looks like native iOS apps have an ideal URL scheme checking ability with a <a href='http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-working-with-url-schemes/'>canOpenURL</a> method. Unfortunately it doesn&#8217;t look like the web has this function (yet). Let&#8217;s bug Apple to implement it! <img alt=':)' class='wp-smiley' src='http://davidbcalhoun.com/wp-includes/images/smilies/icon_smile.gif' /></p>

<h3 id='related'>Related</h3>

<p>Just a heads up &#8211; I&#8217;m definitely not the first one to figure this out, as I found a <a href='http://jsfiddle.net/ThinkingStiff/dpUKh/'>jsfiddle</a> with the same information, plus an example for posting to Twitter. That was surprisingly the only result! I couldn&#8217;t find anyone who blogged about it yet, so here you are!</p>

<p><a href='http://wiki.akosma.com/IPhone_URL_Schemes'>More URI schemes for other launching other native apps</a></p>